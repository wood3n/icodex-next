<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>icodex Blog</title>
        <link>https://icodex.me/</link>
        <description>icodex Blog</description>
        <lastBuildDate>Sun, 28 Apr 2024 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh-CN</language>
        <item>
            <title><![CDATA[shadcn-uiå®ç°åŸç†]]></title>
            <link>https://icodex.me/shadcn</link>
            <guid>/shadcn</guid>
            <pubDate>Sun, 28 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Shadcn ui æ˜¯æœ€è¿‘æ¯”è¾ƒç«çš„ä¸€ä¸ª React ç»„ä»¶åº“ï¼Œå®˜æ–¹ä»‹ç»å…¶å¹¶éç»„ä»¶åº“ï¼Œå› ä¸ºå®ƒå¹¶éåŸºäº npm package çš„å½¢å¼æ¥ç»´æŠ¤ï¼Œè€Œæ˜¯é€šè¿‡ nodejs å‘½ä»¤æ”¯æŒå°†ç»„ä»¶æºç ç›´æ¥å¤åˆ¶åˆ°ä½ çš„é¡¹ç›®ä¸­ã€‚]]></description>
            <content:encoded><![CDATA[<p>Shadcn ui æ˜¯æœ€è¿‘æ¯”è¾ƒç«çš„ä¸€ä¸ª React ç»„ä»¶åº“ï¼Œå®˜æ–¹ä»‹ç»å…¶å¹¶éç»„ä»¶åº“ï¼Œå› ä¸ºå®ƒå¹¶éåŸºäº npm package çš„å½¢å¼æ¥ç»´æŠ¤ï¼Œè€Œæ˜¯é€šè¿‡ nodejs å‘½ä»¤æ”¯æŒå°†ç»„ä»¶æºç ç›´æ¥å¤åˆ¶åˆ°ä½ çš„é¡¹ç›®ä¸­ã€‚</p><p>æœ¬ç¯‡æ–‡ç« ä»ä½¿ç”¨åˆ°åˆ†æ shadcn cli å‘½ä»¤æºç çš„å®ç°ï¼Œæ¥æ·±å…¥äº†è§£è¿™ä¸ªç»„ä»¶åº“å†…éƒ¨çš„ä¸€äº›åŸç†ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä½¿ç”¨">ä½¿ç”¨<a class="hash-link" href="#ä½¿ç”¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åˆå§‹åŒ–">åˆå§‹åŒ–<a class="hash-link" href="#åˆå§‹åŒ–" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>shadcn ui ä¾èµ–äº tailwindcssï¼Œæ‰€ä»¥ä½¿ç”¨ shadcn ui çš„ç»„ä»¶éœ€è¦å®‰è£…å’Œé…ç½® tailwindcssï¼Œè¿™é‡Œå°±ä¸ç»†è¯´äº†ã€‚</p><p>tailwindcss å®‰è£…å®Œå°±å¯ä»¥ä½¿ç”¨ shadcn ui æä¾›çš„ cli å·¥å…·æ¥åˆå§‹åŒ–ä¸€äº›é…ç½®äº†ï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">npx shadcn-ui@latest init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œ<code>init</code>å‘½ä»¤ä¼šè¯¢é—®ä¸‹é¢ä¸€å †é—®é¢˜ï¼Œç„¶åå¯ä»¥çœ‹åˆ°é¡¹ç›®å†…éƒ¨å¤šäº†<code>components</code>ç›®å½•ï¼ˆå¦‚æœå·²å­˜åœ¨åˆ™ä¸å˜ï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>components.json</code>æ–‡ä»¶ã€‚</p><p><img loading="lazy" alt="image-20240428212404577" src="/assets/images/image-20240428212404577-fac654b9881e3c430ec76e5087a982a2.png" width="1116" height="435" class="img_ev3q"></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// components.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"$schema"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"https://ui.shadcn.com/schema.json"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç»„ä»¶æ ·å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"style"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"default"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ˜¯å¦ rsc ç»„ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"rsc"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ˜¯å¦ä½¿ç”¨ typescript</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"tsx"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// tailwind çš„ä¸€äº›é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"tailwind"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"config"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"tailwind.config.js"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"css"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"app/globals.css"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"baseColor"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"slate"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"cssVariables"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"prefix"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// shadcn ç»„ä»¶ä½¿ç”¨åˆ°çš„ utils å‡½æ•°çš„å¼•ç”¨è·¯å¾„ï¼Œä»¥åŠç›¸äº’ä¹‹é—´å¼•ç”¨çš„ç›¸å¯¹è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"aliases"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"components"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"@/components"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"utils"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"@/lib/utils"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ·»åŠ ç»„ä»¶">æ·»åŠ ç»„ä»¶<a class="hash-link" href="#æ·»åŠ ç»„ä»¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä½¿ç”¨ cli å‘½ä»¤æ·»åŠ  shadcn ui å…·æœ‰çš„ç»„ä»¶ï¼Œæ¯”å¦‚æ·»åŠ ä¸€ä¸ª<code>button</code>ç»„ä»¶</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">npx shadcn-ui@latest </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> button</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œå®Œä¸Šé¢è¿™è¡Œå‘½ä»¤ï¼Œå°±ä¼šå¾€<code>components</code>ç›®å½•ä¸‹å†™å…¥<code>button</code>ç»„ä»¶ä»£ç ï¼Œè¿™ä¸ªç»„ä»¶å®ç°æ¯”è¾ƒç®€å•ï¼Œæºç å°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚å¯ä»¥çœ‹åˆ°å…¶å†…éƒ¨è¿˜ä¾èµ–äº†ä¸€ä¸ªç»„ä»¶åº“<code>@radix-ui/react-slot</code>ï¼Œï¼ˆè¿™ä¸æ˜¯å¥—å¨ƒå—ğŸ˜…ï¼‰</p><p><img loading="lazy" alt="shadcn-code" src="/assets/images/shadcn-code-b32f1c56852eb122fb815dc820d05b30.png" width="1430" height="1640" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ›´æ–°ç»„ä»¶">æ›´æ–°ç»„ä»¶<a class="hash-link" href="#æ›´æ–°ç»„ä»¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>shadcn çš„ cli è¿˜æœ‰ä¸€ä¸ª<code>diff</code>å‘½ä»¤ç”¨äºæ˜¾ç¤ºç»„ä»¶æ›´æ–°ï¼Œæ‰§è¡Œ<code>diff button</code>å¯ä»¥çœ‹åˆ°å…¶ä¼šåœ¨ç»ˆç«¯æ˜¾ç¤ºè¿œç«¯å’Œæœ¬åœ°å­˜åœ¨ä¸åŒçš„ä»£ç è¡Œï¼Œé€šè¿‡è“ç»¿è‰²åŒºåˆ†å¼€ï¼Œè¯´å®è¯ï¼Œè¿™åŠŸèƒ½æ„Ÿè§‰æ¯”è¾ƒé¸¡è‚‹ã€‚</p><p><img loading="lazy" alt="image-20240428214650945" src="/assets/images/image-20240428214650945-c00627f82867495fe808d036de5def94.png" width="1788" height="751" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="monorepo-æ”¯æŒ">monorepo æ”¯æŒ<a class="hash-link" href="#monorepo-æ”¯æŒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>shadcn uiæä¾›çš„ä¸‰ä¸ª cli å‘½ä»¤éƒ½æ”¯æŒé€šè¿‡<code>--cwd</code>æ¥æŒ‡å®šé¡¹ç›®çš„æ ¹ç›®å½•ï¼Œä¹Ÿç®—æ˜¯æ”¯æŒ<code>monorepo</code>å§ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cliè§£æ">cliè§£æ<a class="hash-link" href="#cliè§£æ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>shadcn çš„ cli ä»£ç åŸºäº pnpm workspace çš„ç»“æ„ï¼Œè™½ç„¶æ˜¯ monorepo é¡¹ç›®ï¼Œä½† workspace ä¸‹åªæœ‰ä¸€ä¸ª cli é¡¹ç›®ï¼Œä»£ç ç›®å½•ç»“æ„è¿˜æ˜¯å¾ˆç®€æ´æ¸…æ™°çš„ã€‚</p><p><code>src/commands</code>ä¸‹å¯¹åº”ä¸‰ä¸ªå‘½ä»¤çš„æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨<code>index.ts</code>å†…éƒ¨å¼•ç”¨ï¼Œå¹¶é€šè¿‡<a href="https://github.com/tj/commander.js" target="_blank" rel="noopener noreferrer"><code>Command</code></a>æ³¨å†Œã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">src</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> â”£ commands</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> â”ƒ â”£ add.ts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> â”ƒ â”£ diff.ts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> â”ƒ â”— init.ts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> â”£ utils</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> â”— index.ts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> add </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"@/src/commands/add"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> diff </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"@/src/commands/diff"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> init </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"@/src/commands/init"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> Command </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"commander"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> getPackageInfo </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"./utils/get-package-info"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">on</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"SIGINT"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">exit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">on</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"SIGTERM"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">exit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> packageInfo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getPackageInfo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> program </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Command</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"shadcn-ui"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"add components and dependencies to your project"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      packageInfo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">version </span><span class="token operator">||</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"1.0.0"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">"-v, --version"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">"display the version number"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  program</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">addCommand</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">addCommand</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">addCommand</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">diff</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  program</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">parse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="init">init<a class="hash-link" href="#init" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>init</code>æ–¹æ³•å¦‚ä¸‹ï¼Œæ­£å¦‚<code>init</code>å‘½ä»¤å®šä¹‰çš„æè¿°é‚£æ ·<code>initialize your project and install dependencies</code>ï¼Œå…¶ä¸»è¦å·¥ä½œå…¶å®å°±ä¸¤æ­¥ï¼š</p><ol><li>ä½¿ç”¨<code>promptForConfig</code>æ–¹æ³•ï¼Œé€šè¿‡å‘½ä»¤è¡Œäº¤äº’è·å–ç”¨æˆ·è¾“å…¥çš„é…ç½®ä¿¡æ¯</li><li>ä½¿ç”¨<code>runInit</code>æ–¹æ³•ç”Ÿæˆé…ç½®æ–‡ä»¶<code>components.json</code>å’Œå­˜æ”¾<code>utils</code>ï¼Œ<code>components</code>çš„ç›®å½•</li></ol><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> z </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"zod"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> initOptionsSchema </span><span class="token operator">=</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">object</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  cwd</span><span class="token operator">:</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  yes</span><span class="token operator">:</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  defaults</span><span class="token operator">:</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> init </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Command</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">action</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">opts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// ä½¿ç”¨ zod æ ¡éªŒå¹¶è·å–å‘½ä»¤è¡Œè¾“å…¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> options </span><span class="token operator">=</span><span class="token plain"> initOptionsSchema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">parse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">opts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> cwd </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ£€æµ‹æ˜¯å¦å…·æœ‰ tailwind é…ç½®æ–‡ä»¶ tailwind.config.(js|ts)ï¼Œæ²¡æœ‰åˆ™æŠ¥é”™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token function" style="color:rgb(80, 250, 123)">preFlight</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// è·å–ç›®å½•ä¸‹components.jsoné…ç½®æ–‡ä»¶å†…å®¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> projectConfig </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getProjectConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">projectConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¦‚æœæ˜¯ nextjs+typescript é¡¹ç›®ä¸”å­˜åœ¨ tailwind base é…ç½®å’Œ tsconfig paths é…ç½®ï¼Œåˆ™æ‰§è¡Œç®€å•åŒ–é—®é¢˜äº¤äº’</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> config </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">promptForMinimalConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          projectConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          opts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">defaults</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ‰§è¡Œç”Ÿæˆæ–‡ä»¶æ­¥éª¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">runInit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> existingConfig </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// ä½¿ç”¨ prompts è¯¢é—®å…¨éƒ¨é—®é¢˜</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> config </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">promptForConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> existingConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">yes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">runInit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      logger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      logger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">chalk</span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token template-string interpolation function" style="color:rgb(80, 250, 123)">green</span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string interpolation"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token template-string interpolation">          </span><span class="token template-string interpolation string" style="color:rgb(255, 121, 198)">"Success!"</span><span class="token template-string interpolation"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token template-string interpolation">        </span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)"> Project initialization completed. You may now add components.</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      logger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token function" style="color:rgb(80, 250, 123)">handleError</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="promptforconfig">promptForConfig<a class="hash-link" href="#promptforconfig" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p><code>promptForConfig</code>æ–¹æ³•æºç å¦‚ä¸‹ï¼Œå…¶ä¸»è¦å·¥ä½œå°±æ˜¯ä¸‰æ­¥ï¼š</p><ol><li>ä»è¿œç«¯åŠ è½½ shadcn æ”¯æŒçš„ä¸»é¢˜å’ŒåŸºç¡€è‰²é…ç½®ä¿¡æ¯ï¼Œè¿™éƒ¨åˆ†ä¿¡æ¯éœ€è¦åœ¨å‘½ä»¤è¡Œäº¤äº’å†…ä½¿ç”¨ï¼Œæç¤ºç”¨æˆ·é€‰æ‹©</li><li>ä½¿ç”¨å‘½ä»¤è¡Œäº¤äº’è·å–ç”¨æˆ·åå¥½é…ç½®ï¼›</li><li>ç”Ÿæˆ components.json é…ç½®æ–‡ä»¶ï¼›</li><li>æœ€åè¿”å›è§£æé…ç½®çš„ç»“æœ</li></ol><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">promptForConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  cwd</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  defaultConfig</span><span class="token operator">:</span><span class="token plain"> Config </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  skip </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// è·å–è¿œç«¯ä¸»é¢˜é…ç½®ï¼Œhttps://ui.shadcn.com/registry/styles/index.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> styles </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getRegistryStyles</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// è·å–ç»„ä»¶åŸºç¡€è‰²é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> baseColors </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getRegistryBaseColors</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å‘½ä»¤è¡Œè¾“å…¥äº¤äº’</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> options </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">prompts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token operator">...</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ ¡éªŒè¾“å…¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> config </span><span class="token operator">=</span><span class="token plain"> rawConfigSchema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">parse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token operator">...</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç”Ÿæˆ components.json é…ç½®æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  logger</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> spinner </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ora</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">Writing components.json...</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> targetPath </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"components.json"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">writeFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">targetPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">JSON</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">stringify</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"utf8"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  spinner</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">succeed</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// è¿”ä¼šé…ç½®è§£æä¿¡æ¯ï¼ŒåŒ…æ‹¬è§£æå¾—åˆ°çš„ components å­˜æ”¾ç›®å½•ç»å¯¹è·¯å¾„ç­‰ä¿¡æ¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">resolveConfigPaths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// ä»è¿œç«¯è·å–ä¸»é¢˜é…ç½®æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getRegistryStyles</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fetchRegistry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"styles/index.json"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> stylesSchema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">parse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">Failed to fetch styles from registry.</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// è·å–ä¸»é¢˜è‰²é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getRegistryBaseColors</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"slate"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      label</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"Slate"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"gray"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      label</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"Gray"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"zinc"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      label</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"Zinc"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"neutral"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      label</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"Neutral"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"stone"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      label</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"Stone"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fetchregistry">fetchRegistry<a class="hash-link" href="#fetchregistry" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p><code>promptForConfig</code>å†…éƒ¨ä½¿ç”¨çš„<code>fetchRegistry</code>æ–¹æ³•ï¼Œé»˜è®¤ä»<code>https://ui.shadcn.com</code>åŸŸåæ‹‰å–é…ç½®ï¼Œè¿™ä¸ªåŸŸåä¹Ÿå°±æ˜¯shadcn ui å®˜æ–¹æ–‡æ¡£çš„åŸŸååœ°å€ã€‚<code>https://ui.shadcn.com/registry/styles/index.json</code>è·å–ä¸€ä»½ä¸»é¢˜é…ç½®ï¼Œå¯¹åº”<code>components.json</code>çš„<code>style</code></p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> baseUrl </span><span class="token operator">=</span><span class="token plain"> process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">env</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">COMPONENTS_REGISTRY_URL</span><span class="token plain"> </span><span class="token operator">??</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"https://ui.shadcn.com"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fetchRegistry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">paths</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> results </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">all</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> response </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fetch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">baseUrl</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)">/registry/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">path</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          agent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">json</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> results</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin" style="color:rgb(189, 147, 249)">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">Failed to fetch registry from </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">baseUrl</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)">.</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resolveconfigpaths">resolveConfigPaths<a class="hash-link" href="#resolveconfigpaths" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p><code>resolveConfigPaths</code>å†…éƒ¨ä½¿ç”¨<code>tsconfig-paths</code>çš„<code>createMatchPath</code>æ–¹æ³•æ¥å¯¹<code>tconfig.json</code>ä¸­å®šä¹‰çš„<code>paths</code>å­—æ®µè¿›è¡Œè§£æï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªç»å¯¹è·¯å¾„ã€‚</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> loadConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> createMatchPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token class-name">ConfigLoaderSuccessResult</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"tsconfig-paths"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">resolveConfigPaths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token operator">:</span><span class="token plain"> RawConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// è¯»å–é¡¹ç›®çš„tsconfig.jsonæ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> tsConfig </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">loadConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> configSchema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">parse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">...</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    resolvedPaths</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token operator">...</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// è§£æç›¸å¯¹è·¯å¾„å¾—åˆ°ç»å¯¹è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      utils</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">resolveImport</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">aliases</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"utils"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tsConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      components</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">resolveImport</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">aliases</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"components"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tsConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ui</span><span class="token operator">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">aliases</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"ui"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token operator">?</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">resolveImport</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">aliases</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"ui"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tsConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">resolveImport</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">aliases</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"components"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tsConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// ä» components.json ä¸­å®šä¹‰çš„ aliases.utilsï¼Œaliases.components ç›¸å¯¹è·¯å¾„è§£æå¾—åˆ°ç»å¯¹è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">resolveImport</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  importPath</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  config</span><span class="token operator">:</span><span class="token plain"> Pick</span><span class="token operator">&lt;</span><span class="token plain">ConfigLoaderSuccessResult</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"absoluteBaseUrl"</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"paths"</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">createMatchPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">absoluteBaseUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    importPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">undefined</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">".ts"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">".tsx"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>createMatchPath</code>ä¸€èˆ¬é…åˆ<code>loadConfig</code>ä½¿ç”¨ï¼Œé¦–å…ˆä½¿ç”¨<code>loadConfig</code>è¯»å–é¡¹ç›®çš„<code>tsconfig.json</code>æ–‡ä»¶ï¼Œå…¶è¿”å›é¡¹ç›®æ ¹ç›®å½•çš„ç»å¯¹è·¯å¾„<code>absoluteBaseUrl</code>ã€‚<code>loadConfig</code>å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">ConfigLoaderSuccessResult</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    resultType</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"success"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// tsconfig.json çš„ç»å¯¹è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    configFileAbsolutePath</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// tsconfig.json å®šä¹‰çš„ baseUrl</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    baseUrl</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// åŸºäº baseUrl çš„é¡¹ç›®ç»å¯¹è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    absoluteBaseUrl</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// tsconfig.json å®šä¹‰çš„ paths</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    paths</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">key</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Array</span><span class="token operator">&lt;</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    mainFields</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    addMatchAll</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">ConfigLoaderFailResult</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    resultType</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"failed"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    message</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">declare</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token class-name">ConfigLoaderResult</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> ConfigLoaderSuccessResult </span><span class="token operator">|</span><span class="token plain"> ConfigLoaderFailResult</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">declare</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">loadConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> ConfigLoaderResult</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¾‹å¦‚å¯¹äºä¸‹é¢ä¸€ä¸ªé¡¹ç›®ç»“æ„è¿”å›çš„<code>absoluteBaseUrl</code>å¦‚ä¸‹ï¼Œæ³¨æ„<code>absoluteBaseUrl</code>ä¼šæ ¹æ®<code>baseUrl</code>å˜åŒ–ï¼Œä¸€èˆ¬æ˜¯é¡¹ç›®æ ¹ç›®å½•åé¢ä¸²æ¥<code>baseUrl</code>éƒ¨åˆ†è·¯å¾„ï¼Œæ‰€ä»¥ä¸æ¨èé¡¹ç›®ä½¿ç”¨<code>baseUrl</code>ï¼Œå½±å“çš„èŒƒå›´ä¸å¯æ§ã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">tsconfig-path-test</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€ src</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚  â””â”€ index.ts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€ package.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â””â”€ tsconfig.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  resultType</span><span class="token operator">:</span><span class="token plain"> 'success'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  configFileAbsolutePath</span><span class="token operator">:</span><span class="token plain"> 'D</span><span class="token operator">:</span><span class="token plain">\\code\\tsconfig-path-test\\tsconfig.json'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  baseUrl</span><span class="token operator">:</span><span class="token plain"> undefined</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  absoluteBaseUrl</span><span class="token operator">:</span><span class="token plain"> 'D</span><span class="token operator">:</span><span class="token plain">\\code\\tsconfig-path-test'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  paths</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> '@</span><span class="token comment" style="color:rgb(98, 114, 164)">/*': [ './src/*' ] },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">  addMatchAll: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»<code>loadConfig</code>è·å–åˆ°é¡¹ç›®æ ¹ç›®å½•çš„ç»å¯¹è·¯å¾„ä»¥åï¼Œå°±å¯ä»¥ä¼ å…¥<code>createMatchPath</code>æ–¹æ³•ï¼Œ<code>createMatchPath</code>å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * åŒ¹é…è·¯å¾„çš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">MatchPath</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">requestedModule</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> readJson</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> Filesystem</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">ReadJsonSync</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> fileExists</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> extensions</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> ReadonlyArray</span><span class="token operator">&lt;</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">undefined</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * åˆ›å»ºä¸€ä¸ªè§£æ tsconfig.json ä¸­ paths é…ç½®çš„è·¯å¾„çš„å‡½æ•°</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * @param absoluteBaseUrl æ ¹æ® baseUrl å®šä¹‰çš„é¡¹ç›®æ ¹ç›®å½•</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * @param paths tsconfig.json å®šä¹‰çš„ paths</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * @param mainFields A list of package.json field names to try when resolving module files. Select a nested field using an array of field names.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * @param addMatchAll Add a match-all "*" rule if none is present</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">declare</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">createMatchPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">absoluteBaseUrl</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> paths</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">key</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Array</span><span class="token operator">&lt;</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> mainFields</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> addMatchAll</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> MatchPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰€ä»¥ä¸Šé¢çš„<code>resolveImport</code>æ–¹æ³•å¯¹<code>@/components</code>ï¼Œ<code>@/lib/utils</code>è¿™æ ·çš„ç›¸å¯¹è·¯å¾„ï¼Œè§£æå¯ä»¥å¾—åˆ°å…¶ç»å¯¹è·¯å¾„å¦‚<code>D:\code\tsconfig-path-test\src\components</code>ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="runinit">runInit<a class="hash-link" href="#runinit" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p><code>runInit</code>æ–¹æ³•è´Ÿè´£ç”Ÿæˆ<code>components</code>ï¼Œ<code>utils</code>ç­‰ç›®å½•ï¼Œä»¥åŠæ›¿æ¢<code>tailwind.config.ts</code>é…ç½®ï¼Œå¹¶å®‰è£… shadcn ui éœ€è¦çš„ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ä¾èµ–<code>tailwindcss-animate</code>ï¼Œ<code>class-variance-authority</code>ï¼Œ<code>clsx</code>ç­‰ã€‚</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">runInit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token operator">:</span><span class="token plain"> Config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç”Ÿæˆ componentsï¼Œutils ç›®å½•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> resolvedPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">of</span><span class="token plain"> Object</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">entries</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">resolvedPaths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> dirname </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">extname</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">resolvedPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token operator">?</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">dirname</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">resolvedPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token operator">:</span><span class="token plain"> resolvedPath</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">!</span><span class="token function" style="color:rgb(80, 250, 123)">existsSync</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dirname</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dirname</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> recursive</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> extension </span><span class="token operator">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tsx </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"ts"</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"js"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> tailwindConfigExtension </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">extname</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">resolvedPaths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tailwindConfig</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> tailwindConfigTemplate</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">tailwindConfigExtension </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">".ts"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    tailwindConfigTemplate </span><span class="token operator">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tailwind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">cssVariables</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token operator">?</span><span class="token plain"> templates</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">TAILWIND_CONFIG_TS_WITH_VARIABLES</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token operator">:</span><span class="token plain"> templates</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">TAILWIND_CONFIG_TS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    tailwindConfigTemplate </span><span class="token operator">=</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tailwind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">cssVariables</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token operator">?</span><span class="token plain"> templates</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">TAILWIND_CONFIG_WITH_VARIABLES</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token operator">:</span><span class="token plain"> templates</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">TAILWIND_CONFIG</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ä½¿ç”¨lodashçš„templateæ–¹æ³•å¾€tailwind.configé‡Œå†™å…¥ä¸€äº›é…ç½®é¡¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">writeFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">resolvedPaths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tailwindConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">tailwindConfigTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      extension</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      prefix</span><span class="token operator">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tailwind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">prefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"utf8"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ä»https://ui.shadcn.com/registry/colors/[baseColor].jsonè·å–ä¸»é¢˜è‰²é…ç½®æ–‡ä»¶ï¼Œå†™å…¥åˆ°tailwind å…¨å±€ css æ–‡ä»¶é‡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> baseColor </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getRegistryBaseColor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tailwind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">baseColor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">baseColor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">writeFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">resolvedPaths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tailwindCss</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tailwind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">cssVariables</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token operator">?</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tailwind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">prefix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token operator">?</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">applyPrefixesCss</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">baseColor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">cssVarsTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tailwind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">prefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token operator">:</span><span class="token plain"> baseColor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">cssVarsTemplate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token operator">:</span><span class="token plain"> baseColor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">inlineColorsTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">"utf8"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç”Ÿæˆ utils.cn æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">writeFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">config</span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token template-string interpolation">resolvedPaths</span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token template-string interpolation">utils</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)">.</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">extension</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    extension </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"ts"</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> templates</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">UTILS</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> templates</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">UTILS_JS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"utf8"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å®‰è£…ä¾èµ–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> dependenciesSpinner </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ora</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">Installing dependencies...</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">?.</span><span class="token function" style="color:rgb(80, 250, 123)">start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> packageManager </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getPackageManager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> deps </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">...</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">"tailwindcss-animate"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">"class-variance-authority"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">"clsx"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">"tailwind-merge"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">style </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"new-york"</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"@radix-ui/react-icons"</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"lucide-react"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">execa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    packageManager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">packageManager </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"npm"</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"install"</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"add"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">...</span><span class="token plain">deps</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  dependenciesSpinner</span><span class="token operator">?.</span><span class="token function" style="color:rgb(80, 250, 123)">succeed</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="getpackagemanager">getPackageManager<a class="hash-link" href="#getpackagemanager" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p><code>getPackageManager</code>æ–¹æ³•è·å–é¡¹ç›®ä½¿ç”¨çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œè¿™ä¸ªæ–¹æ³•éå¸¸å®ç”¨ï¼Œä¸‡èƒ½ï¼</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> execa </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"execa"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> detect </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"@antfu/ni"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> packageManager </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getPackageManager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// æ‰§è¡Œ install å®‰è£…ä¾èµ–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">execa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  packageManager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">packageManager </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"npm"</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"install"</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"add"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">...</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"tailwindcss-animate"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"class-variance-authority"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"clsx"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"tailwind-merge"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">style </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"new-york"</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"@radix-ui/react-icons"</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"lucide-react"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// æ£€æµ‹å½“å‰ä½¿ç”¨çš„ npm package ç®¡ç†å·¥å…·</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getPackageManager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  targetDir</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Promise</span><span class="token operator">&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">"yarn"</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"pnpm"</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"bun"</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"npm"</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> packageManager </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">detect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> programmatic</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> cwd</span><span class="token operator">:</span><span class="token plain"> targetDir </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">packageManager </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"yarn@berry"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"yarn"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">packageManager </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"pnpm@6"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"pnpm"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">packageManager </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"bun"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"bun"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> packageManager </span><span class="token operator">??</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"npm"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="add">add<a class="hash-link" href="#add" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>add</code>å‘½ä»¤çš„å®ç°ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå…¶ä¸»è¦å®ç°éƒ¨åˆ†çš„æºç å¦‚ä¸‹ï¼Œå¯æ‹†è§£ä¸ºä»¥ä¸‹å››æ­¥ï¼š</p><ol><li>ä½¿ç”¨<code>getRegistryIndex</code>è·å– shadcn æ³¨å†Œæ”¯æŒçš„æ‰€æœ‰ç»„ä»¶åŠå…¶ä¾èµ–ï¼›</li><li>ä½¿ç”¨<code>resolveTree</code>è§£æç”¨æˆ·æ·»åŠ çš„ç»„ä»¶ï¼ŒåŠå…¶ä¾èµ–çš„å…¶ä»–å†…éƒ¨ç»„ä»¶ï¼›</li><li>é€šè¿‡<code>fetchTree</code>æ‹‰å–ç»„ä»¶æºç ï¼›</li><li>ä½¿ç”¨<code>transform</code>è½¬æ¢ç»„ä»¶æºç å¹¶ç”Ÿæˆæ–‡ä»¶</li></ol><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> add </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Command</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"add"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">argument</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"[components...]"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"the components to add"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">option</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"-y, --yes"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"skip confirmation prompt."</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">option</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"-o, --overwrite"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"overwrite existing files."</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">option</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"-c, --cwd &lt;cwd&gt;"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"the working directory. defaults to the current directory."</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">option</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"-a, --all"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"add all available components"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">option</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"-p, --path &lt;path&gt;"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"the path to add the component to."</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">action</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">components</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> opts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ ¡éªŒå‘½ä»¤è¡Œå‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> options </span><span class="token operator">=</span><span class="token plain"> addOptionsSchema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">parse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        components</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token operator">...</span><span class="token plain">opts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// è·å–é¡¹ç›®æ ¹ç›®å½•ç»å¯¹è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> cwd </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// è¯»å–é¡¹ç›®æ ¹ç›®å½•çš„é…ç½®æ–‡ä»¶ components.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> config </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// é»˜è®¤ä» https://ui.shadcn.com/registry/index.json è·å–æ³¨å†Œç»„ä»¶åˆ—è¡¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> registryIndex </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getRegistryIndex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> selectedComponents </span><span class="token operator">=</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">all</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token operator">?</span><span class="token plain"> registryIndex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">entry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> entry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token operator">:</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">components</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// è·å–æ‰€æœ‰è¦æ·»åŠ çš„ç»„ä»¶ä¿¡æ¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> tree </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">resolveTree</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">registryIndex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> selectedComponents</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// è·å–ç»„ä»¶æºç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> payload </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fetchTree</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">style</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tree</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> baseColor </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getRegistryBaseColor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tailwind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">baseColor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç”Ÿæˆç»„ä»¶ä»£ç æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> spinner </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ora</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">Installing components...</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> item </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">of</span><span class="token plain"> payload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> targetDir </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getItemTargetPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          item</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">path </span><span class="token operator">?</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">undefined</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> file </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">of</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">files</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> filePath </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">targetDir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¯¹ç»„ä»¶æºç å†…éƒ¨ import è·¯å¾„ç­‰è¿›è¡ŒASTè§£æå¹¶æ›¿æ¢</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> content </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">transform</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            filename</span><span class="token operator">:</span><span class="token plain"> file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            raw</span><span class="token operator">:</span><span class="token plain"> file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">content</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            baseColor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">writeFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">filePath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> content</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// å®‰è£…ç»„ä»¶ä¾èµ–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> packageManager </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getPackageManager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// å®‰è£…ä¾èµ–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">item</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">dependencies</span><span class="token operator">?.</span><span class="token plain">length</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">execa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            packageManager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              packageManager </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"npm"</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"install"</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"add"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token operator">...</span><span class="token plain">item</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">dependencies</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      spinner</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">succeed</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">Done.</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token function" style="color:rgb(80, 250, 123)">handleError</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="getregistryindex">getRegistryIndex<a class="hash-link" href="#getregistryindex" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p><code>getRegistryIndex</code>ä¼šé»˜è®¤ä»è¿œç«¯åœ°å€â€”â€”<a href="https://ui.shadcn.com/registry/index.json%E5%8A%A0%E8%BD%BD%E4%B8%80%E4%B8%AA%E7%BB%84%E4%BB%B6%60json%60%EF%BC%8C%E8%BF%99%E4%B8%AA%60json%60%E5%8C%85%E5%90%AB%E4%BA%86" target="_blank" rel="noopener noreferrer">https://ui.shadcn.com/registry/index.jsonåŠ è½½ä¸€ä¸ªç»„ä»¶`json`ï¼Œè¿™ä¸ª`json`åŒ…å«äº†</a> shadcn ui æ‰€æœ‰æ”¯æŒçš„ç»„ä»¶ä¿¡æ¯ã€‚</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> registryIndex </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getRegistryIndex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">getRegistryIndex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fetchRegistry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"index.json"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> registryIndexSchema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">parse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">Failed to fetch components from registry.</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¾‹å¦‚æˆ‘ä»¬æ·»åŠ çš„<code>button</code>ç»„ä»¶çš„ä¿¡æ¯å¦‚ä¸‹ï¼š</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">"name"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"button"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">"dependencies"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token string" style="color:rgb(255, 121, 198)">"@radix-ui/react-slot"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">"files"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token string" style="color:rgb(255, 121, 198)">"ui/button.tsx"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">"type"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"components:ui"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>json</code>çš„<code>schema</code>æè¿°å¦‚ä¸‹ï¼Œä»ä»£ç çš„ TODO æ³¨é‡Šå¯ä»¥çœ‹å‡º shadcn çš„ç»´æŠ¤è€…æœ‰æ„å°†è¯¥éƒ¨åˆ†æ³¨å†Œç»„ä»¶çš„ schema å…±äº«å‡ºå»ï¼Œåº”è¯¥æ˜¯ä¸ºäº†æ›´æ–¹ä¾¿ç»„ä»¶åº“çš„ç»´æŠ¤è€…ä½¿ç”¨ã€‚</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// TODO: æå–ä¸ºä¸€ä¸ª package</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> registryItemSchema </span><span class="token operator">=</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">object</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name</span><span class="token operator">:</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç»„ä»¶åç§°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  dependencies</span><span class="token operator">:</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">array</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">optional</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç»„ä»¶ä¾èµ–çš„ç¬¬ä¸‰æ–¹ package</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  devDependencies</span><span class="token operator">:</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">array</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">optional</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç»„ä»¶å¼€å‘ä¾èµ–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  registryDependencies</span><span class="token operator">:</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">array</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">optional</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç»„ä»¶ä¾èµ–çš„å…¶ä»– shadcn ui å†…éƒ¨çš„ç»„ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  files</span><span class="token operator">:</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">array</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç»„ä»¶åŒ…å«çš„æ–‡ä»¶åˆ—è¡¨ï¼Œç›¸å¯¹è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  type</span><span class="token operator">:</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">enum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"components:ui"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"components:component"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"components:example"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç»„ä»¶ç±»å‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> registryIndexSchema </span><span class="token operator">=</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">array</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">registryItemSchema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resolvetree">resolveTree<a class="hash-link" href="#resolvetree" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>åœ¨è·å–åˆ°è¿œç«¯æ³¨å†Œçš„æ‰€æœ‰ shadcn ui å†…éƒ¨ç»„ä»¶çš„ä¿¡æ¯åï¼Œ<code>resolveTree</code>ä¼šå¯¹ç”¨æˆ·é€‰æ‹©æ·»åŠ çš„ç»„ä»¶è¿›è¡Œä¾èµ–è§£æï¼Œå¾—åˆ°æ‰€æœ‰éœ€è¦æ·»åŠ åˆ°é¡¹ç›®å†…éƒ¨çš„ç»„ä»¶ä¿¡æ¯ã€‚</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> tree </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">resolveTree</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">registryIndex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> selectedComponents</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * è§£æç»„ä»¶ä¾èµ–å…³ç³»ï¼Œå¾—åˆ°æ‰€æœ‰éœ€è¦æ·»åŠ åˆ°é¡¹ç›®å†…éƒ¨çš„ç»„ä»¶ä¿¡æ¯</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * @param index æ‰€æœ‰æ³¨å†Œçš„ç»„ä»¶ä¿¡æ¯</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * @param names ç”¨æˆ·é€‰æ‹©æ·»åŠ çš„ç»„ä»¶</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">resolveTree</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  index</span><span class="token operator">:</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">infer</span><span class="token operator">&lt;</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typeof</span><span class="token plain"> registryIndexSchema</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  names</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> tree</span><span class="token operator">:</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">infer</span><span class="token operator">&lt;</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typeof</span><span class="token plain"> registryIndexSchema</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> name </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">of</span><span class="token plain"> names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> entry </span><span class="token operator">=</span><span class="token plain"> index</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">find</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">entry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> entry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">name </span><span class="token operator">===</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">!</span><span class="token plain">entry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">continue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç”¨æˆ·æ·»åŠ çš„ç»„ä»¶æœ¬èº«</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    tree</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">entry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ·»åŠ çš„ç»„ä»¶æ‰€ä¾èµ–çš„ shadcn ui å†…éƒ¨çš„ç»„ä»¶ä¹Ÿéœ€è¦è¢«æ·»åŠ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">entry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">registryDependencies</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> dependencies </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">resolveTree</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">index</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> entry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">registryDependencies</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      tree</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">...</span><span class="token plain">dependencies</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// è¿‡æ»¤ä¸åŒç»„ä»¶ä¹‹é—´ä¾èµ–çš„ç›¸åŒçš„ç»„ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> tree</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">filter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">component</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> index</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      self</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">findIndex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">c</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">name </span><span class="token operator">===</span><span class="token plain"> component</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> index</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fetchtree">fetchTree<a class="hash-link" href="#fetchtree" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>åœ¨è·å–æ‰€æœ‰è¦æ·»åŠ çš„ç»„ä»¶åï¼Œä½¿ç”¨<code>fetchTree</code>ä»è¿œç«¯åŠ è½½å…¶æºç ã€‚</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> payload </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fetchTree</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">style</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tree</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * åŠ è½½ç»„ä»¶æºç </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * @param style components.json æŒ‡å®šçš„ style</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * @param tree ç”¨æˆ·é€‰æ‹©æ·»åŠ çš„ç»„ä»¶</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fetchTree</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  style</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  tree</span><span class="token operator">:</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">infer</span><span class="token operator">&lt;</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typeof</span><span class="token plain"> registryIndexSchema</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> paths </span><span class="token operator">=</span><span class="token plain"> tree</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">item</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">styles/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">style</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)">/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">item</span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)">.json</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> result </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fetchRegistry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> registryWithContentSchema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">parse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">Failed to fetch tree from registry.</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¾‹å¦‚<code>button</code>ç»„ä»¶ï¼Œä»<code>https://ui.shadcn.com/registry/styles/default/button.json</code>è·å–åˆ°å…¶æºç ä¿¡æ¯ä¸ºï¼š</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"name"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"button"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"dependencies"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">"@radix-ui/react-slot"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"files"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">"name"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"button.tsx"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">"content"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes&lt;HTMLButtonElement&gt;,\n    VariantProps&lt;typeof buttonVariants&gt; {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef&lt;HTMLButtonElement, ButtonProps&gt;(\n  ({ className, variant, size, asChild = false, ...props }, ref) =&gt; {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      &lt;Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      /&gt;\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"type"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"components:ui"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="transform">transform<a class="hash-link" href="#transform" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>åœ¨å¾—åˆ°ç»„ä»¶æºç ä»¥åï¼Œä»<code>components.json</code>ä¸­è§£æé…ç½®é¡¹<code>aliases.components</code>ï¼Œå¾—åˆ°é¡¹ç›®å­˜æ”¾ç»„ä»¶çš„ç›®å½•è·¯å¾„ï¼Œç„¶åä½¿ç”¨<code>transform</code>æ–¹æ³•å¯¹ç»„ä»¶æºç è¿›è¡Œè§£æï¼Œå¹¶æœ€ç»ˆç”Ÿæˆç»„ä»¶æ–‡ä»¶ã€‚</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> item </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">of</span><span class="token plain"> payload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> file </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">of</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">files</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> filePath </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">targetDir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Run transformers.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> content </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">transform</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      filename</span><span class="token operator">:</span><span class="token plain"> file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      raw</span><span class="token operator">:</span><span class="token plain"> file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">content</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      baseColor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">!</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tsx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      filePath </span><span class="token operator">=</span><span class="token plain"> filePath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">replace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.tsx$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">".jsx"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      filePath </span><span class="token operator">=</span><span class="token plain"> filePath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">replace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.ts$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">".js"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">writeFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">filePath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> content</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>transform</code>æ–¹æ³•å†…éƒ¨ä½¿ç”¨äº†<code>ts-morph</code>å¯¹ç»„ä»¶æºç è¿›è¡ŒASTè§£æï¼Œå¹¶æ ¹æ®<code>components</code>æŒ‡å®šçš„é…ç½®å¯¹ç»„ä»¶æºç ä¸­<code>import</code>è·¯å¾„ï¼ŒCSS å˜é‡ï¼Œtailwind prefix è¿›è¡Œæ›¿æ¢ï¼Œä»¥åŒ¹é…å½“å‰é¡¹ç›®ã€‚</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> promises </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> fs </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"fs"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> tmpdir </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"os"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> Project</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> ScriptKind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token class-name">SourceFile</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"ts-morph"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// åˆ›å»º project å®ä¾‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> project </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Project</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  compilerOptions</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// ä½¿ç”¨ ts-morph å®šä¹‰çš„ AST è½¬æ¢æ–¹æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> transformers</span><span class="token operator">:</span><span class="token plain"> Transformer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  transformImport</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  transformRsc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  transformCssVars</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  transformTwPrefixes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// åˆ›å»ºä¸´æ—¶æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">createTempSourceFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">filename</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// tmpdir ä½¿ç”¨ç³»ç»Ÿçš„ä¸´æ—¶æ–‡ä»¶ç›®å½•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> dir </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">mkdtemp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">tmpdir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"shadcn-"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> filename</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">transform</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">opts</span><span class="token operator">:</span><span class="token plain"> TransformOpts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> tempFile </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">createTempSourceFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">opts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">filename</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ä½¿ç”¨ project.createSourceFile æ ¹æ®æºç åˆ›å»º tsx æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> sourceFile </span><span class="token operator">=</span><span class="token plain"> project</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">createSourceFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">tempFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> opts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">raw</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    scriptKind</span><span class="token operator">:</span><span class="token plain"> ScriptKind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">TSX</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¯¹importè·¯å¾„ï¼ŒCSS å˜é‡ï¼Œtailwind prefix</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> transformer </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">of</span><span class="token plain"> transformers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">transformer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> sourceFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">...</span><span class="token plain">opts </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">transformJsx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sourceFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">...</span><span class="token plain">opts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="diff">diff<a class="hash-link" href="#diff" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>diff</code>å‘½ä»¤å†…éƒ¨ä¸»è¦ä½¿ç”¨äº†<a href="https://github.com/kpdecker/jsdiff" target="_blank" rel="noopener noreferrer"><code>diff</code></a>å¯¹é¡¹ç›®çš„ç»„ä»¶ä»£ç å’Œè¿œç«¯ç»„ä»¶ä»£ç è¿›è¡Œå¯¹æ¯”ï¼Œç„¶åè¾“å‡ºåˆ° shell å†…ï¼Œå…·ä½“å®ç°å°±ä¸ç»†è¯´äº†ï¼Œæ¯”è¾ƒç®€å•ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç»„ä»¶çš„æ³¨å†Œ">ç»„ä»¶çš„æ³¨å†Œ<a class="hash-link" href="#ç»„ä»¶çš„æ³¨å†Œ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æœ€åè®²ä¸€ä¸‹ shadcn ui ç»„ä»¶çš„æ³¨å†Œæ–¹æ³•ï¼Œåœ¨ä¸Šæ–‡å¯¹<code>add</code>å’Œ<code>init</code>å‘½ä»¤çš„è§£æä¸­ï¼Œå¯ä»¥çœ‹åˆ°ç»å¸¸ä½¿ç”¨<code>fetchRegistry</code>è¿™ä¸ªæ–¹æ³•è·å–è¿œç«¯<code>json</code>æ–‡ä»¶ï¼Œè€Œå…¶é»˜è®¤åœ°å€å°±æ˜¯ shadcn ui å®˜ç½‘çš„åœ°å€<code>https://ui.shadcn.com/</code>ï¼Œæ‰€ä»¥è¿™é‡Œå°±å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼Œç»„ä»¶æ³¨å†Œçš„<code>index.json</code>ï¼Œä»¥åŠä¸»é¢˜ä¿¡æ¯<code>style.json</code>ç­‰ä¿¡æ¯ç»´æŠ¤åœ¨ç½‘ç«™ç›®å½•ä¸‹ï¼Œä¹Ÿå°±æ˜¯ shadcn é¡¹ç›® monorepo å†…éƒ¨çš„<code>apps\www</code>ç›®å½•ã€‚</p><p>åœ¨<code>apps/www</code>ç›®å½•ä¸‹çš„<code>package.json</code>ä¸­å¯ä»¥æ‰¾åˆ°ä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token property">"scripts"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"build"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"contentlayer build &amp;&amp; pnpm build:registry &amp;&amp; next build"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"build:registry"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"tsx --tsconfig ./tsconfig.scripts.json ./scripts/build-registry.mts &amp;&amp; prettier --loglevel silent --write \"registry/**/*.{ts,tsx,mdx}\" --cache"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…¶ä¸­<code>build:registry</code>ä¼šä½¿ç”¨<a href="https://github.com/privatenumber/tsx" target="_blank" rel="noopener noreferrer"><code>tsx</code></a>æ‰§è¡Œ<code>./scripts/build-registry.mts</code>è¿™ä¸ªæ–‡ä»¶ï¼Œå…¶å†…éƒ¨æ‰§è¡Œä»¥ä¸‹è¿™æ®µä»£ç ï¼š</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> blocks </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"@/registry/blocks"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> examples </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"@/registry/examples"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> Registry </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"@/registry/schema"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> ui </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"@/registry/ui"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> registry</span><span class="token operator">:</span><span class="token plain"> Registry </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token operator">...</span><span class="token plain">ui</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">...</span><span class="token plain">examples</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token operator">...</span><span class="token plain">blocks</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// safeParse æ–¹æ³•ç›¸æ¯” parse æ–¹æ³•åœ¨éªŒè¯å¤±è´¥æ—¶ä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå…¶è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒåŒ…å«ä¸¤ä¸ªå±æ€§ï¼šsuccess å’Œ data æˆ– error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> result </span><span class="token operator">=</span><span class="token plain"> registrySchema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">safeParse</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">registry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">!</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">success</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token builtin" style="color:rgb(189, 147, 249)">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">exit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">buildRegistry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">buildStyles</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">buildThemes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token builtin" style="color:rgb(189, 147, 249)">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"âœ… Done!"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token builtin" style="color:rgb(189, 147, 249)">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">exit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å…¶ä¸­<code>@/registry/ui</code>ç»´æŠ¤çš„å°±æ˜¯æ‰€æœ‰ç»„ä»¶çš„ä¿¡æ¯ï¼š</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> Registry </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"@/registry/schema"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> ui</span><span class="token operator">:</span><span class="token plain"> Registry </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"accordion"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"components:ui"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    dependencies</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"@radix-ui/react-accordion"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    files</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"ui/accordion.tsx"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œ<code>buildRegistry</code>ä¼šæ ¹æ®<code>@/registry/ui</code>ç”Ÿæˆ<code>registry/index.json</code>æ–‡ä»¶ã€‚</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">REGISTRY_PATH</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"public/registry"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">buildRegistry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">registry</span><span class="token operator">:</span><span class="token plain"> Registry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> project </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Project</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    compilerOptions</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">createTempSourceFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">filename</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> dir </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">mkdtemp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">tmpdir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"shadcn-"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> filename</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ----------------------------------------------------------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// Build registry/index.json.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ----------------------------------------------------------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> names </span><span class="token operator">=</span><span class="token plain"> registry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">filter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">item</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">type </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"components:ui"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> registryJson </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">JSON</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">stringify</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  rimraf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">sync</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token constant" style="color:rgb(189, 147, 249)">REGISTRY_PATH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"index.json"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">writeFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token constant" style="color:rgb(189, 147, 249)">REGISTRY_PATH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"index.json"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    registryJson</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"utf8"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œ<code>buildStyles</code>ä¼šç”ŸæˆåŒ…å«ç»„ä»¶æºç çš„<code>registry/styles/[style]/[name].json</code>æ–‡ä»¶ï¼Œè¿™äº›ç”Ÿæˆçš„ json æ–‡ä»¶æ”¾åœ¨<code>public</code>ç›®å½•ä¸‹ï¼Œåœ¨ç½‘ç«™éƒ¨ç½²çš„æ—¶å€™<code>public</code>ç›®å½•çš„æ–‡ä»¶éƒ½ä¼šæ‹·è´åˆ°ç½‘ç«™éƒ¨ç½²çš„æ ¹ç›®å½•ä¸‹ï¼Œæ‰€ä»¥åç»­å°±èƒ½é€šè¿‡<code>åŸŸå+[jsonæ–‡ä»¶è·¯å¾„]</code>çš„åœ°å€åŠ è½½è¿™äº› json æ–‡ä»¶ã€‚</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// ----------------------------------------------------------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Build registry/styles/[style]/[name].json.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// ----------------------------------------------------------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">buildStyles</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">registry</span><span class="token operator">:</span><span class="token plain"> Registry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> style </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">of</span><span class="token plain"> styles</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> targetPath </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token constant" style="color:rgb(189, 147, 249)">REGISTRY_PATH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"styles"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> style</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> item </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">of</span><span class="token plain"> registry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">item</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">type </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"components:ui"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">continue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> files </span><span class="token operator">=</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">files</span><span class="token operator">?.</span><span class="token function" style="color:rgb(80, 250, 123)">map</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// // å¯¹åº” apps\www\registry ä¸‹ç»„ä»¶ä»£ç è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> content </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">readFileSync</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"registry"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> style</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token string" style="color:rgb(255, 121, 198)">"utf8"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">basename</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          content</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> payload </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token operator">...</span><span class="token plain">item</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        files</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">writeFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">targetPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">item</span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)">.json</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token constant" style="color:rgb(189, 147, 249)">JSON</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">stringify</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">payload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">"utf8"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="shadcn-ç”¨åˆ°çš„ä¸€äº›-nodejs-å·¥å…·">shadcn ç”¨åˆ°çš„ä¸€äº› nodejs å·¥å…·<a class="hash-link" href="#shadcn-ç”¨åˆ°çš„ä¸€äº›-nodejs-å·¥å…·" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="commander">commander<a class="hash-link" href="#commander" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ³¨å†Œ nodejs cli å‘½ä»¤ä»¥åŠ cli å‚æ•°ï¼Œä»¥åŠè·å– cli è¾“å…¥ï¼Œæ‰§è¡Œæ“ä½œç­‰ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="prompts">prompts<a class="hash-link" href="#prompts" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>cli è¾“å…¥äº¤äº’</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="zod">zod<a class="hash-link" href="#zod" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>zod</code> æ˜¯ä¸€ä¸ªç”¨äº TypeScript å’Œ JavaScript çš„æ•°æ®éªŒè¯åº“ã€‚å®ƒå…è®¸å¼€å‘è€…å®šä¹‰ä¸€ä¸ªæ¨¡å¼ï¼ˆschemaï¼‰ï¼Œè¿™ä¸ªæ¨¡å¼æè¿°äº†æ•°æ®åº”è¯¥å¦‚ä½•ç»“æ„åŒ–ï¼Œä»¥åŠæ¯ä¸ªå­—æ®µçš„ç±»å‹æ˜¯ä»€ä¹ˆã€‚å¯ä»¥åœ¨ node å’Œ web ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cosmiconfig">cosmiconfig<a class="hash-link" href="#cosmiconfig" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æŸ¥æ‰¾æˆ–è¯»å–<code>json</code>ï¼Œ<code>yml</code>ç­‰é…ç½®æ–‡ä»¶</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tsconfig-paths">tsconfig-paths<a class="hash-link" href="#tsconfig-paths" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è§£æ<code>tsconfig.json</code>ä¸­å®šä¹‰çš„<code>paths</code>çš„æ¨¡å—è·¯å¾„ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="chalk">chalk<a class="hash-link" href="#chalk" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>cli æ‰“å°é¢œè‰²æ–‡å­—</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ora">ora<a class="hash-link" href="#ora" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>cli loading äº¤äº’æ•ˆæœ</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="node-fetch">node-fetch<a class="hash-link" href="#node-fetch" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>nodejs ä¸­ä½¿ç”¨ fetch</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tsx">tsx<a class="hash-link" href="#tsx" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ”¯æŒç›´æ¥åœ¨ node å‘½ä»¤è¡Œä¸­æ‰§è¡Œ typescript æ–‡ä»¶ã€‚</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[TypeScriptå…¨å±€ç±»å‹å®šä¹‰çš„æ–¹å¼]]></title>
            <link>https://icodex.me/ts-global-defination</link>
            <guid>/ts-global-defination</guid>
            <pubDate>Mon, 01 Apr 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[TypeScript å…¨å±€ç±»å‹å®šä¹‰æˆ–è€…è¦†ç›–åœ¨æ—¥å¸¸å¼€å‘ä¸­ç»å¸¸ä½¿ç”¨ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»å‡ ç§å¸¸è§çš„æ–¹å¼ã€‚]]></description>
            <content:encoded><![CDATA[<p>TypeScript å…¨å±€ç±»å‹å®šä¹‰æˆ–è€…è¦†ç›–åœ¨æ—¥å¸¸å¼€å‘ä¸­ç»å¸¸ä½¿ç”¨ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»å‡ ç§å¸¸è§çš„æ–¹å¼ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä½¿ç”¨declare-globalå‘½åç©ºé—´">ä½¿ç”¨declare globalå‘½åç©ºé—´<a class="hash-link" href="#ä½¿ç”¨declare-globalå‘½åç©ºé—´" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨åŒ…å«åœ¨ TypeScript ç±»å‹æ£€æµ‹æ–‡ä»¶ç›®å½•å†…çš„ä»»æ„ä½ç½®æ–°å»º<code>xxx.d.ts</code>æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨<code>declare global</code>å…¨å±€å‘½åç©ºé—´è¯­æ³•æ¥å®šä¹‰è¦†ç›–ç±»å‹ï¼Œä¾‹å¦‚ï¼š</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">declare</span><span class="token plain"> global </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">/*~</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   *~ å®šä¹‰ String ç±»å‹å®ä¾‹ä¸Šçš„æ–¹æ³•</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">fancyFormat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/* æ–‡ä»¶å†…å¿…é¡»åŒ…å«ä¸€ä¸ª export è¯­å¥ */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>declare global</code>å®šä¹‰ä¸€äº›å…¨å±€å˜é‡ï¼Œå…¨å±€ç±»å‹ï¼Œå…¨å±€æ–¹æ³•ç­‰ï¼š</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">declare</span><span class="token plain"> global </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> timeout</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> version</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">checkCat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">c</span><span class="token operator">:</span><span class="token plain"> Cat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> s</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> VetID</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">Cat</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">constructor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">n</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">readonly</span><span class="token plain"> age</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">purr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">CatSettings</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    weight</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    tailLength</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">/*~</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   *~ å®šä¹‰ Window å®ä¾‹ä¸Šçš„å±æ€§æˆ–è€…æ–¹æ³•</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">Window</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    a</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    myFn</span><span class="token operator">:</span><span class="token plain"> VoidFunction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span><mdxadmonitiontitle>[æ³¨æ„]</mdxadmonitiontitle></div><div class="admonitionContent_S0QG"><p>ä½¿ç”¨<code>declare global</code>å®šä¹‰å…¨å±€ç±»å‹æ—¶ï¼Œè¯¥æ–‡ä»¶å†…éƒ¨å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ª<code>export</code>è¯­å¥ï¼</p></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä½¿ç”¨declare-moduleå‘½åç©ºé—´">ä½¿ç”¨declare moduleå‘½åç©ºé—´<a class="hash-link" href="#ä½¿ç”¨declare-moduleå‘½åç©ºé—´" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¦‚æœè¦å¯¹ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„åŒ…è¦†ç›–å…¶ç±»å‹å®šä¹‰ï¼Œå¯ä»¥ä½¿ç”¨<code>import &lt;module&gt;</code>å’Œ<code>declare module</code>è¯­æ³•ï¼Œä¾‹å¦‚è¦†ç›–<code>axios</code>çš„ç±»å‹å®šä¹‰ã€‚</p><p><code>axios</code>åœ¨å…¶å®ä¾‹æ–¹æ³•ä¸Šå®šä¹‰çš„ç±»å‹å­˜åœ¨ä¸€ä¸ªæ— ç”¨çš„æ³›å‹å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°åœ¨ä½¿ç”¨<code>get</code>ã€<code>post</code>ç­‰æ–¹æ³•æ—¶å¿…é¡»è¦ä¼ ï¼Œç»™å¼€å‘å¸¦æ¥äº†ä¸€äº›ä¸ä¾¿ï¼›åŒæ—¶é¡¹ç›®è‡ªèº«å¯èƒ½ä¼šå¯¹<code>axios</code>è¿›è¡Œå°è£…ï¼Œæ·»åŠ ä¸€äº›é¢å¤–çš„<code>config</code>å‚æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ä¸­é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥å…¨å±€è¦†ç›–<code>axios</code>è‡ªèº«çš„ç±»å‹å®šä¹‰ï¼š</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">/*  */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> axios </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'axios'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * è¦†ç›– AxiosRequestConfig</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">declare</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">module</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'axios'</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   * è‡ªå®šä¹‰é…ç½®å‚æ•°</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">AxiosRequestConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * å³æ—¶æ›´æ–°</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    useTimeStamp</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://github.com/axios/axios/issues/1510#issuecomment-525382535</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">AxiosInstance</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token generic-function function" style="color:rgb(80, 250, 123)">request</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name constant" style="color:rgb(189, 147, 249)">T</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name operator">=</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin" style="color:rgb(189, 147, 249)">any</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token operator">:</span><span class="token plain"> AxiosRequestConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Promise</span><span class="token operator">&lt;</span><span class="token constant" style="color:rgb(189, 147, 249)">T</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token generic-function function" style="color:rgb(80, 250, 123)">get</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name constant" style="color:rgb(189, 147, 249)">T</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name operator">=</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin" style="color:rgb(189, 147, 249)">any</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> AxiosRequestConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Promise</span><span class="token operator">&lt;</span><span class="token constant" style="color:rgb(189, 147, 249)">T</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">delete</span><span class="token operator">&lt;</span><span class="token constant" style="color:rgb(189, 147, 249)">T</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">any</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> AxiosRequestConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Promise</span><span class="token operator">&lt;</span><span class="token constant" style="color:rgb(189, 147, 249)">T</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token generic-function function" style="color:rgb(80, 250, 123)">head</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name constant" style="color:rgb(189, 147, 249)">T</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name operator">=</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin" style="color:rgb(189, 147, 249)">any</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> AxiosRequestConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Promise</span><span class="token operator">&lt;</span><span class="token constant" style="color:rgb(189, 147, 249)">T</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token generic-function function" style="color:rgb(80, 250, 123)">post</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name constant" style="color:rgb(189, 147, 249)">T</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name operator">=</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin" style="color:rgb(189, 147, 249)">any</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> data</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> AxiosRequestConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Promise</span><span class="token operator">&lt;</span><span class="token constant" style="color:rgb(189, 147, 249)">T</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token generic-function function" style="color:rgb(80, 250, 123)">put</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name constant" style="color:rgb(189, 147, 249)">T</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name operator">=</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin" style="color:rgb(189, 147, 249)">any</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> data</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> AxiosRequestConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Promise</span><span class="token operator">&lt;</span><span class="token constant" style="color:rgb(189, 147, 249)">T</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token generic-function function" style="color:rgb(80, 250, 123)">patch</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name constant" style="color:rgb(189, 147, 249)">T</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name operator">=</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin" style="color:rgb(189, 147, 249)">any</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> data</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> AxiosRequestConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Promise</span><span class="token operator">&lt;</span><span class="token constant" style="color:rgb(189, 147, 249)">T</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä½¿ç”¨å…¨å±€æ¨¡å—ç±»å‹å£°æ˜">ä½¿ç”¨å…¨å±€æ¨¡å—ç±»å‹å£°æ˜<a class="hash-link" href="#ä½¿ç”¨å…¨å±€æ¨¡å—ç±»å‹å£°æ˜" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨åŒ…å«åœ¨ TypeScript ç±»å‹æ£€æµ‹æ–‡ä»¶ç›®å½•å†…çš„ä»»æ„ä½ç½®æ–°å»º<code>xxx.d.ts</code>æ–‡ä»¶ï¼Œå†…éƒ¨å¯ä»¥éšæ„å®šä¹‰ä»»ä½•ç±»å‹ï¼Œä½†æ˜¯ä¸èƒ½åŒ…å«ä»»ä½•<code>export</code>å’Œ<code>import</code>è¯­å¥ï¼Œä¾‹å¦‚ï¼š</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">/*~ </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> *~ å…¨å±€å‡½æ•°</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">declare</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">myLib</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">a</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">declare</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">myLib</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">a</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/*~ </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> *~ å…¨å±€ç±»å‹</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">Person</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  age</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/*~ </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> *~ å…¨å±€å¯¹è±¡</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">declare</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">namespace</span><span class="token plain"> myLib </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">/*~ </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   *~ myLib.version</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> version</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">/*~ </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   *~ new myLib.Cat();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">Cat</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">constructor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">n</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">readonly</span><span class="token plain"> age</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">purr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">/*~ </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   *~ const a: myLib.CatSettings = { weight: 5, name: "Maru" };</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">CatSettings</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    weight</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    tailLength</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">/*~ </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   *~ myLib.checkCat(c, v);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">checkCat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">c</span><span class="token operator">:</span><span class="token plain"> Cat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> s</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> VetID</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¹Ÿå¯ä»¥ç›´æ¥å®šä¹‰<code>Window</code>ä¸Šçš„å˜é‡ã€æ–¹æ³•ç­‰ã€‚</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">Window</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  a</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  myFn</span><span class="token operator">:</span><span class="token plain"> VoidFunction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[IntersectionObserver API ç”¨æ³•]]></title>
            <link>https://icodex.me/intersection</link>
            <guid>/intersection</guid>
            <pubDate>Sat, 29 Oct 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[å½“æˆ‘ä»¬è¯´åˆ°å›¾ç‰‡æ‡’åŠ è½½ã€é¡µé¢æ•°æ®çš„æ»šåŠ¨åŠ è½½è¿™äº›ä½“éªŒè®¾è®¡æ—¶ï¼Œä¸€èˆ¬èƒ½å¤Ÿæƒ³åˆ°åŸºäºscrolläº‹ä»¶ï¼Œé€šè¿‡getBoundingClientRectæ–¹æ³•è·å–å…ƒç´ ç›¸å¯¹äºè§†å£åç§»é‡topï¼Œæ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§ï¼Œdemo å¦‚ä¸‹]]></description>
            <content:encoded><![CDATA[<p>å½“æˆ‘ä»¬è¯´åˆ°å›¾ç‰‡æ‡’åŠ è½½ã€é¡µé¢æ•°æ®çš„æ»šåŠ¨åŠ è½½è¿™äº›ä½“éªŒè®¾è®¡æ—¶ï¼Œä¸€èˆ¬èƒ½å¤Ÿæƒ³åˆ°åŸºäº<a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/scroll_event" target="_blank" rel="noopener noreferrer"><code>scroll</code></a>äº‹ä»¶ï¼Œé€šè¿‡<code>getBoundingClientRect</code>æ–¹æ³•è·å–å…ƒç´ ç›¸å¯¹äºè§†å£åç§»é‡<code>top</code>ï¼Œæ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§ï¼Œdemo å¦‚ä¸‹</p><p><a href="https://codesandbox.io/s/jovial-snowflake-e42869?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit jovial-snowflake-e42869" class="img_ev3q"></a></p><p>è¿™ç§å®ç°æ–¹å¼è¾ƒä¸ºç¹çï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬æœ‰äº†<code>IntersectionObserver</code> APIï¼Œå¯ä»¥å¤§å¤§ç®€åŒ–è¿™äº›é€šè¿‡è®¡ç®—å…ƒç´ åç§»é‡æ¥åˆ¤æ–­å¯è§†æ€§çš„é€»è¾‘ã€‚</p><p>W3C åœ¨ <a href="https://www.w3.org/standards/history/intersection-observer" target="_blank" rel="noopener noreferrer">2017-09-14</a> æ­£å¼å‘å¸ƒäº†<code>IntersectionObserver</code> API è‰æ¡ˆï¼Œå…¶åŠŸèƒ½ä¸Šæä¾›äº†æ£€æµ‹ç›®æ ‡å…ƒç´ åœ¨ç¥–å…ˆå…ƒç´ æˆ– <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Viewport" target="_blank" rel="noopener noreferrer">viewport</a> å†…å¯è§†æƒ…å†µå˜åŒ–çš„æ–¹å¼ï¼Œè¿™ç§è§‚æµ‹æ˜¯å¼‚æ­¥çš„ï¼Œä¿è¯äº†å¼€å‘ä¸Šçš„ä¾¿æ·å’Œæ€§èƒ½ä¸Šçš„é«˜æ•ˆã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="intersectionobserverç±»å‹å®šä¹‰">IntersectionObserverç±»å‹å®šä¹‰<a class="hash-link" href="#intersectionobserverç±»å‹å®šä¹‰" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>IntersectionObserver</code>æœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œéœ€è¦é€šè¿‡<code>new</code>æ¥åˆå§‹åŒ–è°ƒç”¨ï¼ŒåŸºæœ¬ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// è·å–ç›®æ ‡å…ƒç´  DOM å¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> observeTarget </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(189, 147, 249);font-style:italic">document</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">querySelector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"#targetId"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// åˆå§‹åŒ–IntersectionObserverå®ä¾‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> observer </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">IntersectionObserver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">entries</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  entries</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">forEach</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">e</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// e.isIntersecting ä¸º trueï¼Œåˆ™ç›®æ ‡å…ƒç´ å˜å¾—å¯è§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">isIntersecting</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">threshold</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// å¼€å§‹ç›‘æµ‹ç›®æ ‡å…ƒç´ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">observer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">observe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">observeTarget</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// å–æ¶ˆç›‘æµ‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">observer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">unobserve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">observeTarget</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">observer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">disconnect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸‹é¢æ˜¯è¯¦ç»†çš„ TypeScript ç±»å‹å®šä¹‰ï¼š</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * æ„é€ å‡½æ•°</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">declare</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> IntersectionObserver</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    prototype</span><span class="token operator">:</span><span class="token plain"> IntersectionObserver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">callback</span><span class="token operator">:</span><span class="token plain"> IntersectionObserverCallback</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> options</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> IntersectionObserverInit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> IntersectionObserver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * æ„é€ å‡½æ•°åˆå§‹å‚æ•°1ï¼šå›è°ƒå‡½æ•°</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">IntersectionObserverCallback</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">entries</span><span class="token operator">:</span><span class="token plain"> IntersectionObserverEntry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> observer</span><span class="token operator">:</span><span class="token plain"> IntersectionObserver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * æ„é€ å‡½æ•°åˆå§‹å‚æ•°2ï¼šå›è°ƒå‡½æ•°æ‰§è¡Œæ¡ä»¶è®¾å®š</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">IntersectionObserverInit</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * ç›®æ ‡å…ƒç´ çš„åŒ…å«å…ƒç´ ï¼Œå¦‚æœä¸æŒ‡å®šåˆ™é»˜è®¤ä¸º viewport</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    root</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> Element </span><span class="token operator">|</span><span class="token plain"> Document </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * ç›®æ ‡å…ƒç´ ç›¸å¯¹äº viewport æˆ–è€…åŒ…å«å…ƒç´ çš„åç§»é‡</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * æ³¨æ„ï¼šè´Ÿå€¼è¡¨ç¤ºç›®æ ‡å…ƒç´ åœ¨åŒ…å«å…ƒç´ å†…éƒ¨åå³æˆ–è€…åä¸‹çš„ä½ç½®</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    rootMargin</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * ç›®æ ‡å…ƒç´ è§¦å‘å›è°ƒå‡½æ•°çš„</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    threshold</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * IntersectionObserverå¯¹è±¡å±æ€§å’Œæ–¹æ³•</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">IntersectionObserver</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">readonly</span><span class="token plain"> root</span><span class="token operator">:</span><span class="token plain"> Element </span><span class="token operator">|</span><span class="token plain"> Document </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">readonly</span><span class="token plain"> rootMargin</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">readonly</span><span class="token plain"> thresholds</span><span class="token operator">:</span><span class="token plain"> ReadonlyArray</span><span class="token operator">&lt;</span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * åœæ­¢ç›‘æµ‹æ‰€æœ‰å…ƒç´ </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">disconnect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * å¼€å§‹ç›‘æµ‹ç›®æ ‡å…ƒç´ </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">observe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">target</span><span class="token operator">:</span><span class="token plain"> Element</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * è·å–æ‰€æœ‰ç›®æ ‡å…ƒç´ çš„ç›‘æµ‹å¯¹è±¡</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">takeRecords</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> IntersectionObserverEntry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * åœæ­¢ç›‘æµ‹ç›®æ ‡å…ƒç´ </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">unobserve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">target</span><span class="token operator">:</span><span class="token plain"> Element</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * å›è°ƒå‡½æ•°è·å–çš„ç›®æ ‡å…ƒç´ çš„ç›‘æµ‹å˜é‡</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">IntersectionObserverEntry</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * ç›®æ ‡å…ƒç´ åœ¨ viewport å†…éƒ¨çš„åæ ‡</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">readonly</span><span class="token plain"> boundingClientRect</span><span class="token operator">:</span><span class="token plain"> DOMRectReadOnly</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * ç›®æ ‡å…ƒç´ å¯è§æ¯”ä¾‹</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">readonly</span><span class="token plain"> intersectionRatio</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * ç›®æ ‡å…ƒç´ å¯è§åŒºåŸŸåœ¨ viewport å†…éƒ¨çš„åæ ‡</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">readonly</span><span class="token plain"> intersectionRect</span><span class="token operator">:</span><span class="token plain"> DOMRectReadOnly</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * ç›®æ ‡å…ƒç´ æ˜¯å¦å¯è§</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">readonly</span><span class="token plain"> isIntersecting</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * ç›®æ ‡å…ƒç´ çš„rootå…ƒç´ å¯è§åŒºåŸŸçš„åæ ‡</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">readonly</span><span class="token plain"> rootBounds</span><span class="token operator">:</span><span class="token plain"> DOMRectReadOnly </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * ç›®æ ‡å…ƒç´  DOM å¯¹è±¡</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">readonly</span><span class="token plain"> target</span><span class="token operator">:</span><span class="token plain"> Element</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     * ç›¸å¯¹äºåˆ›å»ºæ–‡æ¡£çš„æ—¶é—´ï¼Œå½“å…ƒç´ å¯è§æ€§å‘ç”Ÿæ”¹å˜çš„æ—¶é—´å¯¹è±¡</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">readonly</span><span class="token plain"> time</span><span class="token operator">:</span><span class="token plain"> DOMHighResTimeStamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨åˆå§‹åŒ–<code>IntersectionObserver</code>å¯¹è±¡çš„æ—¶å€™ï¼Œéœ€è¦é‡ç‚¹ç†è§£<code>root</code>å’Œ<code>threshold</code>çš„æ¦‚å¿µã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="root">root<a class="hash-link" href="#root" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>root</code>å¯ä»¥åœ¨åˆå§‹åŒ–<code>IntersectionObserver</code>æ—¶æŒ‡å®šï¼Œè¡¨ç¤ºç›®æ ‡å…ƒç´ ç›¸å¯¹çš„å®¹å™¨å…ƒç´ ï¼Œå¦‚æœæœªæŒ‡å®šåˆ™ä¸º<code>html</code>æ ¹å…ƒç´ ã€‚</p><p><code>root</code>å’Œç›®æ ‡å…ƒç´ éƒ½è¢«çœ‹æˆæ˜¯çŸ©å½¢ç›’å­ï¼Œè€Œ<code>rootMargin</code>åˆ™æ˜¯ç›®æ ‡å…ƒç´ ç›¸å¯¹äº<code>root</code>çš„ä½ç½®åç§»é‡ï¼Œå› ä¸º<code>root</code>å†…éƒ¨è¿˜å¯èƒ½æ’å¸ƒçš„æœ‰å…¶ä»–å…ƒç´ æˆ–è€…<code>root</code>æœ¬èº«å…·æœ‰ä¸ä¸º<code>0</code>çš„<code>margin</code>å±æ€§ã€‚</p><ul><li><p>å½“<code>rootMargin</code>å–æ­£å€¼æ—¶ï¼Œå…ƒç´ åœ¨<code>viewport</code>æˆ–è€…ç¥–å…ˆå…ƒç´ å†…éƒ¨å‘ä¸Šæˆ–è€…å‘å·¦åç§»</p></li><li><p>å½“<code>rootMargin</code>å–è´Ÿå€¼æ—¶ï¼Œå…ƒç´ åœ¨<code>viewport</code>æˆ–è€…ç¥–å…ˆå…ƒç´ å†…éƒ¨å‘ä¸‹æˆ–è€…å‘å³åç§»</p></li></ul><p>ï¼ˆä¸‹å›¾å¼•è‡ª<a href="https://www.smashingmagazine.com/2021/07/dynamic-header-intersection-observer/" target="_blank" rel="noopener noreferrer">Building A Dynamic Header With Intersection Observer â€” Smashing Magazine</a>ï¼‰</p><p><img loading="lazy" alt="1-dynamic-header-intersection-observer" src="/assets/images/1-dynamic-header-intersection-observer-660d0ed0ce2b2121669c1588619973ce.png" width="1366" height="1428" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="threshold">threshold<a class="hash-link" href="#threshold" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>threshold</code>ç”¨äºæŒ‡å®šä¸€ä¸ªæˆ–è€…å¤šä¸ªåœ¨<code>0 ~ 1</code>èŒƒå›´å†…çš„æ•°å­—ï¼Œæ•°å­—ä»£è¡¨çš„æ˜¯ä¸€ä¸ªæ¯”ä¾‹ï¼Œè¡¨ç¤ºå…ƒç´ åœ¨<code>root</code>å†…éƒ¨å¯è§é¢ç§¯ç›¸å¯¹äº<code>root</code>çš„ç™¾åˆ†æ¯”ã€‚</p><p>å½“ç›®æ ‡å…ƒç´ å¯è§é¢ç§¯æ¯”ä¾‹å‘ç”Ÿæ”¹å˜ä¸”åœ¨æŒ‡å®šçš„é˜ˆå€¼æ—¶ï¼Œå°±ä¼šè§¦å‘<code>IntersectionObserver</code>åˆå§‹åŒ–æ—¶çš„å›è°ƒå‡½æ•°ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸º<code>0</code>ï¼Œå³å…ƒç´ åœ¨å®Œå…¨ä¸å¯è§å’Œå¯è§æ—¶è§¦å‘å›è°ƒå‡½æ•°ã€‚</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>è­¦å‘Š</div><div class="admonitionContent_S0QG"><p><code>threshold</code>å¹¶ä¸èƒ½ä¿è¯å›è°ƒå‡½æ•°ä¸€å®šåœ¨è¿™äº›æŒ‡å®šçš„é˜ˆå€¼åˆ°è¾¾æ—¶æ‰§è¡Œã€‚</p></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="intersectionobserverç”¨ä¾‹">IntersectionObserverç”¨ä¾‹<a class="hash-link" href="#intersectionobserverç”¨ä¾‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§">åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§<a class="hash-link" href="#åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é€šè¿‡<code>IntersectionObserver</code>æˆ‘ä»¬å¯ä»¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§çš„ä¸¤ç§æƒ…å†µï¼š</p><ol><li>åœ¨<code>document</code>çš„<code>viewport</code>å†…éƒ¨æ˜¯å¦å¯è§ï¼Œæ­¤æ—¶å…ƒç´ ç›¸å¯¹äºæµè§ˆå™¨çª—å£æˆ–è€…<code>iframe</code>å®šä½</li></ol><iframe src="https://codesandbox.io/embed/ancient-sound-l3vbju?fontsize=14&amp;hidenavigation=1&amp;theme=dark" width="100%" height="500" title="ancient-sound-l3vbju" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" loading="lazy"></iframe><ol start="2"><li>åœ¨ç¥–å…ˆå…ƒç´ å†…éƒ¨æ˜¯å¦å¯è§</li></ol><iframe src="https://codesandbox.io/embed/nervous-tristan-k630cf?fontsize=14&amp;hidenavigation=1&amp;theme=dark" width="100%" height="500" title="nervous-tristan-k630cf" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" loading="lazy"></iframe><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="image-lazyload">Image Lazyload<a class="hash-link" href="#image-lazyload" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><iframe src="https://codesandbox.io/embed/hopeful-poincare-uuhiob?fontsize=14&amp;hidenavigation=1&amp;theme=dark" width="100%" height="500" title="hopeful-poincare-uuhiob" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" loading="lazy"></iframe><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sticky-header-boxshadow">Sticky Header BoxShadow<a class="hash-link" href="#sticky-header-boxshadow" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><iframe src="https://codesandbox.io/embed/angry-taussig-e07ysx?fontsize=14&amp;hidenavigation=1&amp;theme=dark" width="100%" height="500" title="angry-taussig-e07ysx" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" loading="lazy"></iframe><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="infinite-scroll">Infinite Scroll<a class="hash-link" href="#infinite-scroll" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><iframe src="https://codesandbox.io/embed/intelligent-albattani-yrujgn?fontsize=14&amp;hidenavigation=1&amp;theme=dark" width="100%" height="500" title="intelligent-albattani-yrujgn" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" loading="lazy"></iframe>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[webå›¾åƒæ ¼å¼å¯¹æ¯”ï¼ˆä¸‰ï¼‰]]></title>
            <link>https://icodex.me/webimage3</link>
            <guid>/webimage3</guid>
            <pubDate>Wed, 31 Aug 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[æ— æŸå‹ç¼©]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ— æŸå‹ç¼©">æ— æŸå‹ç¼©<a class="hash-link" href="#æ— æŸå‹ç¼©" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ— æŸå‹ç¼©ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„å›¾åƒæ ¼å¼æ˜¯ PNGï¼Œä½†æ˜¯è¿‘å‡ å¹´ä¹Ÿå‡ºç°äº†è®¸å¤šæ–°çš„å‹ç¼©ç®—æ³•æ ‡å‡†ï¼Œä»¥æœŸæœ›æ›¿ä»£ PNGï¼Œæä¾›æ›´å¥½çš„å›¾åƒå‹ç¼©æ•ˆæœã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bmp">BMP<a class="hash-link" href="#bmp" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>BMPï¼ŒBMP æ˜¯ç¼–ç åŸå§‹å›¾åƒçš„ä¸€ç§æ–‡ä»¶æ ¼å¼ï¼Œä¸€èˆ¬é‡‡å–ä¸å‹ç¼©çš„æ–¹å¼å­˜å‚¨å›¾åƒæ•°æ®ï¼Œå› æ­¤æ–‡ä»¶ä½“ç§¯éå¸¸å¤§ï¼Œä¸æ¨èåœ¨ web ä½¿ç”¨ã€‚</p><table><thead><tr><th>æ–‡ä»¶æ ¼å¼</th><th>å¼€å‘å•†</th></tr></thead><tbody><tr><td>BMP</td><td>å¾®è½¯</td></tr><tr><td>å¼€å‘å•†</td><td>å¾®è½¯</td></tr><tr><td>å‘å¸ƒæ—¶é—´</td><td>1987 å¹´è·Ÿéš Windows2 å‘å¸ƒ</td></tr><tr><td>æ–‡ä»¶ååç¼€</td><td><code>.bmp</code>ï¼Œ<code>.dib</code></td></tr><tr><td>MIME</td><td><code>image/bmp``image/x-bmp</code></td></tr><tr><td>è‰²æ·±</td><td>æœ€é«˜æ”¯æŒ 32 bppï¼Œä½¿ç”¨å‹ç¼©ç®—æ³•ååªæ”¯æŒ 4bpp æˆ– 8bpp</td></tr><tr><td>æœ€å¤§å›¾åƒå°ºå¯¸</td><td>2 ^ 31 - 1</td></tr><tr><td>å…¼å®¹æ€§</td><td>å…¨å¹³å°</td></tr></tbody></table><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="gif">GIF<a class="hash-link" href="#gif" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>GIFï¼ŒGraphics Interchange Formatï¼Œå›¾å½¢äº¤æ¢æ ¼å¼ï¼Œä½¿ç”¨ LZW æ— æŸå‹ç¼©ç®—æ³•æ¥å‹ç¼©å›¾åƒæ•°æ®ï¼Œå¯ä»¥å°†å¤šä¸ªå›¾åƒå­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå› æ­¤å¯ä»¥ç”¨ GIF æ¥åˆ¶ä½œåŠ¨ç”»å¸§ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="gif-çš„å†å²">GIF çš„å†å²<a class="hash-link" href="#gif-çš„å†å²" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>GIF æœ€åˆç‰ˆæœ¬ä¸º 87aï¼Œç”±ç¾å›½ <a href="https://en.wikipedia.org/wiki/CompuServe" target="_blank" rel="noopener noreferrer">CompuServe</a> å…¬å¸åœ¨ 1987 å¹´å‘å¸ƒï¼Œç”±äºå…¶æ”¯æŒå½©è‰²å›¾åƒå’Œä½¿ç”¨é«˜é€Ÿçš„ç¼–è§£ç ç®—æ³•ï¼Œæ‰€ä»¥å¾ˆå¿«æµè¡Œèµ·æ¥ï¼Œä½†æ˜¯æ­¤æ—¶çš„ GIF è¿˜ä¸æ”¯æŒåŠ¨ç”»ã€‚ç†è®ºä¸Šï¼ŒGIF æ˜¯æœ€æ—©åœ¨äº’è”ç½‘æµè¡Œçš„å›¾åƒæ ¼å¼ï¼Œæ¯” JPEG è¿˜æ—©äº†ä¸‰å››å¹´ã€‚</p><p>1989 å¹´ï¼ŒCompuServe å…¬å¸åˆå‘å¸ƒäº†ä¸€ä¸ªå¢å¼ºç‰ˆæœ¬ 89aï¼Œæ­¤ç‰ˆæœ¬ä¸º GIF å¢åŠ äº†å›¾å½¢æ§åˆ¶æ‹“å±•ï¼Œå…è®¸ GIF æ–‡ä»¶ä¸­çš„æ¯ä¸€å¹…å›¾åƒå¯ä»¥åœ¨ç­‰å¾…ä¸€å®šçš„æ—¶é—´å»¶è¿Ÿåè¿›è¡Œç»˜åˆ¶ï¼Œä»ç¬¬ä¸€å¹…å›¾åƒå¼€å§‹ç»˜åˆ¶åˆ°æœ€åä¸€å¹…ç»“æŸï¼Œä¸æ”¯æŒå¾ªç¯ã€‚</p><p>ä¸ºäº†è®© GIF èƒ½å¤Ÿè‡ªåŠ¨å¾ªç¯æ’­æ”¾å›¾åƒï¼ŒNetscape å…¬å¸å¼€å‘è€…åœ¨ 1995 å¹´åœ¨ GIF åŠ¨ç”»å¸§åºåˆ—å‰æ·»åŠ äº†ä¸€ä¸ªè¡¨ç¤ºå¸§æ’­æ”¾æ¬¡æ•°çš„æ•°æ®å—ï¼ŒæŒ‡å®šå¸§åº”è¯¥è¢«æ’­æ”¾çš„æ¬¡æ•°ï¼Œä» 0~ 65535 æ¬¡ï¼Œ0 å°±è¡¨ç¤ºæ°¸è¿œå¾ªç¯ï¼Œä»æ­¤ä¾¿æœ‰äº†å¼ºå¤§çš„åŠ¨ç”»è¡¨æƒ…åŒ…ã€‚åç»­ Netscape ä¹Ÿå°†å¯¹ GIF çš„æ”¯æŒæ·»åŠ åˆ°äº†æµè§ˆå™¨ä¸­ï¼Œåç»­éšç€ç½‘ç»œå‘å±•ï¼Œå„å¤§æµè§ˆå™¨ä¹Ÿéƒ½æ”¯æŒäº†ï¼Œç›´åˆ°ä»Šå¤©ä»ç„¶ä½¿ç”¨çš„æ˜¯ 1989 å¹´å‘å¸ƒçš„ 89a æ ‡å‡†ã€‚</p><table><thead><tr><th>å¼€å‘è€…</th><th>ç¾å›½ CompuServe å…¬å¸</th></tr></thead><tbody><tr><td>å‘å¸ƒæ—¶é—´</td><td>1987</td></tr><tr><td>è‰²æ·±</td><td>8 bpp</td></tr><tr><td>æ˜¯å¦æ”¯æŒ alpha é€šé“</td><td>ä¸æ”¯æŒï¼Œä½†æ˜¯ GIF æ”¯æŒä¸ºæ¯ä¸ªé¢œè‰²åˆ†é‡æŒ‡å®šä¸€ä¸ªç´¢å¼•ä½ä½œä¸ºé€æ˜èƒŒæ™¯é¢œè‰²</td></tr><tr><td>æ”¯æŒåŠ¨ç”»</td><td>æ”¯æŒ</td></tr><tr><td>æ”¯æŒéš”è¡Œæ‰«æ</td><td>æ”¯æŒï¼Œå…è®¸éƒ¨åˆ†ä¸‹è½½æ¸è¿›å¼è§£æ</td></tr><tr><td>æ–‡ä»¶æ ¼å¼</td><td>GIF</td></tr><tr><td>æ–‡ä»¶ååç¼€</td><td><code>.gif</code></td></tr><tr><td>MIME</td><td><code>image/gif</code></td></tr><tr><td>æœ€å¤§å›¾åƒå°ºå¯¸</td><td>65536Ã—65536</td></tr><tr><td>å…¼å®¹æ€§</td><td>å…¨å¹³å°</td></tr><tr><td>ç¼ºé™·</td><td>GIF çš„ç¼ºé™·ä¸»è¦ç”±ä»¥ä¸‹æ–¹é¢ï¼šGIF æ— æŸå‹ç¼©å›¾åƒçš„å‹ç¼©æ¯”ä¸å¦‚è§†é¢‘å‹ç¼©ï¼Œå¯¼è‡´å¤šå¸§ç”»é¢ç¼–ç å¾—åˆ°çš„æ–‡ä»¶ä½“ç§¯è¿‡å¤§ï¼›ç›®å‰ï¼Œè¶Šæ¥è¶Šå¤šçš„å›¾åƒå‹ç¼©æ ‡å‡†æ”¯æŒåŠ¨ç”»ï¼Œä¾‹å¦‚ webpï¼Œapngï¼Œheif ç­‰ï¼Œå®ƒä»¬éƒ½å…·æœ‰æ›´é«˜å‹ç¼©æ¯”å’Œæ›´å‡ºè‰²çš„æ˜¾ç¤ºæ•ˆæœï¼Œè°·æ­Œå¼€å‘è€…ä¹Ÿæ¨èå°† GIF è½¬æ¢æˆ webm, mp4 ç­‰è§†é¢‘æ ¼å¼æ¥å‡å°ä½“ç§¯ï¼›GIF æœ€å¤šæ”¯æŒ 256 ç§é¢œè‰²ï¼Œåˆ¶ä½œä¸äº†å…¨å½©å›¾åƒï¼Œæ— æ³•æ»¡è¶³è®¾è®¡ç¾¤ä½“çš„è¦æ±‚GIF æ›´å¤šçš„è¿˜æ˜¯åº”ç”¨äº 1MiB ä¸‹çš„åŠ¨ç”»å›¾åƒï¼Œå…¶ä½™åœºæ™¯éƒ½æœ‰æ›´å¥½çš„å›¾åƒæ ¼å¼é€‰æ‹©ã€‚</td></tr><tr><td>å¼€æºå·¥å…·</td><td><a href="https://github.com/imagemin/imagemin-gifsicle" target="_blank" rel="noopener noreferrer">imagemin-gifsicle</a>ï¼šnodejs ä½¿ç”¨ gifsicle ä¼˜åŒ– GIF å›¾åƒ<br><a href="https://developers.google.com/speed/webp/docs/gif2webp" target="_blank" rel="noopener noreferrer">gif2webp</a>ï¼šå°† GIF è½¬æ¢æˆ webp<a href="https://ezgif.com/gif-to-apng" target="_blank" rel="noopener noreferrer">ezgif</a>ï¼šå›¾åƒæ ¼å¼è½¬æ¢ç½‘ç«™</td></tr></tbody></table><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pngapng">PNG/APNG<a class="hash-link" href="#pngapng" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>PNGï¼ŒPortable Network Graphicsï¼Œä¾¿æºå¼ç½‘ç»œå›¾å½¢ï¼Œæœ€åˆç”±ä¸€ç¾¤è®¡ç®—æœºå›¾å½¢å¼€å‘ä¸“å®¶ï¼ˆPNG Development Groupï¼‰ç»„ç»‡å¼€å‘ï¼Œåˆè¡·æ˜¯åº”å¯¹ GIF ä½¿ç”¨çš„å‹ç¼©ç®—æ³• LZW çš„ä¸“åˆ©äº‰ç«¯ã€‚</p><p>PNG æä¾›çš„æ–‡ä»¶æ ¼å¼æœ¬èº«åªæ”¯æŒç¼–ç å•ä¸ªå›¾åƒï¼Œç›´åˆ° 2001 å¹´ï¼Œå¼€å‘è€…å‘å¸ƒäº† MNGï¼ˆå¤šå›¾åƒç½‘ç»œå›¾å½¢ï¼‰ å›¾åƒæ ¼å¼ï¼Œè®© PNG ä¹Ÿèƒ½åƒ GIF é‚£æ ·æ”¯æŒåŠ¨ç”»ï¼Œä½†æ˜¯ MNG æ ¼å¼å¹¶æœªå¾—åˆ°ä¸»æµæµè§ˆå™¨çš„æ”¯æŒï¼Œæ—©æœŸåªæ˜¯ mozilla å’Œ netscape æ”¯æŒï¼ŒIEï¼Œchromeï¼Œsafari è¿™äº›æµè§ˆå™¨åˆ™ä»æœªæ”¯æŒ MNGã€‚</p><p>æ­¤åï¼Œmozilla å¼€å‘è€…åŸºäº PNG å¼€å‘å‡ºäº† APNGï¼ˆåŠ¨ç”»ä¾¿æ·å¼ç½‘ç»œå›¾å½¢ï¼‰æ ¼å¼å¹¶äº 2008 å¹´å‘å¸ƒï¼Œå…¼å®¹ PNG æ ¼å¼çš„åŒæ—¶ï¼Œæ”¯æŒåŠ¨ç”»æ˜¾ç¤ºï¼Œæ¯” GIF æ”¯æŒæ›´é«˜è‰²æ·±å’Œæ›´é«˜çš„å‹ç¼©æ¯”ï¼ŒåŠ¨å›¾è´¨é‡æ›´é«˜ä¸”ä½“ç§¯æ›´å°ã€‚ä½†æ˜¯ PNG å¼€å‘å°ç»„ä¸€ç›´æ‹’ç»å°† APNG ä½œä¸ºæ‹“å±•çº³å…¥è‡ªå·±çš„æ ‡å‡†ï¼Œä¹Ÿå°± mozilla åœ¨èƒŒåæ¨å¹¿ï¼Œè¿™å°±å¯¼è‡´ APNG ä¸€ç›´æ²¡æ™®åŠä½¿ç”¨ï¼Œå†åŠ ä¸Š mozilla è¿‘å¹´æ¥ç›¸æ¯” chrome è¶Šæ¥è¶ŠåŠ¿å¼±ï¼ŒAPNG çš„æœªæ¥å‰æ™¯æ¸ºèŒ«ã€‚</p><table><thead><tr><th></th><th>PNG</th><th>APNG</th></tr></thead><tbody><tr><td>å¼€å‘è€…</td><td>PNG Development Groupï¼ˆPNGå¼€å‘å°ç»„ï¼‰</td><td>mozilla</td></tr><tr><td>å‘å¸ƒæ—¶é—´</td><td>1996ï¼Œ2003 å¹´çº³å…¥<a href="https://www.w3.org/TR/PNG/" target="_blank" rel="noopener noreferrer"> w3c æ ‡å‡†</a></td><td>2008</td></tr><tr><td>è‰²æ·±</td><td>32 bpp</td><td>32bpp</td></tr><tr><td>æ˜¯å¦æ”¯æŒ alpha é€šé“</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>æ”¯æŒåŠ¨ç”»</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>æ”¯æŒéš”è¡Œæ‰«æ</td><td>æ”¯æŒï¼Œå…è®¸éƒ¨åˆ†ä¸‹è½½æ¸è¿›å¼è§£æï¼Œä½†ä¼šå¢åŠ å›¾åƒä½“ç§¯</td><td>æ”¯æŒ</td></tr><tr><td>æ–‡ä»¶æ ¼å¼</td><td>PNGï¼Œ</td><td>APNG</td></tr><tr><td>æ–‡ä»¶ååç¼€</td><td><code>.png</code></td><td><code>.png</code></td></tr><tr><td>MIME</td><td><code>image/png</code></td><td><code>image/png</code>ï¼Œ<code>image/apng</code></td></tr><tr><td>æœ€å¤§å›¾åƒå°ºå¯¸</td><td>2 ^ 31 - 1</td><td>2 ^ 31 - 1</td></tr><tr><td>å…¼å®¹æ€§</td><td>PNG å…¨å¹³å°å…¼å®¹</td><td>APNG åªæœ‰ IE ä¸æ”¯æŒ<br><img loading="lazy" alt="image-20220830172040065" src="/assets/images/image-20220830172040065-c5800a57701e2ddbcec72e6fd48f0f3d.png" width="2600" height="854" class="img_ev3q"></td></tr><tr><td>å¼€æºåº“</td><td><a href="http://www.libpng.org/pub/png/libpng.html" target="_blank" rel="noopener noreferrer">libpng</a>ï¼šç¼–è§£ç  png</td><td><a href="https://sourceforge.net/projects/libpng-apng/" target="_blank" rel="noopener noreferrer">libpng-apng</a>ï¼šç¼–è¾‘ç  APNG<br><a href="http://gif2apng.sourceforge.net/" target="_blank" rel="noopener noreferrer">gif2apng</a>ï¼šä½¿ç”¨ c++ å¼€å‘è½¬æ¢ gif åˆ° apng</td></tr><tr><td>æ€§èƒ½</td><td></td><td>ç›¸æ¯” GIF å¯ä»¥å‡å°‘ 20% çš„ä½“ç§¯ï¼ŒåŒæ—¶å¯ç¼–ç çš„é¢œè‰²æ›´å¤šï¼Œå›¾åƒè´¨é‡æ›´é«˜ã€‚</td></tr><tr><td>ä½¿ç”¨ç‡</td><td>PNG æœ¬èº«åŸºæœ¬æ²¡æœ‰ç¼ºé™·ï¼Œåœ¨ web ä¸Šçš„ä½¿ç”¨ç‡ä¹Ÿä¸€ç›´æ˜¯æœ€é«˜çš„</td><td>æ™®åŠç‡ä¸é«˜ï¼Œä½¿ç”¨è€…è¾ƒå°‘</td></tr><tr><td>ç¤ºä¾‹</td><td></td><td><img loading="lazy" alt="img" src="/assets/images/apng-20220830171949179-7b94752b57a542ff501f3a51d65a59d4.png" width="556" height="495" class="img_ev3q"></td></tr></tbody></table><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="webp">Webp<a class="hash-link" href="#webp" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>webp å®é™…æœ¬èº«ä¸»æ‰“çš„æ˜¯æ— æŸå‹ç¼©é™æ€å›¾åƒçš„æ ¼å¼ï¼Œå…¶æ— æŸå‹ç¼©æ ¼å¼æ¯” PNG å¯ä»¥å‡å°‘ 26% çš„ä½“ç§¯ã€‚</p><table><thead><tr><th>å¼€å‘è€…</th><th>google</th></tr></thead><tbody><tr><td>å‘å¸ƒæ—¶é—´</td><td>2010</td></tr><tr><td>æ–‡ä»¶æ ¼å¼</td><td>RIFFï¼ŒRIFF æ˜¯å¾®è½¯å’Œ IBM äº 1991 æ¨å‡ºçš„ä¸€ç§å®¹å™¨æ ¼å¼ï¼Œå¯ç”¨æ¥ç¼–ç ä½å›¾ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘ç­‰æ•°æ®å½¢å¼ï¼Œåœ¨æ­¤æ–‡ä»¶æ ¼å¼åŸºç¡€ä¸Šè¿˜è¡ç”Ÿå‡ºäº† AVIï¼ŒWAV ç­‰æ–‡ä»¶æ ¼å¼ã€‚</td></tr><tr><td>æ–‡ä»¶ååç¼€</td><td><code>.webp</code></td></tr><tr><td>MIME</td><td><code>image/webp</code></td></tr><tr><td>è‰²æ·±</td><td>32 bpp</td></tr><tr><td>Alpha é€šé“</td><td>æ”¯æŒ 8 bit</td></tr><tr><td>æœ€å¤§å›¾åƒå°ºå¯¸</td><td>16383 x 16383</td></tr><tr><td>æ”¯æŒåŠ¨ç”»</td><td>æ”¯æŒ</td></tr><tr><td>å…¼å®¹æ€§</td><td>é™¤äº† IE åŸºæœ¬éƒ½æ”¯æŒ<br><img loading="lazy" alt="image-20220830172305062" src="/assets/images/image-20220830172305062-f8fc20e1fd852bed59c6a49177833f6a.png" width="2604" height="1046" class="img_ev3q"></td></tr><tr><td>å¼€æºåº“</td><td><a href="https://storage.googleapis.com/downloads.webmproject.org/releases/webp/index.html" target="_blank" rel="noopener noreferrer">libwebp</a>ï¼šåŒ…å«åœ¨ JPEGã€PNG å’Œ webp ä¹‹é—´äº’ç›¸è½¬æ¢çš„ CLI å·¥å…·ï¼Œ<a href="https://developers.google.com/speed/webp/docs/cwebp" target="_blank" rel="noopener noreferrer">cwebp</a> å¯ä»¥å°†  PNGã€JPEG è½¬æ¢æˆ Webpï¼Œdwebp å¯ä»¥å°† webp è½¬æ¢æˆ PNG<br><a href="https://developers.google.com/speed/webp/docs/img2webp" target="_blank" rel="noopener noreferrer">img2webp</a>ï¼šä»ä¸€ç³»åˆ—è¾“å…¥å›¾åƒåˆ›å»ºåŠ¨ç”» WebP æ–‡ä»¶çš„ CLI å·¥å…·<br><a href="https://developers.google.com/speed/webp/docs/gif2webp" target="_blank" rel="noopener noreferrer">gif2webp</a>ï¼š å°† GIF å›¾åƒè½¬æ¢ä¸º WebP çš„ CLI å·¥å…·<br><a href="https://chromium.googlesource.com/codecs/libwebp2/" target="_blank" rel="noopener noreferrer">libwebp2</a>ï¼šç¬¬äºŒç‰ˆ libwebp<br><a href="https://github.com/imagemin/imagemin-webp" target="_blank" rel="noopener noreferrer">imagemin-webp</a>ï¼šnodejs å·¥å…·ï¼Œè½¬æ¢ JPEG/PNG åˆ° webp æ ¼å¼<br><a href="https://sharp.pixelplumbing.com/api-output#webp" target="_blank" rel="noopener noreferrer">sharp</a>ï¼šnodejs å·¥å…·ï¼Œè½¬æ¢å…¶ä»–å›¾åƒæ ¼å¼åˆ° webp</td></tr><tr><td>æ™®åŠç‡</td><td>å°±ç›®å‰æ¥çœ‹ï¼Œä½¿ç”¨ webp ç½‘ç«™è¿˜æ˜¯ç›¸å¯¹è¾ƒä½ï¼Œ75% &lt;-&gt; 4.8%ï¼Œæœ‰è¶£çš„æ˜¯ï¼Œgoogle ç›®å‰è‡ªå·±ä¹Ÿå¾ˆå°‘ä½¿ç”¨ webpï¼Œä¹‹å‰åœ¨ webstore ç”¨è¿‡ä¸€æ®µæ—¶é—´ååˆæ›¿æ¢å›äº† jpeg å’Œ png<br><img loading="lazy" alt="image" src="/assets/images/image-67d1af2a2e45776145c441587cc07f00.png" width="900" height="500" class="img_ev3q"></td></tr></tbody></table><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="heic">HEIC<a class="hash-link" href="#heic" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>HEICï¼ˆHigh Efficiency Image Containerï¼Œé«˜æ•ˆå›¾åƒå®¹å™¨æ ¼å¼ï¼‰ï¼Œæ˜¯ç¼–ç ç»è¿‡ HEVCï¼ˆH.265ï¼ŒHigh Efficiency Video Codingï¼‰å‹ç¼©è¿‡çš„å›¾åƒçš„æ–‡ä»¶æ ¼å¼ï¼Œæ˜¯ IOS 11+ ç³»ç»Ÿå†…éƒ¨é»˜è®¤å›¾åƒæ ¼å¼ï¼Œç›®å‰ä»…åœ¨ IOS å’Œ macOS å†…éƒ¨é»˜è®¤æ”¯æŒã€‚</p><table><thead><tr><th>HEIC</th><th>High Efficiency Image Container</th></tr></thead><tbody><tr><td>å¼€å‘è€…</td><td>MPEGï¼ˆMoving Pictures Experts Groupï¼‰</td></tr><tr><td>å‘å¸ƒæ—¶é—´</td><td>2013</td></tr><tr><td>æ–‡ä»¶æ ¼å¼</td><td>HEIFï¼ˆHigh Efficiency Image File Formatï¼‰ï¼Œç”± MPEG å¼€å‘å¹¶äº 2015 å¹´æ¨å‡ºçš„ä¸€ç§å®¹å™¨æ ¼å¼ï¼Œæ”¯æŒä»¥ä¸åŒçš„æ–‡ä»¶ç¼–ç æ ¼å¼å­˜å‚¨å•ä¸ªæˆ–å¤šä¸ªå›¾åƒï¼Œä¾‹å¦‚ç”¨æ¥ç¼–ç  HEVC å‹ç¼©è¿‡çš„å›¾åƒä½¿ç”¨ HEIC æ–‡ä»¶æ ¼å¼ï¼Œç¼–ç  AV1 å‹ç¼©è¿‡çš„å›¾åƒä½¿ç”¨ AVIF æ–‡ä»¶æ ¼å¼ã€‚</td></tr><tr><td>æ–‡ä»¶ååç¼€</td><td><code>.heic</code>ï¼Œ<code>.heics</code></td></tr><tr><td>MIME</td><td><code>image/heic</code>ï¼Œ<code>image/heic-sequence</code></td></tr><tr><td>æœ€å¤§è‰²æ·±</td><td>16 bpp</td></tr><tr><td>æœ€å¤§å›¾åƒå°ºå¯¸</td><td>8192Ã—4352ï¼ˆ8kï¼‰</td></tr><tr><td>æ˜¯å¦æ”¯æŒé€æ˜</td><td>æ”¯æŒ alpha åˆ†é‡</td></tr><tr><td>æ˜¯å¦æ”¯æŒåŠ¨ç”»</td><td>æ”¯æŒ</td></tr><tr><td>æ˜¯å¦æ”¯æŒéš”è¡Œæ‰«æ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>å…¼å®¹æ€§</td><td><img loading="lazy" alt="image (1)" src="/assets/images/image (1)-2e542bde185a5235aaac56adc0ae4250.png" width="2610" height="890" class="img_ev3q"></td></tr><tr><td>å¼€æºåº“</td><td><a href="https://github.com/strukturag/libheif" target="_blank" rel="noopener noreferrer">libheif</a>ï¼šæ”¯æŒç¼–è§£ç  HEIF å’Œ HEIC çš„ c++ åº“<br><a href="https://sharp.pixelplumbing.com/api-output#heif" target="_blank" rel="noopener noreferrer">sharp</a>ï¼šnodejs è½¬æ¢å›¾åƒæ ¼å¼çš„å·¥å…·ï¼Œæ”¯æŒ HEIC</td></tr></tbody></table><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="avif">AVIF<a class="hash-link" href="#avif" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>AVIFï¼ˆAOMedia Video Image Formatï¼ŒAOMè§†é¢‘å›¾åƒæ ¼å¼ï¼‰ï¼Œæ˜¯ç¼–ç ç»è¿‡ AV1ï¼ˆAOMedia Video 1ï¼‰ç®—æ³•å‹ç¼©è¿‡çš„å›¾åƒçš„æ–‡ä»¶æ ¼å¼ï¼Œç”± <a href="https://aomedia.org/" target="_blank" rel="noopener noreferrer">AOMediaï¼ˆå¼€æ”¾åª’ä½“è”ç›Ÿï¼‰</a>å¼€å‘ç»´æŠ¤ï¼Œæœ€åˆè§„èŒƒ <a href="https://github.com/AOMediaCodec/av1-avif/releases" target="_blank" rel="noopener noreferrer">1.0.0 </a>äº 2019 å¹´ 2 æœˆå‘å¸ƒï¼Œç°ä»Šä»ç„¶æ²¿ç”¨è¿™ä¸ªç‰ˆæœ¬çš„è§„èŒƒã€‚</p><p>AOMedia ç”±ç›®å‰ä¸€äº›æœ€å…·å½±å“åŠ›çš„äº’è”ç½‘å…¬å¸ç»„æˆï¼Œä¾‹å¦‚äºšé©¬é€Šã€è°·æ­Œã€è‹¹æœï¼ŒNetflixï¼Œå›½å†…çš„æœ‰è…¾è®¯ã€é˜¿é‡Œç­‰ç­‰ï¼Œè¿™äº›å…¬å¸é€šè¿‡å…±äº«å…¶å„è‡ªæŒæ¡çš„ä¸“åˆ©æŠ€æœ¯å¼€å‘å‡ºäº†å…ç‰ˆç¨çš„è§†é¢‘æµæ•°æ®å‹ç¼©ç®—æ³• AV1ï¼Œä»¥æ›¿ä»£ç”± MPEG æ¨å‡ºçš„è§†é¢‘å‹ç¼©ç®—æ³• HEVCï¼Œé¿å…å‘ HEVC èƒŒåçš„ä¸“åˆ©æŒæœ‰è€…æ”¯ä»˜æ—¥ç›Šé«˜æ˜‚çš„ä¸“åˆ©è´¹ã€‚</p><table><thead><tr><th>AVIF</th><th>AOMedia Video Image Format</th></tr></thead><tbody><tr><td>å¼€å‘è€…</td><td>AOMedia</td></tr><tr><td>å‘å¸ƒæ—¶é—´</td><td>2019</td></tr><tr><td>æ–‡ä»¶æ ¼å¼</td><td>HEIFï¼ˆHigh Efficiency Image File Formatï¼‰ï¼Œç”± MPEG å¼€å‘å¹¶äº 2015 å¹´æ¨å‡ºçš„ä¸€ç§å®¹å™¨æ ¼å¼ï¼Œæ”¯æŒä»¥ä¸åŒçš„æ–‡ä»¶ç¼–ç æ ¼å¼å­˜å‚¨å•ä¸ªæˆ–å¤šä¸ªå›¾åƒï¼Œä¾‹å¦‚ç”¨æ¥ç¼–ç  HEVC å‹ç¼©è¿‡çš„å›¾åƒä½¿ç”¨ HEIC æ–‡ä»¶æ ¼å¼ï¼Œç¼–ç  AV1 å‹ç¼©è¿‡çš„å›¾åƒä½¿ç”¨ AVIF æ–‡ä»¶æ ¼å¼ã€‚</td></tr><tr><td>æ–‡ä»¶ååç¼€</td><td><code>.avif</code></td></tr><tr><td>MIME</td><td><code>image/avif</code></td></tr><tr><td>æœ€å¤§è‰²æ·±</td><td>12 bpp</td></tr><tr><td>æœ€å¤§å›¾åƒå°ºå¯¸</td><td>8192Ã—4352ï¼ˆ8kï¼‰</td></tr><tr><td>æ˜¯å¦æ”¯æŒé€æ˜</td><td>æ”¯æŒ alpha åˆ†é‡</td></tr><tr><td>æ˜¯å¦æ”¯æŒåŠ¨ç”»</td><td>æ”¯æŒ</td></tr><tr><td>æ˜¯å¦æ”¯æŒéš”è¡Œæ‰«æ</td><td>ä¸æ”¯æŒæ¸è¿›å¼è§£æï¼Œå¿…é¡»å®Œæ•´ä¸‹è½½å›¾ç‰‡æ‰å¼€å§‹è§£æ</td></tr><tr><td>å…¼å®¹æ€§</td><td>Edge è™½ç„¶ç”¨äº† chromium å†…æ ¸ï¼Œä½†æ˜¯ä¸æ”¯æŒ avif<br><img loading="lazy" alt="image-20220830172809242" src="/assets/images/image-20220830172809242-3c9e28e202ac0c137b1241ef4d85fa4c.png" width="2720" height="966" class="img_ev3q"></td></tr><tr><td>å¼€æºåº“</td><td><a href="https://github.com/AOMediaCodec/libavif" target="_blank" rel="noopener noreferrer">libavif</a>ï¼šå®˜æ–¹ä½¿ç”¨ C ç¼–å†™çš„ç¼–è§£ç  avif çš„åº“<br><a href="https://github.com/Kagami/avif.js" target="_blank" rel="noopener noreferrer">avif.js</a>ï¼šavif polyfillï¼Œä¸ºä¸æ”¯æŒ avif çš„æµè§ˆå™¨æä¾›æ”¯æŒ<br><a href="https://sharp.pixelplumbing.com/api-output#avif" target="_blank" rel="noopener noreferrer">sharp</a>ï¼šnodejs è½¬æ¢å›¾åƒæ ¼å¼çš„å·¥å…·ï¼Œæ”¯æŒ avif<br><a href="https://avif.io/" target="_blank" rel="noopener noreferrer">avif.io</a>ï¼šæ”¯æŒè½¬æ¢å…¶ä»–å›¾åƒæ ¼å¼åˆ° avif çš„ç½‘ç«™</td></tr></tbody></table><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="jpeg-xl">JPEG XL<a class="hash-link" href="#jpeg-xl" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>JPEG XL æ˜¯ JPEGï¼ˆè”åˆå›¾åƒä¸“å®¶ç»„ï¼‰å¼€å‘çš„æ–°ä¸€ä»£å›¾åƒå‹ç¼©ç®—æ³•å’Œæ–‡ä»¶æ ¼å¼ï¼Œå»ºç«‹åœ¨ google å¼€å‘çš„ <a href="https://github.com/google/pik" target="_blank" rel="noopener noreferrer">PIK</a> å’Œ cloudinary å¼€å‘çš„ <a href="https://github.com/cloudinary/fuif" target="_blank" rel="noopener noreferrer">FUIFï¼ˆFree Universal Image Formatï¼‰</a>åŸºç¡€ä¸Šï¼Œå…¶ä¸­ FUIF åˆæ˜¯å»ºç«‹åœ¨ <a href="https://github.com/FLIF-hub/FLIF" target="_blank" rel="noopener noreferrer">FLIFï¼ˆFree Lossless Image Formatï¼‰</a> é¡¹ç›®åŸºç¡€ä¸Šï¼Œç›®å‰ PIKã€FLIFã€FUIF éƒ½è¢«åºŸå¼ƒäº†ï¼Œè¿™äº›é¡¹ç›®çš„å¼€å‘è€…éƒ½å·²ç»è½¬å¤´å…¨åŠ›æ”¯æŒ JPEG XL ç¼–è§£ç åº“ <a href="https://github.com/libjxl/libjxl" target="_blank" rel="noopener noreferrer">libjxl</a> çš„å¼€å‘ã€‚</p><p>JPEG XL æ—¨åœ¨æ›¿ä»£å½“å‰çš„ JPEG æ ‡å‡†ï¼Œå…¶æ”¯æŒæ— æŸ/æœ‰æŸå‹ç¼©ï¼Œä¹Ÿæ”¯æŒåŠ¨ç”»ï¼Œå¹¶ä¸”å…ç‰ˆç¨ï¼Œå…¶æ ‡å‡†åŒ–çš„ç¼–ç ç®—æ³•åœ¨ 2022 å¹´ 5 æœˆä»½æ‰å‘å¸ƒï¼Œæ ‡å‡†å· ISO/IEC 18181ã€‚</p><table><thead><tr><th>JPEG XL</th><th>JPEG extended longterm</th></tr></thead><tbody><tr><td>å¼€å‘è€…</td><td>JPEG</td></tr><tr><td>å‘å¸ƒæ—¶é—´</td><td>2022</td></tr><tr><td>æ–‡ä»¶ååç¼€</td><td><code>.jxl</code></td></tr><tr><td>MIME</td><td><code>image/jxl</code></td></tr><tr><td>æœ€å¤§è‰²æ·±</td><td>32 bpp</td></tr><tr><td>æœ€å¤§å›¾åƒå°ºå¯¸</td><td>(2^30 - 1) * (2^30 - 1)</td></tr><tr><td>æ˜¯å¦æ”¯æŒé€æ˜</td><td>æ”¯æŒ alpha åˆ†é‡</td></tr><tr><td>æ˜¯å¦æ”¯æŒåŠ¨ç”»</td><td>æ”¯æŒ</td></tr><tr><td>æ˜¯å¦æ”¯æŒéš”è¡Œæ‰«æ</td><td>æ”¯æŒï¼Œå¯ä»¥æ¸è¿›å¼è§£æ</td></tr><tr><td>å…¼å®¹æ€§</td><td>æš‚æ— å¹³å°æ”¯æŒï¼Œä½†æ˜¯ chrome å’Œ firefox ä» 90 ç‰ˆæœ¬è¿›å…¥æµ‹è¯•é˜¶æ®µï¼Œå¯ä»¥é€šè¿‡ flags å¼€å¯ï¼Œä¾‹å¦‚ chrome://flags#enable-jxl<br><img loading="lazy" alt="image-20220830172946647" src="/assets/images/image-20220830172946647-15b5fef65effa482b9334cffb8d003be.png" width="2728" height="948" class="img_ev3q"></td></tr><tr><td>å¼€æºåº“</td><td><a href="https://github.com/libjxl/libjxl" target="_blank" rel="noopener noreferrer">libjxl</a>ï¼šä½¿ç”¨ c++ å®ç°çš„ç¼–è§£ç  JPEG XL åº“<br><a href="https://squoosh.app/" target="_blank" rel="noopener noreferrer">squoosh</a>ï¼šåœ¨çº¿è½¬æ¢å›¾åƒæ ¼å¼ï¼Œæ”¯æŒ JPEG XL<br><a href="https://github.com/GoogleChromeLabs/squoosh/tree/dev/libsquoosh" target="_blank" rel="noopener noreferrer">libSquoosh</a>ï¼šnodejs è½¬æ¢å›¾åƒæ ¼å¼çš„å·¥å…·ï¼Œæ”¯æŒ JPEG XL</td></tr></tbody></table>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[webå›¾åƒæ ¼å¼å¯¹æ¯”ï¼ˆå››ï¼‰]]></title>
            <link>https://icodex.me/webimage4</link>
            <guid>/webimage4</guid>
            <pubDate>Wed, 31 Aug 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[nodejs å›¾åƒå¤„ç†åº“]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nodejs-å›¾åƒå¤„ç†åº“">nodejs å›¾åƒå¤„ç†åº“<a class="hash-link" href="#nodejs-å›¾åƒå¤„ç†åº“" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è¯´å®Œäº†æœ‰æŸå‹ç¼©å’Œæ— æŸå‹ç¼©çš„å›¾åƒæ ¼å¼ï¼Œæ¥æ•´ç†ä¸‹ nodejs æ–¹é¢å›¾åƒå¤„ç†ç›¸å…³çš„åº“ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sharp"><a href="https://sharp.pixelplumbing.com/" target="_blank" rel="noopener noreferrer">sharp</a><a class="hash-link" href="#sharp" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åŸºäº <a href="https://github.com/libvips/libvips" target="_blank" rel="noopener noreferrer">libvips</a> å®ç°ï¼Œæä¾› JPEGã€PNGã€GIFã€Webpã€AVIF ä»¥åŠ SVG å›¾åƒæ ¼å¼çš„å¤„ç†ï¼ŒåŒ…æ‹¬å›¾åƒæ ¼å¼è½¬æ¢ï¼Œå›¾åƒå°ºå¯¸ç¼©æ”¾ï¼Œå›¾åƒç»„åˆï¼Œå›¾åƒæ—‹è½¬ï¼Œç­‰ç­‰å¤šç§æ“ä½œï¼Œä¹Ÿæ”¯æŒå°†å›¾åƒè½¬æ¢æˆ base64 å­—ç¬¦ä¸²ã€‚</p><p>ä¾‹å¦‚å°† png è½¬æ¢æˆ avif</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> import sharp from 'sharp';</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> sharp('./images/rgb.png')</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .toFormat('avif', { quality: 50 })</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .toFile('build/images/rgb.avif')</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .then(info =&gt; console.log(info));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¾‹å¦‚å°† jpeg è½¬æˆ base64</p><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">const resizedImageBuf = await require('sharp')(pathToMyImage)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  .toBuffer();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">console.log(`data:image/png;base64,${resizedImageBuf.toString('base64')}`);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="imageminåœæ­¢ç»´æŠ¤"><a href="https://github.com/imagemin/imagemin" target="_blank" rel="noopener noreferrer">imagemin</a>ï¼ˆåœæ­¢ç»´æŠ¤ï¼‰<a class="hash-link" href="#imageminåœæ­¢ç»´æŠ¤" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>imagemin æ˜¯æ’ä»¶å¼çš„å‹ç¼©å›¾åƒçš„å·¥å…·ï¼Œå¯é€šè¿‡å¼•å…¥è‡ªå®šä¹‰çš„æ’ä»¶æ¥æ”¯æŒä¸åŒå›¾åƒæ ¼å¼çš„è½¬æ¢å’Œå›¾åƒå°ºå¯¸çš„ä¼˜åŒ–ï¼Œæ–‡æ¡£ç›¸å¯¹ç®€é™‹ï¼Œå¹¶ä¸”æœ¬èº«å·²åœæ­¢ç»´æŠ¤ï¼Œå¸¸ç”¨çš„æ’ä»¶æœ‰ä»¥ä¸‹è¿™äº›ï¼š</p><ul><li><p><a href="https://www.npmjs.com/package/imagemin-jpegtran" target="_blank" rel="noopener noreferrer">imagemin-jpegtran</a>ï¼šä¼˜åŒ– jpeg ä½“ç§¯</p></li><li><p><a href="https://www.npmjs.com/package/imagemin-optipng" target="_blank" rel="noopener noreferrer">imagemin-optipng</a>ï¼šä¼˜åŒ– png ä½“ç§¯</p></li><li><p><a href="https://www.npmjs.com/package/imagemin-gifsicle" target="_blank" rel="noopener noreferrer">imagemin-gifsicle</a>ï¼šä¼˜åŒ– gif ä½“ç§¯</p></li><li><p><a href="https://www.npmjs.com/package/imagemin-webp" target="_blank" rel="noopener noreferrer">imagemin-webp</a>ï¼šè½¬æ¢åˆ° webp</p></li><li><p><a href="https://www.npmjs.com/package/imagemin-svgo" target="_blank" rel="noopener noreferrer">imagemin-svgo</a>ï¼šåŸºäº svgo ä¼˜åŒ– svg</p></li></ul><div class="language-JavaScript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-JavaScript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import imagemin from 'imagemin';</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import imageminWebp from 'imagemin-webp';</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">await imagemin(['images/*.{jpg,png}'], {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  destination: 'build/images',</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  plugins: [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    imageminWebp({ quality: 100 })</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="libsquoosh"><a href="https://github.com/GoogleChromeLabs/squoosh/tree/dev/libsquoosh" target="_blank" rel="noopener noreferrer">libsquoosh</a><a class="hash-link" href="#libsquoosh" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Google å¼€å‘çš„ <a href="https://github.com/GoogleChromeLabs/squoosh/tree/dev/libsquoosh" target="_blank" rel="noopener noreferrer">libSquoosh</a>ï¼Œæ”¯æŒä½¿ç”¨ nodejs cli è½¬æ¢å›¾åƒæ ¼å¼çš„å·¥å…·ï¼Œæ”¯æŒ JPEG XLï¼Œå…·ä½“çš„å¯ä»¥çœ‹è¿™ç¯‡ä»‹ç» â€”â€” <a href="https://web.dev/introducing-libsquoosh/" target="_blank" rel="noopener noreferrer">Introducing libSquoosh</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å…¶ä»–æ„å»ºå·¥å…·">å…¶ä»–æ„å»ºå·¥å…·<a class="hash-link" href="#å…¶ä»–æ„å»ºå·¥å…·" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="webpack">Webpack<a class="hash-link" href="#webpack" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><table><thead><tr><th>ç‰ˆæœ¬</th><th>loader</th><th>plugin</th></tr></thead><tbody><tr><td><code>&lt;= 4</code></td><td><code>url-loader</code>ï¼šæ”¯æŒè¯»å–å›¾åƒå¹¶è½¬æ¢æˆ base64<code>file-loader</code>ï¼šæ”¯æŒè¯»å–å›¾åƒ</td><td><a href="https://github.com/Klathmon/imagemin-webpack-plugin" target="_blank" rel="noopener noreferrer">imagemin-webpack-plugin</a>(åœæ­¢ç»´æŠ¤)<br><a href="https://github.com/webpack-contrib/image-minimizer-webpack-plugin" target="_blank" rel="noopener noreferrer">image-minimizer-webpack-plugin</a>ï¼šæ”¯æŒä½¿ç”¨ <code>imagemin</code> å’Œ<code>libsquoosh</code> ä¼˜åŒ–å›¾åƒå°ºå¯¸</td></tr><tr><td><code>5</code></td><td><a href="https://webpack.js.org/guides/asset-modules/" target="_blank" rel="noopener noreferrer">å†…ç½®æ”¯æŒ - assets module</a></td><td></td></tr></tbody></table><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="vite">Vite<a class="hash-link" href="#vite" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://github.com/vbenjs/vite-plugin-imagemin" target="_blank" rel="noopener noreferrer">vite-plugin-imagemin</a>ï¼šä½¿ç”¨ imagemin å‹ç¼©å›¾åƒ</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="rollup">Rollup<a class="hash-link" href="#rollup" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a href="https://github.com/rollup/plugins/tree/master/packages/image" target="_blank" rel="noopener noreferrer">@rollup/plugin-image</a>ï¼šæ”¯æŒ<code>import</code> jpegï¼Œpng ç­‰å›¾åƒæ–‡ä»¶çš„è¯­æ³•å¹¶æ‰“åŒ…</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[webå›¾åƒæ ¼å¼å¯¹æ¯”ï¼ˆä¸€ï¼‰]]></title>
            <link>https://icodex.me/webimage1</link>
            <guid>/webimage1</guid>
            <pubDate>Tue, 30 Aug 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[èƒŒæ™¯]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="èƒŒæ™¯">èƒŒæ™¯<a class="hash-link" href="#èƒŒæ™¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ ¹æ® <a href="https://httparchive.org/reports/page-weight#reqImg" target="_blank" rel="noopener noreferrer">httpachive çš„ç»Ÿè®¡æ•°æ®</a>ï¼Œåœ¨ç»Ÿè®¡çš„ 5,431,533 ä¸ª PC é¡µé¢ä¸­:</p><ul><li><p>å›¾åƒæµé‡å¹³å‡å é¡µé¢çš„ 44.5%ï¼ˆ1032.0 KB -&gt; 2317.8 KBï¼‰</p></li><li><p>è¯·æ±‚æ•°é‡å¹³å‡å é¡µé¢çš„ 33%ï¼ˆ25 -&gt; 76ï¼‰</p></li></ul><p>æ‰€ä»¥å›¾åƒæ•°æ®åœ¨ç½‘ç«™å†…å®¹éƒ¨åˆ†å æ¯”å·¨å¤§ï¼Œä½¿ç”¨åˆé€‚çš„å›¾åƒæ ¼å¼èƒ½æœ‰æ•ˆé™ä½ç½‘ç«™çš„æµé‡å¸¦å®½ï¼ŒåŒæ—¶é™ä½ç½‘ç»œä¼ è¾“å»¶æ—¶ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ•°å­—å›¾åƒåˆ†ç±»">æ•°å­—å›¾åƒåˆ†ç±»<a class="hash-link" href="#æ•°å­—å›¾åƒåˆ†ç±»" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åŸå§‹å›¾">åŸå§‹å›¾<a class="hash-link" href="#åŸå§‹å›¾" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Raw Imageï¼ŒåŸå§‹æ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡å•åç›¸æœºæ‹æ‘„å¾—åˆ°çš„åŸå§‹æ–‡ä»¶ï¼Œä¿ç•™å¤§é‡å›¾åƒç»†èŠ‚ï¼Œä½†æ˜¯æ‰€éœ€çš„æ–‡ä»¶å­˜å‚¨ç©ºé—´éå¸¸å¤§ï¼Œå¯ä»¥é€šè¿‡ ps ç­‰å›¾åƒç¼–è¾‘è½¯ä»¶å¤„ç†ï¼Œå¹¶ä¸”è½¬æ¢å‹ç¼©åå¾—åˆ°å…‰æ …å›¾ï¼Œç„¶åæ‰èƒ½åœ¨å…¶ä»–å›¾åƒæŸ¥çœ‹è½¯ä»¶æ­£å¸¸æ˜¾ç¤ºã€‚</p><p>å¸¸è§çš„åŸå§‹æ–‡ä»¶æ ¼å¼ä¸€èˆ¬æœ‰ BMPï¼Œadobe çš„ DNGï¼Œä½³èƒ½ç›¸æœºçš„ CR2 ç­‰ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å…‰æ …å›¾">å…‰æ …å›¾<a class="hash-link" href="#å…‰æ …å›¾" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Raster Imageï¼Œå…‰æ …å›¾ï¼Œæˆ–è€…å«ä½å›¾ï¼Œç”±åƒç´ ç»„æˆã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åƒç´ ">åƒç´ <a class="hash-link" href="#åƒç´ " title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>pixelï¼Œåƒç´ ï¼Œæ¯ä¸ªåƒç´ éƒ½æ˜¯åŸå§‹å›¾åƒçš„ä¸€ä¸ªé‡‡æ ·æ ·æœ¬ï¼Œä¹Ÿæ˜¯å›¾åƒçš„æœ€å°å¯ç¼–è¾‘å•å…ƒã€‚åœ¨è®¡ç®—æœºæ˜¾ç¤ºè®¾å¤‡ä¸Šï¼Œæ¯ä¸ªåƒç´ çš„é¢œè‰²æœ‰ä¸‰ä¸ªåˆ†é‡ï¼Œä¹Ÿå°±æ˜¯ä¸‰åŸè‰²ï¼ˆRGB-çº¢ç»¿è“ï¼‰ã€‚</p><p>é€šè¿‡æ”¹å˜ RGB æ¯ä¸ªåˆ†é‡çš„æƒé‡æ¥è¾¾åˆ°ç»„åˆæˆå…¶ä»–é¢œè‰²çš„ç›®çš„ï¼Œè¿™å°±éœ€è¦æåˆ°è‰²æ·±çš„æ¦‚å¿µã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è‰²æ·±">è‰²æ·±<a class="hash-link" href="#è‰²æ·±" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>è‰²æ·±æ˜¯ç¼–ç å•ä¸ªåƒç´ ç‚¹æ‰€ä½¿ç”¨çš„ bit æ•°ï¼Œä½¿ç”¨ bpp(bit per pixel)å•ä½ã€‚è‰²æ·±ä¸»è¦ç”¨æ¥è¡¨ç¤ºå•ä¸ªåƒç´ æ‰€èƒ½å±•ç¤ºçš„é¢œè‰²æ•°é‡ï¼Œå‘ˆ 2 çš„æŒ‡æ•°çº§å…³ç³»ï¼š</p><ul><li><p>1 bppï¼Œ2^1 = 2 ç§é¢œè‰²ï¼Œä¹Ÿå°±æ˜¯é»‘è‰²å’Œç™½è‰²</p></li><li><p>2 bppï¼Œ2^2 = 4 ç§é¢œè‰²</p></li><li><p>8 bppï¼Œ2^8 = 256 ç§é¢œè‰²</p></li><li><p>24 bppï¼Œ2^24 = 16777216 ç§é¢œè‰²ï¼Œèƒ½è¾¾åˆ°äººçœ¼è¯†åˆ«çš„é¢œè‰²èŒƒå›´</p></li><li><p>32 bppï¼Œåœ¨ 24 ä½è‰²æ·±çš„åŸºç¡€ä¸Šå¢åŠ  8 bit å•ç‹¬çš„ alpha åˆ†é‡ï¼Œç„¶åé€šè¿‡æ¯ä¸ªé¢œè‰²åˆ†é‡å’Œ  alpha åˆ†é‡å åŠ è¿ç®—æ”¹å˜å…¶é€æ˜åº¦ï¼›æ”¯æŒ alpha åˆ†é‡çš„å›¾åƒå¯ä»¥å•ç‹¬æ˜¾ç¤ºå‡ºå›¾åƒå†…éƒ¨é€æ˜åŒºåŸŸï¼Œä¾‹å¦‚å®ç°é€æ˜èƒŒæ™¯</p></li></ul><p><img loading="lazy" alt="image-20220830163435801" src="/assets/images/image-20220830163435801-5badfb8313e82ac98d9f381c619c8525.png" width="2104" height="1370" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="çŸ¢é‡å›¾">çŸ¢é‡å›¾<a class="hash-link" href="#çŸ¢é‡å›¾" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Vector Imageï¼ŒçŸ¢é‡å›¾ï¼ŒåŸºäºç¬›å¡å°”åæ ‡ç³»å†…çš„ç‚¹ç»„æˆçš„å‡ ä½•å›¾å½¢ï¼Œå¸¸è§çš„ä¹Ÿå°±æ˜¯ SVG æ ¼å¼çš„å›¾åƒã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä½å›¾å’ŒçŸ¢é‡å›¾çš„å¯¹æ¯”">ä½å›¾å’ŒçŸ¢é‡å›¾çš„å¯¹æ¯”<a class="hash-link" href="#ä½å›¾å’ŒçŸ¢é‡å›¾çš„å¯¹æ¯”" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ol><li>çŸ¢é‡å›¾çš„å‘ˆç°ä¸ä¼šå—åˆ°å›¾åƒå°ºå¯¸çš„å½±å“ï¼Œè¿™æ˜¯ç›¸å¯¹äºä½å›¾çš„ä¼˜åŠ¿ï¼›</li><li>çŸ¢é‡å›¾æ”¯æŒç¼–ç¨‹åŒ–åŠ¨æ€ä¿®æ”¹å…¶å›¾åƒæœ¬èº«çš„å°ºå¯¸ï¼Œé¢œè‰²ç­‰ç»†èŠ‚ï¼›</li><li>ä½å›¾æ¯”çŸ¢é‡å›¾å…·æœ‰æ›´ä¸°å¯Œçš„é¢œè‰²ç»†èŠ‚ï¼Œæ›´é€‚åˆè¡¨ç°çœŸå®ä¸–ç•Œçš„ç‰©å“å’Œè‰ºæœ¯åˆ›ä½œï¼Œè€ŒçŸ¢é‡å›¾å¾€å¾€åº”ç”¨äºå·¥ç¨‹åˆ¶å›¾æ–¹é¢ï¼›</li><li>ä»ä½å›¾åˆ°çŸ¢é‡å›¾çš„è½¬æ¢å«å›¾åƒè¿½è¸ªæˆ–å…‰æ …çŸ¢é‡åŒ–ï¼Œç›¸åï¼Œä»çŸ¢é‡å›¾è½¬æ¢æˆä½å›¾å«å…‰æ …åŒ–ã€‚</li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å›¾åƒå‹ç¼©æ¦‚å¿µ">å›¾åƒå‹ç¼©æ¦‚å¿µ<a class="hash-link" href="#å›¾åƒå‹ç¼©æ¦‚å¿µ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸ºä»€ä¹ˆéœ€è¦å‹ç¼©">ä¸ºä»€ä¹ˆéœ€è¦å‹ç¼©<a class="hash-link" href="#ä¸ºä»€ä¹ˆéœ€è¦å‹ç¼©" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä»è‰²æ·±å’Œå›¾åƒçš„åƒç´ æ•°å¯ä»¥è®¡ç®—å‡ºä¸€å¼ åŸå§‹å›¾åƒæ‰€éœ€çš„å­˜å‚¨ç©ºé—´å¤§å°ï¼š
$$
width <em> height </em> n (bpp) / 8 = <!-- -->[size]<!-- --> byte
$$
ä¾‹å¦‚ä¸€å¼  1920 * 1080 åƒç´ å®½é«˜çš„ 24 bpp å›¾åƒï¼Œæ‰€éœ€çº¦ 7.91 MBï¼Œé‚£ä¹ˆå¯¹äºæ ‡ç§° 500G çš„ç¡¬ç›˜ï¼Œå®Œå…¨å ç”¨çš„æƒ…å†µåªèƒ½å­˜å‚¨ 63254 å¼ è¯¥å›¾åƒï¼›ä¸ä»…å¦‚æ­¤ï¼Œè€ƒè™‘åˆ°å›¾åƒéœ€è¦åœ¨ä¸åŒè®¾å¤‡æˆ–ç½‘ç»œä¸Šä¼ è¾“ï¼Œè¿™ä¸ªä½“ç§¯ä¹Ÿæ˜¯æ— æ³•æ¥å—çš„ï¼Œæ‰€ä»¥å°±éœ€è¦å›¾åƒå‹ç¼©ç®—æ³•æ¥å‡å°å›¾åƒæ•°æ®çš„ä½“ç§¯ï¼ŒèŠ‚çº¦åœ¨è®¡ç®—æœºè®¾å¤‡ä¸Šå­˜å‚¨æˆæœ¬ä»¥åŠç½‘ç»œä¼ è¾“çš„å¸¦å®½æˆæœ¬ã€‚</p><p>å›¾åƒå‹ç¼©åˆ†ä¸ºæœ‰æŸå‹ç¼©å’Œæ— æŸå‹ç¼©ï¼š</p><ul><li>æ— æŸå‹ç¼©æŒ‡çš„æ˜¯è®¡ç®—æœºæ ¹æ®é€†å‘çš„è§£å‹ç¼©ç®—æ³•èƒ½å®Œå…¨æ¢å¤åŸå§‹å›¾åƒï¼Œ</li><li>æœ‰æŸå‹ç¼©åˆ™æ— æ³•ä»è§£å‹ç¼©ç®—æ³•æ¢å¤å¾—åˆ°åŸå§‹å›¾åƒï¼Œæ‰€ä»¥æœ‰æŸå‹ç¼©åçš„å›¾åƒæ˜¾ç¤ºæ•ˆæœå¯èƒ½åœ¨äººçœ¼è§‚å¯Ÿä¸Šæœ‰æ‰€é™ä½ã€‚</li></ul><p>ç»è¿‡å›¾åƒå‹ç¼©ç®—æ³•å¾—åˆ°çš„æ•°æ®è¿˜éœ€è¦æŒ‡å®šæ–‡ä»¶ç¼–ç æ ¼å¼ï¼Œä»¥ä¾¿äºå›¾åƒæ•°æ®åœ¨è®¡ç®—æœºç³»ç»Ÿä¸Šå­˜å‚¨ã€è¯»å–å’Œå…±äº«ï¼Œæ–‡ä»¶æ ¼å¼é€šå¸¸å’Œæ–‡ä»¶ååç¼€æ˜¯å¯¹åº”çš„ï¼Œä½†æ˜¯å…·ä½“çš„æ–‡ä»¶æ ¼å¼è¿˜æ˜¯è¦æ ¹æ®æ–‡ä»¶ç¼–ç çš„å¼€å¤´æ•°æ®æ¥ç¡®å®šã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å‹ç¼©æ¯”ç‡">å‹ç¼©æ¯”ç‡<a class="hash-link" href="#å‹ç¼©æ¯”ç‡" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å‹ç¼©è½¯ä»¶ä¸€èˆ¬éƒ½ä¼šæä¾›å‹ç¼©æ¯”é€‰æ‹©èŒƒå›´ï¼Œå‹ç¼©æ¯”æ˜¯ <strong>åŸå§‹æ•°æ®/å‹ç¼©åæ•°æ®</strong> è®¡ç®—å¾—åˆ°çš„æ¯”ç‡ï¼ŒåŒæ—¶ï¼Œä¹Ÿä¼šæä¾›å›¾åƒè´¨é‡å‚æ•°ä¾›é€‰æ‹©ï¼Œå¼€å‘è€…éœ€è¦æƒè¡¡è´¨é‡å’Œå›¾åƒä½“ç§¯é€‰æ‹©çš„æƒé‡ã€‚
$$
compression ratio = uncompressed size / compressed size
$$</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è§£ææ¨¡å¼">è§£ææ¨¡å¼<a class="hash-link" href="#è§£ææ¨¡å¼" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å›¾åƒç¼–è§£ç ç®—æ³•æœ‰ä¸¤ç§è§£ææ¨¡å¼ï¼ŒåŸºçº¿è§£æå’Œæ¸è¿›å¼è§£æï¼š</p><ul><li><p>åŸºçº¿è§£æï¼šå¦‚æœæ˜¯ä» web åŠ è½½ï¼Œéœ€è¦å®Œå…¨ä¸‹è½½å›¾åƒåä»ä¸Šå¾€ä¸‹è§£æå›¾åƒå¹¶æ˜¾ç¤ºï¼›</p></li><li><p>æ¸è¿›å¼è§£æï¼šæ¸è¿›å¼ç›¸æ¯”åŸºçº¿ç¼–ç å¼é‡‡ç”¨æ›´å¤æ‚çš„éš”è¡Œæ‰«æå¼ç¼–ç æ–¹å¼ï¼ŒåŒæ—¶è§£ç ä¹Ÿæ˜¯éš”è¡Œæ‰«æè§£ç ï¼Œæ‰€ä»¥ç›¸æ¯”åŸºçº¿è§£ç ä»ä¸Šå¾€ä¸‹è§£æé€æ¸å¾—åˆ°æ•´å¼ å›¾åƒçš„æ–¹å¼ï¼Œéš”è¡Œæ‰«æä¼šæ›´å¿«çœ‹åˆ°æ•´å¼ å›¾åƒçš„å¤§è‡´å½±åƒï¼›åº”ç”¨äº web æ–¹é¢ï¼Œæµè§ˆå™¨åœ¨ä¸‹è½½åˆ°å›¾åƒçš„éƒ¨åˆ†æ•°æ®åå°±èƒ½è§£æå‘ˆç°æ•´å¼ å›¾åƒçš„æ¨¡ç³Šç¼©å½±ï¼Œåç»­ç»§ç»­ä¸‹è½½æ•°æ®å†æ…¢æ…¢ç»˜åˆ¶æ•´å¼ å®Œæ•´çš„å›¾åƒï¼Œä»è€Œä¼˜åŒ–æ…¢é€Ÿç½‘ç»œç¯å¢ƒä¸‹çš„ç”¨æˆ·ä½“éªŒã€‚</p></li></ul><p>å‚è§åŸºçº¿ç¼–ç æ¨¡å¼ä¸‹çš„ JPEG å’Œæ¸è¿›å¼ç¼–ç æ¨¡å¼çš„ JPEG è§£æå¯¹æ¯”ï¼š<a href="https://nerds.sh/snippets/baseline-vs-progressive.html" target="_blank" rel="noopener noreferrer">https://nerds.sh/snippets/baseline-vs-progressive.html</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å›¾åƒå…¼å®¹æ€§å¤„ç†">å›¾åƒå…¼å®¹æ€§å¤„ç†<a class="hash-link" href="#å›¾åƒå…¼å®¹æ€§å¤„ç†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¦‚æœç½‘ç«™åœ¨ä½¿ç”¨ä¸€äº›è¾ƒæ–°çš„å›¾åƒå‹ç¼©æ ¼å¼ï¼ˆ<code>avif</code>ï¼Œ<code>webp</code>ç­‰ï¼‰æ—¶ï¼Œå¯èƒ½åœ¨ä¸åŒçš„æµè§ˆå™¨ä¸Šä¼šå‡ºç°å…¼å®¹æ€§é—®é¢˜ï¼Œè¿™æ—¶å€™å¯ä»¥é€šè¿‡ HTML5 çš„<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture" target="_blank" rel="noopener noreferrer"><code>picture</code>å…ƒç´ </a>æ¥è§£å†³ã€‚</p><p><code>picture</code>å…ƒç´ å†…éƒ¨å¯ä»¥åŒ…å«å¤šä¸ª<code>source</code>å…ƒç´ å’Œä¸€ä¸ª<code>img</code>å…ƒç´ ï¼Œæµè§ˆå™¨ä¼šé¦–å…ˆæ ¹æ®<code>source</code>çš„<code>media</code>æˆ–<code>type</code>ç­‰å±æ€§æ¥æ£€æµ‹æ˜¯å¦æ”¯æŒåŠ è½½æ”¹å›¾åƒï¼Œå¦‚æœä¸åŒ¹é…æˆ–è€…æµè§ˆå™¨æœ¬èº«ä¸æ”¯æŒ<code>picture</code>å…ƒç´ ï¼Œåˆ™ç›´æ¥é‡‡ç”¨<code>img</code>æŒ‡å®šçš„å›¾åƒã€‚</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">picture</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">source</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">srcset</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">photo.avif</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">image/avif</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">source</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">srcset</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">photo.webp</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">image/webp</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">img</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">src</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">photo.jpg</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">alt</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">photo</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">picture</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="source-å…ƒç´ ">source å…ƒç´ <a class="hash-link" href="#source-å…ƒç´ " title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>source</code>å…ƒç´ åŒ…å«ä»¥ä¸‹å±æ€§ï¼š</p><ul><li><code>media</code>ï¼šæŒ‡å®šåª’ä½“æŸ¥è¯¢æ¡ä»¶</li><li><code>type</code>ï¼šæŒ‡å®š <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types" target="_blank" rel="noopener noreferrer">MIME type</a>ï¼Œæµè§ˆå™¨ä¸æ”¯æŒå°±ä¼šè·³è¿‡</li><li><code>srcset</code>ï¼šæŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªå›¾åƒçš„ URLï¼Œå¤šä¸ªå›¾åƒçš„ URL ä½¿ç”¨é€—å·åˆ†éš”</li></ul><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">source</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">srcset</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">mdn-logo-wide.avif</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">media</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">(min-width: 600px)</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">image/avif</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="picture-å…ƒç´ çš„å…¼å®¹æ€§">picture å…ƒç´ çš„å…¼å®¹æ€§<a class="hash-link" href="#picture-å…ƒç´ çš„å…¼å®¹æ€§" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é™¤äº† IE éƒ½æ”¯æŒï¼ˆIE äº 2022-05-26 åœæ­¢ç»´æŠ¤ï¼‰</p><p><img loading="lazy" alt="image-20220830175646253" src="/assets/images/image-20220830175646253-b3d61acefb82319a9bd7d906a7903036.png" width="2726" height="896" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[webå›¾åƒæ ¼å¼å¯¹æ¯”ï¼ˆäºŒï¼‰]]></title>
            <link>https://icodex.me/webimage2</link>
            <guid>/webimage2</guid>
            <pubDate>Tue, 30 Aug 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[æœ‰æŸå‹ç¼©]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æœ‰æŸå‹ç¼©">æœ‰æŸå‹ç¼©<a class="hash-link" href="#æœ‰æŸå‹ç¼©" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æœ‰æŸå‹ç¼©ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„æ˜¯ JPEG å‹ç¼©ç®—æ³•å’Œæ–‡ä»¶æ ¼å¼ï¼Œä¸‹é¢æ¥æ•´ç†ä¸€ä¸‹ä¸‰ç§æœ‰æŸå‹ç¼©æ ¼å¼ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="jpeg">JPEG<a class="hash-link" href="#jpeg" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>JPEG æ˜¯ <strong>Joint Photographic Experts Group(è”åˆå›¾åƒä¸“å®¶ç»„)</strong> çš„é¦–å­—æ¯ç¼©å†™ï¼Œå…¶å‰èº«æ˜¯ <strong>â€”â€”</strong> <strong>Joint Bi-level Image Experts Group(è”åˆäºŒè¿›åˆ¶å›¾åƒä¸“å®¶ç»„)</strong>ï¼ŒJBIG è´Ÿè´£åˆ¶å®šäºŒè¿›åˆ¶å›¾åƒï¼ˆäºŒè¿›åˆ¶å›¾åƒçš„æ¯ä¸ªåƒç´ åªèƒ½ä½¿ç”¨ä¸€ä¸ª bit è¡¨ç¤ºé»‘è‰²æˆ–è€…ç™½è‰²ï¼Œä¹Ÿå°±æ˜¯é»‘ç™½å›¾åƒï¼‰çš„å‹ç¼©ç¼–ç æ ¼å¼ï¼Œä¾‹å¦‚ JBIG1 å’Œ JBIG2ï¼›è”åˆå›¾åƒä¸“å®¶ç»„è´Ÿè´£ç»´æŠ¤ JBIG æ ‡å‡†ä»¥åŠåˆ¶å®šå½©è‰²å›¾åƒå‹ç¼©æ–°çš„ç®—æ³•æ ‡å‡†ã€‚</p><p>å®é™…ä¸Šï¼Œè”åˆå›¾åƒä¸“å®¶ç»„äº 1992 å¹´å‘å¸ƒ JPEG æ ‡å‡†åè¿˜åˆ¶å®šäº†ä¸€ç³»åˆ—å…¶ä»–å‹ç¼©æ ‡å‡†ï¼Œä»¥ä¸‹æ˜¯ JPEG å®¶æ—çš„å›¾åƒå‹ç¼©æ ‡å‡†ï¼š</p><table><thead><tr><th></th><th>JPEG</th><th><div style="width:290px">JPEG 2000</div></th><th><div style="width:290px">JPEG LSï¼ˆlosslessï¼‰</div></th><th>JPEG XRï¼ˆextended rangeï¼‰</th><th>JPEG XTï¼ˆextended tone still imageï¼‰</th><th><div style="width:290px">JPEG XSï¼ˆextended extra smallï¼‰</div></th><th><div style="width:290px">JPEG XLï¼ˆextended longtermï¼‰</div></th></tr></thead><tbody><tr><td>å‘å¸ƒæ—¶é—´</td><td>1992</td><td>1997</td><td>1998</td><td>2011</td><td>2015</td><td>2019</td><td>2022</td></tr><tr><td>æ–‡ä»¶æ ¼å¼</td><td>JFIFï¼ŒExifï¼ŒTIFF</td><td>JP2ï¼ŒJPX</td><td></td><td>JXR</td><td>JFIF</td><td>JXS</td><td>JXL</td></tr><tr><td>æ–‡ä»¶åç¼€å</td><td><code>.jpeg</code>ï¼Œ<code>.jpg</code>ï¼Œ<code>.jfif</code>ï¼Œ<code>.jif</code>ï¼Œ<code>.jpe</code>ï¼Œ<code>.tif</code></td><td><code>jp2</code>, <code>.j2k</code>, <code>.jpf</code>, <code>.jpm</code>, <code>.jpg2</code>, <code>.j2c</code>, <code>.jpc</code>, <code>.jpx</code>, <code>.mj2</code></td><td><code>.jls</code></td><td><code>.jxr</code>ï¼Œ<code>.hdp</code>ï¼Œ<code>.wdp </code></td><td><code>.jpeg</code>ï¼Œ<code>.jpg</code>ï¼Œ<code>.jfif</code>ï¼Œ<code>.jif</code>ï¼Œ<code>.jpe</code></td><td><code>.jxs</code></td><td><code>.jxl</code></td></tr><tr><td>æœ‰æŸ/æ— æŸ</td><td>æœ‰æŸï¼Œä¹Ÿæ”¯æŒæ— æŸä½†ä¸å¸¸ç”¨</td><td>æœ‰æŸï¼Œä¹Ÿæ”¯æŒæ— æŸä½†ä¸å¸¸ç”¨</td><td>æ— æŸ</td><td>æœ‰æŸ/æ— æŸ</td><td>æ— æŸ</td><td>æœ‰æŸ</td><td>æœ‰æŸ/æ— æŸ</td></tr><tr><td>æœ€å¤§å›¾åƒåˆ†è¾¨ç‡</td><td>(2^16 - 1) * (2^16 - 1)</td><td>(2^32 - 1) * (2^32 - 1)</td><td></td><td></td><td></td><td></td><td>(2^30 - 1) * (2^30 - 1)</td></tr><tr><td>è‰²æ·±</td><td>8 bpp</td><td>32 bpp</td><td></td><td>16 bpp</td><td>8 bpp</td><td>16 bpp</td><td>24 bppï¼Œ32 bpp</td></tr><tr><td>æ˜¯å¦æ”¯æŒ alpha é€šé“</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td></td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>MIME type</td><td><code>image/jpeg</code></td><td><code>image/jp2</code>, <code>image/jpx</code>, <code>image/jpm</code>,</td><td></td><td><code>image/jxr</code>ï¼Œ<code>image/vnd.ms-photo</code></td><td><code>image/jpeg</code></td><td><code>image/jxsc</code>, <code>video/jxsv</code></td><td><code>image/jxl</code></td></tr><tr><td>å…¼å®¹æ€§</td><td>å…¨å¹³å°</td><td>åªæœ‰ safari æ”¯æŒ</td><td>å·²çŸ¥ Chrome æœ‰æŸ¥çœ‹åŒ»å­¦æˆåƒçš„æ’ä»¶ â€”â€” <a href="https://chrome.google.com/webstore/detail/dicom-medical-image-reade/phakdkeobphiapdoggpcdilgmjbepnfg?hl=ro" target="_blank" rel="noopener noreferrer">medical-image</a>ï¼Œå…¶ä»–å¹³å°æœªçŸ¥</td><td>åªæœ‰ IE æ”¯æŒ</td><td>æš‚æ— å¹³å°ä½¿ç”¨</td><td>æš‚æ— å¹³å°ä½¿ç”¨</td><td>æš‚æ— å¹³å°æ”¯æŒï¼Œä½†æ˜¯ chrome å’Œ firefox ä» 90 ç‰ˆæœ¬è¿›å…¥æµ‹è¯•é˜¶æ®µï¼Œå¯ä»¥å¼€å¯å®éªŒæ€§ç‰¹æ€§</td></tr><tr><td>å¯¹æ¯”</td><td></td><td>ç›¸æ¯” JPEG æ ‡å‡†ï¼ŒJPEG-2000 ç€é‡æå‡ç æµçš„çµæ´»æ€§ç»„ç»‡ï¼Œä½¿å¾—å›¾ç‰‡ä¼ è¾“å¯ä»¥æ¸è¿›å¼åŠ è½½ï¼šä¹Ÿå°±æ˜¯ç”¨æˆ·åœ¨æ”¶åˆ°æ•´ä¸ªæ–‡ä»¶çš„ä¸€å°éƒ¨åˆ†åï¼ŒæŸ¥çœ‹è€…å¯ä»¥çœ‹åˆ°æœ€ç»ˆå›¾ç‰‡çš„è´¨é‡è¾ƒä½çš„ç‰ˆæœ¬ï¼Œç„¶åé€šè¿‡ä»æºä¸‹è½½æ›´å¤šæ•°æ®ä½ï¼Œè´¨é‡ä¼šé€æ¸æé«˜ã€‚</td><td>JPEG LS ä¸»è¦ä¼˜åŒ–äº† JPEG æ— æŸå‹ç¼©éƒ¨åˆ†çš„ç®—æ³•ï¼Œå¯ä»¥å®ç° 2:1 çš„å‹ç¼©æ¯”ï¼Œå¹¶ä¸”æé«˜äº†ç¼–è§£ç é€Ÿåº¦ï¼Œä¸»è¦åº”ç”¨äºåŒ»å­¦æˆåƒé¢†åŸŸï¼Œä¾‹å¦‚ X å…‰ç‰‡ã€‚</td><td>ä¸ JPEG ç›¸æ¯”ï¼ŒJPEG XR æ–‡ä»¶æ ¼å¼æ”¯æŒæ›´é«˜çš„å‹ç¼©æ¯”ï¼Œä»¥å¯¹å…·æœ‰åŒç­‰è´¨é‡çš„å›¾åƒè¿›è¡Œç¼–ç ã€‚</td><td></td><td>JPEG XS è¢«ç§°ä¸ºè§†è§‰æ— æŸä½å»¶è¿Ÿè½»é‡çº§å›¾åƒï¼Œä¸»è¦é€‚ç”¨äºç½‘ç»œç æµä¼ è¾“åœºæ™¯ä¸‹çš„å›¾åƒå‹ç¼©ï¼Œå› ä¸ºå…¶å…·æœ‰è¶…é«˜é€Ÿçš„ç¼–è§£ç å‹ç¼©ç®—æ³•å’Œé«˜è¾¾ 10:1 çš„å‹ç¼©æ¯”ï¼ŒåŒæ—¶å…¶ç¼–ç å™¨å¯ä»¥æ ¹æ®å¸¦å®½åŠ¨æ€è°ƒæ•´å‹ç¼©æ¯”æ¥å®Œç¾åŒ¹é…å¯ç”¨å¸¦å®½ï¼Œä»è€Œå‡å°‘å›¾åƒä¼ è¾“å»¶è¿Ÿæ—¶é—´ã€‚</td><td>ç›®å‰è¢«å›¾åƒä¸“å®¶ç»„çº³å…¥æ ‡å‡†ï¼Œæ—¨åœ¨æ›¿ä»£å½“å‰çš„ JPEG å‹ç¼©æ ‡å‡†ï¼Œæœ‰æŸå‹ç¼©ç›¸æ¯”ç›®å‰çš„ JPEG å¯ä»¥å‡å°çº¦ 60% çš„ä½“ç§¯ï¼ŒåŒæ—¶ä¼˜åŒ–äº†é«˜å‹ç¼©æ¯”ä¸‹çš„å›¾åƒè´¨é‡ï¼Œæ— æŸå‹ç¼©ç›¸æ¯” PNG å‡å°‘ 35% çš„ä½“ç§¯ã€‚</td></tr><tr><td>å¼€æºåº“</td><td><a href="https://github.com/thorfdbg/libjpeg" target="_blank" rel="noopener noreferrer">libjpeg</a>ï¼šå®˜æ–¹äº 1992 å‘å¸ƒçš„ç¼–è§£ç  jpeg åº“<br><a href="https://github.com/libjpeg-turbo/libjpeg-turbo" target="_blank" rel="noopener noreferrer">libjpeg-turbo</a>ï¼šç¤¾åŒºåŸºäº libjpeg å®ç°çš„å¢å¼ºç‰ˆæœ¬ï¼Œäº 2010 å‘å¸ƒï¼Œç›¸æ¯”  libjpeg ï¼Œç¼–ç é€Ÿåº¦æå‡ 2~6 å€ï¼Œå› æ­¤ä½¿ç”¨æ›´å¹¿æ³›ï¼Œä¾‹å¦‚ <a href="https://chromium.googlesource.com/chromium/deps/libjpeg_turbo/" target="_blank" rel="noopener noreferrer">chromium</a><br><a href="https://github.com/mozilla/mozjpeg" target="_blank" rel="noopener noreferrer">mozjpeg</a>ï¼šmozilla å¼€å‘è€…äº 2014 æ¨å‡ºçš„ç‰ˆæœ¬ï¼ŒåŸºäº libjpeg-turboï¼Œç›¸æ¯” libjpeg-turbo å‹ç¼©çš„æ–‡ä»¶ä½“ç§¯å‡å° 10% å·¦å³<br><a href="https://github.com/google/guetzli" target="_blank" rel="noopener noreferrer">Guetzli</a>ï¼šgoogle äº 2016 å¹´æ¨å‡ºçš„åŸºäº libjpeg å®ç°çš„ç‰ˆæœ¬ï¼Œç›¸æ¯” libjpeg å‹ç¼©å¾—åˆ°çš„æ–‡ä»¶ä½“ç§¯å‡å° 20~30%</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>å¤‡æ³¨</td><td>TIFFï¼ˆTag Image File Formatï¼‰ï¼Œæ ‡è®°å›¾åƒæ–‡ä»¶æ ¼å¼ï¼Œå¯ä»¥å­˜å‚¨ä¸€å¼ æˆ–è€…å¤šå¼ ä½å›¾ï¼Œå¯ä»¥ä¸å‹ç¼©ï¼Œæˆ–è€…æ— æŸå‹ç¼©ã€æœ‰æŸå‹ç¼©ï¼› ä½†æ˜¯é€šå¸¸æ–‡ä»¶ä½“ç§¯éƒ½æ¯”è¾ƒå¤§ï¼Œå› æ­¤å¾ˆå°‘ç”¨äº webï¼Œæµè§ˆå™¨ä¹Ÿåªæœ‰ Safari æ”¯æŒè¯»å–è¿™ç§æ–‡ä»¶æ ¼å¼ã€‚<br>Exifï¼ˆExchange Image File Formatï¼‰ æ˜¯æ‹“å±•äº TIFF çš„ä¸€ç§æ–‡ä»¶æ ¼å¼ï¼Œå¯ç”¨äºç¼–ç å‹ç¼©åçš„ JFIF æ–‡ä»¶ï¼Œ åŒæ—¶ä¹Ÿå¯ä»¥ç”¨äºéŸ³é¢‘æ–‡ä»¶çš„ç¼–ç ã€‚</td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ico">ICO<a class="hash-link" href="#ico" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ICOï¼Œiconï¼Œæœ€åˆç”±å¾®è½¯å…¬å¸å¼€å‘ç”¨äº windows ç³»ç»Ÿåº”ç”¨ç¨‹åºæ˜¾ç¤ºåœ¨æ¡Œé¢ã€ä»»åŠ¡æ ä»¥åŠæ–‡ä»¶ç®¡ç†å™¨å†…éƒ¨çš„å›¾æ ‡ï¼Œåœ¨ web ä¸Šå¯ä»¥ç”¨äº faviconï¼ˆfavorite iconï¼‰ã€‚</p><table><thead><tr><th>å±æ€§</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>å‘å¸ƒæ—¶é—´</td><td>1999ï¼Œ2010 å¹´é€šè¿‡ html5 è§„èŒƒæ”¯æŒ<code>link</code>çš„<code>rel=icon</code>å±æ€§</td></tr><tr><td>MIME</td><td><code>image/vnd.microsoft.icon</code>ï¼Œ<code>image/x-icon</code></td></tr><tr><td>æ–‡ä»¶ååç¼€</td><td><code>.ico</code></td></tr><tr><td>è‰²æ·±</td><td>8 bppï¼Œ24 bppï¼Œ32 bpp</td></tr><tr><td>æœ€å¤§å°ºå¯¸</td><td>256Ã—256</td></tr><tr><td>å…¼å®¹æ€§</td><td>å…¨å¹³å°</td></tr></tbody></table><p>favicon é€šå¸¸ç”¨äºæ˜¾ç¤ºåœ¨æµè§ˆå™¨æ ‡ç­¾é¡µ titleã€æ”¶è—å¤¹ç­‰ä½ç½®çš„å›¾æ ‡ï¼Œé€šè¿‡ HTML è§„èŒƒå®šä¹‰çš„<code>link</code>æ ‡ç­¾å’Œ<code>rel=icon</code>æˆ–è€…<code>rel=apple-touch-icon</code>æ¥åµŒå…¥åˆ°é¡µé¢ä»£ç ä¸­ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡<code>sizes</code>å±æ€§æ¥æä¾›è·¨æµè§ˆå™¨æ”¯æŒã€‚</p><p>æµè§ˆå™¨é»˜è®¤æ”¯æŒçš„å°ºå¯¸è¦æ±‚å¦‚ä¸‹ï¼š</p><ul><li><p>Chrome desktopï¼š32Ã—32ï¼ˆå¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½é»˜è®¤æ”¯æŒ 32Ã—32ï¼‰</p></li><li><p>Safari desktopï¼š32Ã—32</p></li><li><p>IOS Safariï¼š180Ã—180</p></li><li><p>Android Chromeï¼š196Ã—196</p></li><li><p>IEï¼š16Ã—16, 32Ã—32, 48Ã—48</p></li></ul><div class="language-HTML codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-HTML codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;link rel="icon" sizes="32x32" href="icon.png"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;link rel="icon" sizes="180x180" href="icon-180x180.png"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;link rel="apple-touch-icon" sizes="180x180" href="icon.png"&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;link rel="icon" href="/favicon.svg" type="image/svg+xml"&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç›®å‰ favicon ä½¿ç”¨ PNG çš„æ›´å¤šï¼Œä½†æ˜¯æœªæ¥çš„è¶‹åŠ¿æ˜¯ç”¨ SVG æ ¼å¼ï¼Œå› ä¸º SVG æ²¡æœ‰å°ºå¯¸é™åˆ¶ï¼Œä¸å—è®¾å¤‡åˆ†è¾¨ç‡å½±å“ä¸”é€šå¸¸ä½“ç§¯å°äº PNGï¼Œè€Œä¸”æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹å…¶æ ·å¼ï¼Œä¸è¶³ç‚¹æ˜¯ svg favicon çš„å…¼å®¹æ€§éå¸¸ä¸å¥½ï¼Œç›®å‰ä»…åœ¨ä½¿ç”¨ chromium å†…æ ¸çš„æµè§ˆå™¨æ”¯æŒã€‚</p><p><img loading="lazy" alt="image-20220830171340802" src="/assets/images/image-20220830171340802-fdf44a4e29c301efbad00f5ce8c9e199.png" width="2600" height="1020" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="webp">Webp<a class="hash-link" href="#webp" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Webpï¼ˆè¯»ä½œweppyï¼‰ï¼Œwebp æ”¯æŒæœ‰æŸå‹ç¼©ï¼Œä½†æ˜¯æœ‰æŸå‹ç¼©æ•ˆæœåœ¨æŸäº›æ—¶å€™è¦å¼±äº JPEGï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°ï¼Œè§åé¢æ–‡ç« æ— æŸå‹ç¼©çš„åˆ†æã€‚</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[æ··åˆå†…å®¹è¯·æ±‚é™åˆ¶]]></title>
            <link>https://icodex.me/mixcontent</link>
            <guid>/mixcontent</guid>
            <pubDate>Tue, 12 Jul 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[èƒŒæ™¯]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="èƒŒæ™¯">èƒŒæ™¯<a class="hash-link" href="#èƒŒæ™¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è¿™ä¸¤å¤©åˆé‡åˆ°ä¸€ä¸ªå›¾ç‰‡é—®é¢˜ï¼Œå…·ä½“å°±æ˜¯åœ¨ HTTPS åè®®ç½‘é¡µè¯·æ±‚å®Œçš„ HTTP å›¾ç‰‡ä¼šè¢«é™åˆ¶ä¸‹è½½ï¼Œè¿™...ï¼Œweb é™æ€èµ„æºçš„é—®é¢˜è¿˜æŒºå¤šå‘ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä»€ä¹ˆæ˜¯æ··åˆå†…å®¹">ä»€ä¹ˆæ˜¯æ··åˆå†…å®¹<a class="hash-link" href="#ä»€ä¹ˆæ˜¯æ··åˆå†…å®¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Mixed Content æ¥è‡ªäº W3C è§„èŒƒçš„å®šä¹‰ â€”â€” <a href="https://w3c.github.io/webappsec-mixed-content/" target="_blank" rel="noopener noreferrer">æ··åˆå†…å®¹ (ä»¥ä¸‹ç®€ç§°è§„èŒƒ)</a>ï¼Œç®€å•æ¥è¯´ï¼Œå½“ä½¿ç”¨ HTTPS è¯·æ±‚çš„ç½‘é¡µä¸­åŒ…å«å…¶ä»–é€šè¿‡ HTTP è¯·æ±‚çš„èµ„æºæ—¶ï¼Œè¿™äº›é€šè¿‡ HTTP è¯·æ±‚çš„å†…å®¹å°±å±äº Mixed Contentã€‚</p><p>W3C çš„è¿™ç¯‡è§„èŒƒä¸å»ºè®®æµè§ˆå™¨ä¸€å¾‹é˜»æ­¢æ‰€æœ‰æ··åˆå†…å®¹çš„è¯·æ±‚ï¼Œè§†æƒ…å†µè€Œå®šï¼Œå°†æ··åˆå†…å®¹åˆ†ä¸ºä¸¤ç§ï¼š</p><ul><li>å¯å‡çº§çš„æ··åˆå†…å®¹è¯·æ±‚ï¼Œä¸€èˆ¬ä¹Ÿè¢«ç§°ä¸ºè¢«åŠ¨/æ˜¾ç¤ºæ··åˆå†…å®¹</li><li>æ— æ³•å‡çº§çš„æ··åˆå†…å®¹è¯·æ±‚ï¼Œä¸€èˆ¬ä¹Ÿè¢«ç§°ä¸ºä¸»åŠ¨å‹æ··åˆå†…å®¹</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è¢«åŠ¨å‹æ··åˆå†…å®¹">è¢«åŠ¨å‹æ··åˆå†…å®¹<a class="hash-link" href="#è¢«åŠ¨å‹æ··åˆå†…å®¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è¢«åŠ¨æ··åˆå†…å®¹ä¸»è¦æ˜¯<code>img</code>ï¼Œ<code>video</code>ï¼Œ<code>audio</code>è¿™äº›å…ƒç´ é€šè¿‡<code>src</code>å±æ€§æŒ‡å®šçš„ URL å‘èµ·çš„è¯·æ±‚ï¼Œå…¶æœ¬èº«æ—¢ä¸å—åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œä¹Ÿä¸ä¼šå—åˆ°è¿™é‡Œæ··åˆå†…å®¹çš„è®¿é—®é™åˆ¶ï¼Œå¹¶ä¸”æµè§ˆå™¨è¿˜ä¼šè‡ªåŠ¨å¸®åŠ©å®Œæˆ HTTPS è®¿é—®çš„å‡çº§ï¼Œç„¶ååœ¨æµè§ˆå™¨æ§åˆ¶å°ç»™å‡ºä¸€æ¡å¦‚ä¸‹æç¤ºå†…å®¹ï¼Œå…·ä½“çš„å¯ä»¥ç§»æ­¥è¿™ä¸ªç½‘é¡µè§‚å¯Ÿç»†èŠ‚ â€”â€” <a href="https://mixed-content.vercel.app/" target="_blank" rel="noopener noreferrer">mixed content example (mixed-content.vercel.app)</a></p><p><img loading="lazy" alt="image-20220719232438771" src="/assets/images/image-20220719232438771-ca4a85f6bbe1afe328e881008b348bc3.png" width="918" height="109" class="img_ev3q"></p><p>å¦‚æœèµ„æºæœ¬èº«æ— æ³•é€šè¿‡ HTTPS è®¿é—®ï¼Œé‚£ä¹ˆèµ„æºä¸ä¼šè¢«åŠ è½½å¹¶ä¸”æŠ¥é”™ã€‚</p><p>W3C ä¹Ÿæœ‰ä¸ªå“åº”å¤´æ¥é™åˆ¶æ‰€æœ‰ HTTPS ç«™ç‚¹å†…çš„ HTTP è¯·æ±‚ â€”â€” <code>Content-Security-Policy: block-all-mixed-content</code>ï¼Œå¯ä»¥é€šè¿‡<code>meta</code>æ ‡ç­¾æŒ‡å®šï¼Œä¸è¿‡è¿™ä¸ªè¯·æ±‚å¤´æ”¯æŒçš„æµè§ˆå™¨æ¯”è¾ƒå°‘ï¼Œç›®å‰è¿™ä¸ªå±æ€§å€¼æ˜¯è¢«å¼ƒç”¨äº†ã€‚</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">meta</span><span class="token tag" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)">  </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">http-equiv</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">Content-Security-Policy</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)">  </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">content</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">block-all-mixed-content</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image-20220719233328676" src="/assets/images/image-20220719233328676-44a73759311d0c48083d1cc5c82a315c.png" width="1702" height="435" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸»åŠ¨å‹æ··åˆå†…å®¹">ä¸»åŠ¨å‹æ··åˆå†…å®¹<a class="hash-link" href="#ä¸»åŠ¨å‹æ··åˆå†…å®¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸»åŠ¨æ€§æ··åˆå†…å®¹æ˜¯æŒ‡å¯ä»¥ç›´æ¥è·å–å¹¶ä¿®æ”¹é¡µé¢æ•°æ®çš„è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯<code>XMLHttpRequest</code>å’Œ<code>fetch</code>å‘èµ·çš„ HTTP è¯·æ±‚ï¼Œè¿™äº›è¯·æ±‚ä¼šè¢«æµè§ˆå™¨ç›´æ¥æ‹¦æˆªï¼Œå¹¶ä¸ä¼šå‘èµ·è·¨åŸŸè¯·æ±‚ï¼Œç„¶ååœ¨æ§åˆ¶å°æç¤ºæŠ¥é”™ä¿¡æ¯ã€‚</p><p><img loading="lazy" alt="image-20220720220835786" src="/assets/images/image-20220720220835786-f1599c75dacdbcd21b4489c24c142e99.png" width="784" height="277" class="img_ev3q"></p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>è­¦å‘Š</div><div class="admonitionContent_S0QG"><p>ä¸»åŠ¨å‹æ··åˆå†…å®¹æ— æ³•é€šè¿‡å‰ç«¯è§£å†³ï¼Œåªèƒ½åç«¯ç»Ÿä¸€å‡çº§ HTTPSï¼Œæˆ–è€…å¯¹äºé¡µé¢èƒ½å¤Ÿé€šè¿‡ HTTPS è¯·æ±‚çš„å†…å®¹ï¼Œæ‰‹åŠ¨ä¿®æ”¹è¯·æ±‚ URL çš„åè®®ã€‚</p></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ç§æœ‰ç½‘ç»œè®¿é—®é™åˆ¶]]></title>
            <link>https://icodex.me/pna</link>
            <guid>/pna</guid>
            <pubDate>Sat, 02 Jul 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[èƒŒæ™¯]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="èƒŒæ™¯">èƒŒæ™¯<a class="hash-link" href="#èƒŒæ™¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸Šä¸€ç¯‡ blog æåˆ°äº†è·¨åŸŸè®¿é—®å›¾åƒèµ„æºå¼•èµ·çš„ canvas æ±¡æŸ“çš„é—®é¢˜ï¼Œå…¶å®å½“æ—¶æˆ‘åœ¨æŸ¥çœ‹è·¨åŸŸè¯·æ±‚åˆ°çš„å›¾åƒèµ„æºæ—¶ï¼Œè¿˜æ— æ„ä¸­å‘ç°äº†ä¸€ä¸ªæ–°çš„ HTTP å“åº”å¤´<code>Access-Control-Allow-Private-Network</code>ï¼Œè¿™ç¯‡æ–‡ç« å°±æ¥ç®€å•æ¢è®¨ä¸€ä¸‹è¿™ä¸ªéå¸¸æ–°çš„è·¨åŸŸè¯·æ±‚çš„ç‰¹æ€§ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="access-control-allow-private-network">Access-Control-Allow-Private-Network<a class="hash-link" href="#access-control-allow-private-network" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>Access-Control-Allow-Private-Network</code>æ˜¯ W3C ç¤¾åŒºè‰æ¡ˆ <a href="https://wicg.github.io/private-network-access/" target="_blank" rel="noopener noreferrer">Private Network Access è‰æ¡ˆ</a>ï¼ˆä»¥ä¸‹ç®€ç§°<code>PNA</code>ï¼‰åˆ¶å®šçš„æ–°çš„ HTTP å“åº”å¤´å­—æ®µï¼Œè¦æ±‚æµè§ˆå™¨åœ¨åˆ¤å®šä»å…¬å…±ç½‘ç»œè¯·æ±‚ç§æœ‰ç½‘ç»œæˆ–è€…æœ¬åœ°ç½‘ç»œçš„è·¨åŸŸè¯·æ±‚åœºæ™¯æ—¶ï¼Œå¿…é¡»å…ˆå‘é€é¢„æ£€è¯·æ±‚ï¼ŒåŒæ—¶æºå¸¦<code>Access-Control-Request-Private-Network: true</code>è¯·æ±‚å¤´ï¼Œåªæœ‰å½“æœåŠ¡ç«¯æºå¸¦äº†<code>Access-Control-Allow-Private-Network: true</code>å“åº”å¤´å­—æ®µæ—¶ï¼Œæ‰èƒ½ç»§ç»­å‘é€åŸå§‹è¯·æ±‚ï¼Œå¦åˆ™æç¤ºè·¨åŸŸé”™è¯¯ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä»€ä¹ˆæ˜¯ç§æœ‰ç½‘ç»œè¯·æ±‚">ä»€ä¹ˆæ˜¯ç§æœ‰ç½‘ç»œè¯·æ±‚<a class="hash-link" href="#ä»€ä¹ˆæ˜¯ç§æœ‰ç½‘ç»œè¯·æ±‚" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>PNA</code>è‰æ¡ˆå°†åŸŸå<code>ip</code>åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ç±»å‹ï¼Œä»<code>public ip</code>è¯·æ±‚<code>private ip</code>æˆ–è€…<code>localhost</code>ï¼›ä»¥åŠä»<code>private ip</code>è¯·æ±‚<code>localhost</code>è¿™ä¸¤ç§æƒ…å†µéƒ½å±äºç§æœ‰ç½‘ç»œè¯·æ±‚çš„èŒƒå›´ï¼Œæµè§ˆå™¨è¿˜å¯ä»¥æ‹“å±•è¿™ä¸ª<code>ip</code>çš„é™å®šèŒƒå›´ã€‚</p><ul><li><code>local</code>ï¼šæœ¬åœ°<code>ip</code></li><li><code>private</code>ï¼šç§æœ‰<code>ip</code></li><li><code>public</code>ï¼šå…¬å…±<code>ip</code></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç§æœ‰åœ°å€æ®µ">ç§æœ‰åœ°å€æ®µ<a class="hash-link" href="#ç§æœ‰åœ°å€æ®µ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸€èˆ¬æ¥è¯´<code>private ip</code>å’Œ<code>local ip</code>ä¹Ÿå°±æ˜¯ä»¥ä¸‹è¿™äº›ï¼ŒåŒ…æ‹¬äº†ä¸€äº›<code>ipv6</code>çš„åœ°å€æ®µã€‚</p><table><thead><tr><th>ip</th><th>ip ç±»å‹</th></tr></thead><tbody><tr><td><code>127.0.0.0/8</code></td><td><code>local</code></td></tr><tr><td><code>10.0.0.0/8</code></td><td><code>private</code></td></tr><tr><td><code>172.16.0.0/12</code></td><td><code>private</code></td></tr><tr><td><code>192.168.0.0/16</code></td><td><code>private</code></td></tr><tr><td><code>169.254.0.0/16</code></td><td><code>private</code></td></tr><tr><td><code>::1/128</code></td><td><code>local</code></td></tr><tr><td><code>fc00::/7</code></td><td><code>private</code></td></tr><tr><td><code>fe80::/10</code></td><td><code>private</code></td></tr></tbody></table><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>ä¿¡æ¯</div><div class="admonitionContent_S0QG"><p>ipv4 é‡‡ç”¨ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºï¼Œä½¿ç”¨<code>.</code>åˆ†ä¸º 4 æ®µï¼Œæ¯æ®µéƒ½ç”± 1 ä¸ªå­—èŠ‚ 8 ä½äºŒè¿›åˆ¶æ•°ç»„æˆï¼Œè½¬æ¢æˆ 10 è¿›åˆ¶è¡¨ç¤ºèŒƒå›´å°±æ˜¯ 0~255</p><p><img loading="lazy" alt="image-20220703213259809" src="/assets/images/image-20220703213259809-b35db4ad4d4e4bc1a85beb1533056522.png" width="627" height="355" class="img_ev3q"></p><p>ipv6 é‡‡ç”¨å†’åˆ†åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œä½¿ç”¨<code>:</code>åˆ†ä¸º 8 æ®µï¼Œæ¯æ®µç”± 2 ä¸ªå­—èŠ‚ 16 ä½äºŒè¿›åˆ¶æ•°ç»„æˆï¼Œä½†æ˜¯è¡¨ç¤ºçš„æ—¶å€™é‡‡ç”¨ 16 è¿›åˆ¶çš„å½¢å¼å–å››åˆä¸€å¾—åˆ° 4 ä¸ª 16 è¿›åˆ¶çš„æ•°ï¼›å¦‚æœä¸€ä¸ªæ®µå†…éƒ½æ˜¯<code>0</code>ï¼Œé‚£ä¹ˆè¯¥æ®µå¯ä»¥ç®€å†™æˆä¸€ä¸ª<code>0</code>è¡¨ç¤ºï¼›åŒæ—¶å¦‚æœè¿ç»­ä¸¤æ®µä»¥ä¸Šéƒ½æ˜¯<code>0</code>ï¼Œå¯ä»¥ç®€å†™æˆ<code>::</code>æ¥è¡¨ç¤ºæ‰€æœ‰ä¸º<code>0</code>çš„æ®µã€‚</p><p><img loading="lazy" alt="image-20220703215337219" src="/assets/images/image-20220703215337219-656efd9c5ee60984ea0825dd99f6c825.png" width="724" height="376" class="img_ev3q"></p></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="chrome-è¿›å±•">chrome è¿›å±•<a class="hash-link" href="#chrome-è¿›å±•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä» <a href="https://developer.chrome.com/blog/private-network-access-update/#timeline" target="_blank" rel="noopener noreferrer">Chrome è§„åˆ’çš„æ—¶é—´çº¿</a>æ¥çœ‹:</p><ul><li>Chrome 94 æ¨å‡ºæµ‹è¯•ç‰ˆï¼Œå¼€å§‹åœ¨æ§åˆ¶å°å¯¹ç§æœ‰ç½‘ç»œè¯·æ±‚æ˜¾ç¤ºè­¦å‘Šæç¤ºï¼›</li><li>Chrome 102 ç‰ˆæœ¬æµ‹è¯•ç»“æŸï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯è¯•éªŒç‰¹æ€§ï¼›</li><li>Chrome 105 ç‰ˆæœ¬æ­£å¼æ¨å‡º</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æµ‹è¯•æ•ˆæœ">æµ‹è¯•æ•ˆæœ<a class="hash-link" href="#æµ‹è¯•æ•ˆæœ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒChrome 102 ç¨³å®šç‰ˆåé»˜è®¤ä¸ä¼šæ”¯æŒ<code>PNA</code>ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ä¸å¼€å¯çš„æ•ˆæœã€‚</p><p>æˆ‘è¿™é‡Œä½¿ç”¨äº† Chrome 103 ç¨³å®šç‰ˆæµ‹è¯•äº†<code>PNA</code>ç‰¹æ€§ï¼Œæµ‹è¯•æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åœ¨ GitHub æ–°å»ºä¸€ä¸ªåªåŒ…å«ä»¥ä¸‹ç½‘é¡µçš„ä»“åº“ï¼Œä¹Ÿå°±æ˜¯ç‚¹å‡»<code>fetch</code>å°±ä¼šè¯·æ±‚æœ¬åœ°ç½‘ç»œçš„<code>index.html</code>æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ vercel å‘å¸ƒåˆ°å…¬å…±ç½‘ç»œï¼›</li></ol><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token doctype punctuation" style="color:rgb(248, 248, 242)">&lt;!</span><span class="token doctype doctype-tag">DOCTYPE</span><span class="token doctype"> </span><span class="token doctype name">html</span><span class="token doctype punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">html</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">lang</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">en</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">head</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">title</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">Home</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">title</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">meta</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">UTF-8</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">meta</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">viewport</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">content</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">width=device-width</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">head</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">body</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">a</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">href</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">javascript:;</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag special-attr attr-name" style="color:rgb(241, 250, 140)">onclick</span><span class="token tag special-attr attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag special-attr attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag special-attr attr-value value javascript language-javascript function" style="color:rgb(80, 250, 123)">fetchLocalhost</span><span class="token tag special-attr attr-value value javascript language-javascript punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token tag special-attr attr-value value javascript language-javascript punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token tag special-attr attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">aria-current</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">page</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">fetch</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">a</span><span class="token tag" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)">      </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">div</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">script</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token script language-javascript">      </span><span class="token script language-javascript keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript function" style="color:rgb(80, 250, 123)">fetchLocalhost</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token script language-javascript">        </span><span class="token script language-javascript function" style="color:rgb(80, 250, 123)">fetch</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token script language-javascript string" style="color:rgb(255, 121, 198)">'http://127.0.0.1:8080/index.js'</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(80, 250, 123)">then</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token script language-javascript keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token script language-javascript parameter">res</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript arrow operator">=&gt;</span><span class="token script language-javascript">                 </span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token script language-javascript">          </span><span class="token script language-javascript console class-name">console</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token script language-javascript keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token script language-javascript"> res</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(80, 250, 123)">text</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token script language-javascript">      </span><span class="token script language-javascript punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">script</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">body</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">html</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>åœ¨æœ¬åœ°ç”µè„‘å¦å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼Œæ·»åŠ <code>index.js</code>æ–‡ä»¶ï¼Œé€šè¿‡<code>http-server</code>å¯åŠ¨ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨ï¼Œå¹¶å¼€å¯<code>CORS</code>ï¼Œè¿™æ ·<code>index.html</code>å°±ä¼šæš´éœ²åœ¨<code>127.0.0.1:8080</code>ä¸‹ï¼Œå¹¶ä¸”å…è®¸è·¨åŸŸè®¿é—®ï¼›</li></ol><p><img loading="lazy" alt="image-20220704004910426" src="/assets/images/image-20220704004910426-0f21a62bb16e8ea0ba7c58b272231ae3.png" width="665" height="334" class="img_ev3q"></p><ol start="3"><li>ç„¶åæ‰“å¼€ vercel éƒ¨ç½²çš„å…¬å…±ç½‘é¡µï¼Œç‚¹å‡» fetch å‘èµ·è¯·æ±‚ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œå…¬å…±ç½‘ç»œçš„è¯·æ±‚é¡ºåˆ©æ‹¿åˆ°äº†æœ¬åœ°æœåŠ¡çš„<code>index.js</code>æ–‡ä»¶</li></ol><p><img loading="lazy" alt="413123131" src="/assets/images/413123131-96b4aa7f470317bb0b649c6fc0585e9d.gif" width="1114" height="692" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¼€å¯-pna">å¼€å¯ PNA<a class="hash-link" href="#å¼€å¯-pna" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç°åœ¨æˆ‘é€šè¿‡<code>chrome://flags</code>æ‰‹åŠ¨å¼€å¯ä¸‹é¢çš„è¯•éªŒç‰¹æ€§ï¼Œå¯è§‚å¯Ÿåˆ°ä»¥ä¸‹ç»“æœï¼š</p><ul><li><a href="chrome://flags/#private-network-access-send-preflights" target="_blank" rel="noopener noreferrer">private-network-access-send-preflights</a>ï¼šå‘é€é¢„æ£€è¯·æ±‚ï¼Œå¹¶åœ¨å“åº”å¤´ä¸åŒ…å«<code>Access-Control-Allow-Private-Network: true</code>æ—¶åªåœ¨æ§åˆ¶å°æ˜¾ç¤ºè­¦å‘Šï¼Œè€Œä¸é˜»æ­¢åç»­è¯·æ±‚çš„å‘é€å’Œç»“æœçš„è·å–ï¼›</li></ul><p><img loading="lazy" alt="image-20220704005719958" src="/assets/images/image-20220704005719958-a64ba96051c5d2194cffd6ad16273844.png" width="1304" height="668" class="img_ev3q"></p><ul><li><a href="chrome://flags/#private-network-access-respect-preflight-results" target="_blank" rel="noopener noreferrer">private-network-access-respect-preflight-results</a>ï¼šä»…åœ¨é¢„æ£€è¯·æ±‚è·å–çš„å“åº”åŒ…å«<code>Access-Control-Allow-Private-Network: true</code>æ—¶æ‰ä¼šå‘é€åç»­è¯·æ±‚ï¼Œå³ä½¿æœ¬åœ°æœåŠ¡å¼€å¯äº†<code>CORS</code>å“åº”å¤´<code>Access-Control-Allow-Origin:*</code>ç­‰ä¹Ÿæ— æµäºäº‹ã€‚</li></ul><p><img loading="lazy" alt="image-20220704005925970" src="/assets/images/image-20220704005925970-b13a270f523ca624a542cc8ad969a9e2.png" width="1530" height="451" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ€»ç»“">æ€»ç»“<a class="hash-link" href="#æ€»ç»“" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ€»ä½“æ¥è¯´ï¼Œ<code>PNA</code>è¿™ä¸ªè·¨åŸŸè¯·æ±‚é™åˆ¶å¯¹äºå¼€å‘è€…æ¥è¯´éå¸¸å®‰å…¨ï¼Œå‰ç«¯å¼€å‘åœºæ™¯ç»å¸¸éœ€è¦åœ¨æœ¬åœ°å¯åŠ¨å¼€å‘ç¯å¢ƒçš„æœ¬åœ°æœåŠ¡ä»£ç†æœ¬åœ°èµ„æºï¼Œå¦‚æœå¼€å‘æœŸé—´ä¸å°å¿ƒç‚¹äº†æŸä¸ªç½‘é¡µï¼Œå…¶å…·æœ‰å¯¹æœ¬åœ°æœåŠ¡æ”»å‡»æ€§çš„è¯·æ±‚ï¼Œé‚£ä¹ˆæ•°æ®æ³„éœ²å°†æ˜¯æ¯ç­æ€§çš„ã€‚å…¶å®è¿™ä¹Ÿæ˜¯ CSRF æ”»å‡»çš„ä¸€ç§ï¼Œå…·ä½“çš„ CSRF æ”»å‡»æ¢è®¨ä¸‹ç¯‡ç»§ç»­ã€‚</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[canvas æ±¡æŸ“é—®é¢˜]]></title>
            <link>https://icodex.me/tainted_canvas</link>
            <guid>/tainted_canvas</guid>
            <pubDate>Wed, 29 Jun 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[èƒŒæ™¯]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="èƒŒæ™¯">èƒŒæ™¯<a class="hash-link" href="#èƒŒæ™¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å‰ç«¯æ—¶é—´å®ç°äº†ä¸€ä¸ªç”¨<code>canvas</code>å¾€æ¨¡æ¿å›¾ç‰‡ç»˜åˆ¶æ•°æ®çš„åŠŸèƒ½ç‚¹ï¼Œé‡åˆ°äº†ä¸€ä¸ªè·¨åŸŸå¼•èµ·<code>canvas</code><strong>æ±¡æŸ“</strong>çš„é—®é¢˜ï¼Œä»”ç»†å‘æ˜ä¸‹å»å‘ç°ä¸å°‘çš„æŠ€æœ¯ç‚¹ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tainted-canvas">tainted canvas<a class="hash-link" href="#tainted-canvas" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¯¹äº<code>canvas</code>æ±¡æŸ“çš„é—®é¢˜ï¼Œè¿™åº”è¯¥æ˜¯éå¸¸å¸¸è§çš„åœ¨å¤„ç†è·¨åŸŸèµ„æºæ—¶ä¼šé‡åˆ°çš„é—®é¢˜ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œåˆ©ç”¨<code>canvas</code>ç»˜åˆ¶å›¾åƒçš„æ—¶å€™éœ€è¦æ‰§è¡Œä»¥ä¸‹æ­¥éª¤:</p><ol><li>åˆ›å»º<code>canvas</code>å…ƒç´ ï¼›</li><li>è·å–<code>canvas</code>å…ƒç´ çš„äºŒç»´æ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡ï¼›</li><li>åˆ›å»º<code>Image</code>å¯¹è±¡å¹¶åŠ è½½ï¼›</li><li>ç­‰å¾…å›¾åƒåŠ è½½å®Œæˆçš„æ—¶å€™ç»˜åˆ¶åœ¨<code>canvas</code>ä¸Š</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> canvas </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(189, 147, 249);font-style:italic">document</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">createElement</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"canvas"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> ctx </span><span class="token operator">=</span><span class="token plain"> canvas</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">getContext</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"2d"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> img </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">src</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'xxxx'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(80, 250, 123)">onload</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    canvas</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">width</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">width</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  canvas</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">height</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">height</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  canvas</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">drawImage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“ä½¿ç”¨<code>drawImage</code>æ–¹æ³•ç»˜åˆ¶ä¸€ä¸ª<strong>ä¸åŒæº</strong>çš„å›¾åƒæ—¶ï¼Œæ­¤æ—¶å¹¶ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯<code>canvas</code>ä¼šå˜æˆ<code>tainted </code>ï¼ˆè¢«æ±¡æŸ“ï¼‰ï¼Œä¹‹åå¦‚æœåœ¨å½“å‰è¢«æ±¡æŸ“çš„<code>canvas</code>ä¸Šè°ƒç”¨ä»¥ä¸‹æ–¹æ³•æ—¶å°±ä¼šæŠ›å‡º<code>SecurityError</code>çš„é”™è¯¯ã€‚</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>è­¦å‘Š</div><div class="admonitionContent_S0QG"><ul><li><code>HTMLCanvasElement.toDataURL()</code></li><li><code>HTMLCanvasElement.toBlob()</code></li><li><code>CanvasRenderingContext2D.getImageData()</code></li></ul><blockquote><p>Uncaught SecurityError: Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported.</p><p>Uncaught SecurityError: Failed to execute 'getImageData' on 'CanvasRenderingContext2D': The canvas has been tainted by cross-origin data. </p></blockquote></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸ºä»€ä¹ˆä¼šå‡ºç°-tainted-canvas">ä¸ºä»€ä¹ˆä¼šå‡ºç° tainted canvas<a class="hash-link" href="#ä¸ºä»€ä¹ˆä¼šå‡ºç°-tainted-canvas" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>tainted canvas å…¶å®è¿˜æ˜¯ç‰µæ‰¯åˆ°æµè§ˆå™¨åŒæºç­–ç•¥çš„é™åˆ¶é—®é¢˜ï¼Œä¸€èˆ¬æ¥è¯´è¿™ä¸ªé—®é¢˜åœ¨ä½¿ç”¨<code>XMLHttpRequest</code>æˆ–è€…<code>Fetch</code>å‘èµ·ç½‘ç»œè¯·æ±‚çš„æƒ…å†µæ¯”è¾ƒå¤šè§ï¼Œè€Œåœ¨è¿™é‡Œçš„ç›®çš„æ˜¯ç¦æ­¢ä½¿ç”¨<code>canvas</code>éšæ„ä»å¦ä¸€ä¸ªç½‘ç«™åŠ è½½å›¾ç‰‡å†è½¬æ¢æˆæ•°æ®çš„å¼ºç›—è¡Œä¸ºã€‚</p><p>è¿™çœ‹èµ·æ¥åˆæƒ…åˆç†ï¼Œä½†æ˜¯ç°åœ¨å¤§å‹ç½‘ç«™ä¸€èˆ¬éƒ½ä¼šèµ° CDN æœåŠ¡å™¨æ¥ç¼“å­˜å¹¶ä»£ç†èµ„æºè®¿é—®ï¼Œè¿™å°±å¯¼è‡´åœ¨åŠ¨æ€åŠ è½½å›¾åƒçš„æ—¶å€™å®é™…å¯èƒ½èµ°çš„æ˜¯ CDN æœåŠ¡å™¨åŸŸåï¼Œè¿™å°±å¯¼è‡´ç½‘é¡µåŸŸåå’Œèµ„æºåŸŸåä¸åŒæºäº†ã€‚æœ¬æ¥é˜²åˆ«äººçš„ï¼Œè¿™ä¸‹è¿è‡ªå·±äººä¹Ÿå µåœ¨å¤–é¢äº†ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¦‚ä½•è§£å†³-tainted-canvas-é—®é¢˜">å¦‚ä½•è§£å†³ tainted canvas é—®é¢˜<a class="hash-link" href="#å¦‚ä½•è§£å†³-tainted-canvas-é—®é¢˜" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è¦è§£å†³ canvas æ±¡æŸ“çš„é—®é¢˜ï¼Œéœ€è¦ CORS + crossOrign ä¸¤æ­¥é…ç½®ï¼š</p><ol><li>é…ç½®æœåŠ¡ç«¯å“åº”å¤´æ”¯æŒè·¨åŸŸè¯·æ±‚çš„åŸŸåï¼Œè¯·æ±‚æ–¹æ³•ç­‰ï¼›</li><li>è®¾ç½®<code>crossorigin</code>å±æ€§</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cors-header-é…ç½®">cors header é…ç½®<a class="hash-link" href="#cors-header-é…ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å…³äºæœåŠ¡ç«¯ CORS çš„é…ç½®å°±ä¸ç»†è¯´äº†ï¼Œå…·ä½“çš„å¯ä»¥çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼š</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æç¤º</div><div class="admonitionContent_S0QG"><p>è·¨åŸŸç›´é€šè½¦ â€”â€” <a href="https://icodex.me/docs/engineer/%E8%B7%A8%E5%9F%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E5%BC%8F#%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5" target="_blank" rel="noopener noreferrer">è·¨åŸŸä¸è§£å†³æ–¹æ¡ˆ | icodex</a></p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="crossorigin">crossorigin<a class="hash-link" href="#crossorigin" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>HTML è§„èŒƒç»™<code>crossorigin</code>åˆ¶å®šäº†<a href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#cors-settings-attributes" target="_blank" rel="noopener noreferrer">ä¸‰ä¸ªå…è®¸å€¼</a>ï¼š</p><ul><li><code>anonymous</code>æˆ–<code>""</code>ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ï¼šåŒ¿åè¯·æ±‚è®¿é—®èµ„æºï¼Œä¸ä¼šåœ¨è·¨åŸŸè¯·æ±‚çš„æ—¶å€™æºå¸¦ä»»ä½•èº«ä»½å‡­æ®ï¼›</li><li><code>use-credentials</code>ï¼šåœ¨è·¨åŸŸè¯·æ±‚çš„æ—¶å€™æºå¸¦èº«ä»½å‡­æ®ï¼Œä»…å½“æœåŠ¡ç«¯å“åº”å¤´è¿”å›<code>Access-Control-Allow-Credentials: true</code>çš„æ—¶å€™æ‰å…è®¸ä½¿ç”¨è·¨åŸŸèµ„æº</li></ul><p><code>crossorigin</code>æ— è®ºè®¾ç½®æˆå“ªä¸€ä¸ªå€¼éƒ½ä¼šæŒ‡å®šæµè§ˆå™¨ä»¥è·¨åŸŸçš„æ¨¡å¼è¯·æ±‚èµ„æºï¼Œå»å‘é€ç›¸å…³<code>CORS</code>ç›¸å…³çš„è¯·æ±‚å¤´ï¼Œå¹¶é€šè¿‡æ£€æŸ¥æœåŠ¡ç«¯æ˜¯å¦è¿”å›<code>Access-Control-Allow-Orgin</code>ç­‰å“åº”å¤´æ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æƒé™å®Œå…¨è®¿é—®å“åº”å†…å®¹ã€‚ä½†æ˜¯ä¸ºäº†å®¢æˆ·ç«¯å®‰å…¨è€ƒè™‘ï¼Œä¸€èˆ¬è®¾ç½®æˆ<code>anonymous</code>æ›´ä¸ºåˆé€‚ï¼Œé¿å…å‘é™Œç”Ÿçš„æœåŠ¡ç«¯å‘é€ç½‘é¡µçš„<code>cookie</code>ç­‰èº«ä»½æ•°æ®ã€‚</p><p>æ”¾åœ¨<code>canvas</code>ç»˜åˆ¶<code>image</code>çš„ä»£ç é‡Œå¯ä»¥è¿™æ ·ä¿®æ”¹ï¼š</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> canvas </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(189, 147, 249);font-style:italic">document</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">createElement</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"canvas"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> ctx </span><span class="token operator">=</span><span class="token plain"> canvas</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">getContext</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"2d"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> img </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">src</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'xxxx'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">crossOrigin</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'anonymous'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(80, 250, 123)">onload</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  canvas</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">width</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">width</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  canvas</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">height</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">height</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  canvas</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">drawImage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">img</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœæ˜¯<code>img</code>æ ‡ç­¾å¯ä»¥å¢åŠ <code>crossorigin</code>å±æ€§ï¼š</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">img</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">src</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">xxx</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">crossorigin</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">anonymous</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»¥ä¸‹èµ„æºå¯èƒ½ä¹Ÿéœ€è¦<code>crossorigin</code>æ¥å–å¾—æ•°æ®è®¿é—®æƒï¼š</p><table><thead><tr><th>å…ƒç´ </th><th>é™åˆ¶</th></tr></thead><tbody><tr><td><code>img</code>, <code>audio</code>, <code>video</code></td><td>å½“å®ƒä»¬è¢«æ”¾åœ¨<code>canvas</code>å…ƒç´ å†…éƒ¨ä½¿ç”¨æ—¶</td></tr><tr><td><code>script</code></td><td>ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror" target="_blank" rel="noopener noreferrer"><code>window.onerror</code></a></td></tr><tr><td><code>link</code></td><td>åŠ è½½<code>webmanifest</code>æ—¶å¿…é¡»æ·»åŠ <code>crossorigin</code>å±æ€§</td></tr></tbody></table>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[é¥¥è’äº‘æœåŠ¡å™¨æ­å»º]]></title>
            <link>https://icodex.me/dstcloudserver</link>
            <guid>/dstcloudserver</guid>
            <pubDate>Sat, 25 Jun 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[â€‹		ç©é¥¥è’çš„å°ä¼™ä¼´éƒ½çŸ¥é“ï¼Œé¥¥è’è¿™ä¸ªæ¸¸æˆåœ¨åˆ›å»ºå¤šäººæˆ¿é—´çš„æ—¶å€™ï¼Œä¼šå°†æˆ¿ä¸»çš„ç”µè„‘ä½œä¸ºæœ¬åœ°æœåŠ¡å™¨æ¥ä¸­è½¬æ•°æ®ï¼Œç„¶åå°±ç»å¸¸é‡åˆ°å¡é¡¿çš„é—®é¢˜ã€‚è¿™ç¯‡æ–‡ç« å°è¯•ä½¿ç”¨è…¾è®¯äº‘è½»é‡æœåŠ¡å™¨æ¥æ­å»ºé¥¥è’çš„äº‘æœåŠ¡å™¨ã€‚]]></description>
            <content:encoded><![CDATA[<p>â€‹		ç©é¥¥è’çš„å°ä¼™ä¼´éƒ½çŸ¥é“ï¼Œé¥¥è’è¿™ä¸ªæ¸¸æˆåœ¨åˆ›å»ºå¤šäººæˆ¿é—´çš„æ—¶å€™ï¼Œä¼šå°†æˆ¿ä¸»çš„ç”µè„‘ä½œä¸ºæœ¬åœ°æœåŠ¡å™¨æ¥ä¸­è½¬æ•°æ®ï¼Œç„¶åå°±ç»å¸¸é‡åˆ°å¡é¡¿çš„é—®é¢˜ã€‚è¿™ç¯‡æ–‡ç« å°è¯•ä½¿ç”¨è…¾è®¯äº‘è½»é‡æœåŠ¡å™¨æ¥æ­å»ºé¥¥è’çš„äº‘æœåŠ¡å™¨ã€‚</p><h1>é…ç½®</h1><p>é•œåƒç³»ç»Ÿï¼š</p><ul><li>CentOS7.6-Docker20</li></ul><p>å®ä¾‹è§„æ ¼</p><ul><li>CPU: 2æ ¸ å†…å­˜: 4GB</li></ul><p>ç³»ç»Ÿç›˜</p><ul><li>60GB SSDäº‘ç¡¬ç›˜ç®¡ç†å¿«ç…§</li></ul><p>æµé‡åŒ…</p><ul><li>1000GB/æœˆï¼ˆå¸¦å®½ï¼š6Mbpsï¼‰</li></ul><h1>SSH è¿œç¨‹è¿æ¥</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä»€ä¹ˆæ˜¯-ssh">ä»€ä¹ˆæ˜¯ SSH<a class="hash-link" href="#ä»€ä¹ˆæ˜¯-ssh" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>SSH å…¨ç¨‹<code>Secure Shell</code>ï¼Œæ˜¯ä¸€ç§åŠ å¯†çš„ç½‘ç»œä¼ è¾“åè®®ï¼Œæ¯”è¾ƒå¸¸ç”¨äºè¿œç¨‹ç™»å½•ç³»ç»Ÿï¼Œä¾‹å¦‚ä¼ è¾“å‘½ä»¤è¡Œç•Œé¢æˆ–è€…æ‰§è¡ŒæœåŠ¡ç«¯å‘½ä»¤ç­‰ã€‚</p><p>SSH é‡‡ç”¨éå¯¹ç§°åŠ å¯†æ–¹å¼æ¥ä¿æŠ¤æ•°æ®ä¼ è¾“ï¼Œè¿™ç§åŠ å¯†æ–¹å¼ä¹Ÿæ˜¯ web åº”ç”¨åè®® HTTPS çš„åŠ å¯†æ‰‹æ®µã€‚è¿™ç§åŠ å¯†æ–¹å¼éœ€è¦ä¸¤ä¸ªå¯†é’¥ï¼šå…¬é’¥å’Œç§é’¥ã€‚åœ¨å®é™…è¿ç”¨çš„æ—¶å€™ï¼Œå‡å¦‚æœ‰é€šä¿¡åŒæ–¹ A å’Œ Bï¼ŒA å…ˆä½¿ç”¨å¯†é’¥ç®—æ³•è®¡ç®—äº§ç”Ÿä¸€ä¸ªå…¬é’¥ Pkey å’Œç§é’¥ Skeyï¼Œå¹¶å°†å…¶å‘ŠçŸ¥ Bï¼Œåç»­ B åœ¨å‘é€æ•°æ®çš„æ—¶å€™å…ˆä½¿ç”¨å…¬é’¥ Pkey åŠ å¯†ç„¶åä¼ è¾“ï¼Œç»è¿‡å…¬é’¥ Pkey åŠ å¯†çš„æ•°æ®ï¼Œåªèƒ½é€šè¿‡ A ä¿ç•™çš„ Skey æ¥è§£å¯†ï¼Œä»¥æ­¤æ¥ä¿è¯æ•°æ®çš„å®‰å…¨æ€§ã€‚</p><p>SSH èº«ä»½éªŒè¯æœ‰å¤šç§é€”å¾„ï¼Œå…¶ä¸­ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„å…¬é’¥-ç§é’¥å¯¹æ¥ç®€å•åœ°åŠ å¯†ç½‘ç»œè¿æ¥ï¼Œéšå<strong>ä½¿ç”¨å¯†ç è®¤è¯</strong>è¿›è¡Œç™»å½•ï¼›å¦ä¸€ç§æ–¹æ³•æ˜¯äººå·¥ç”Ÿæˆä¸€å¯¹å…¬é’¥å’Œç§é’¥ï¼Œå…¬é’¥éœ€è¦æ”¾åœ¨å¾…è®¿é—®çš„ç”µè„‘ä¹‹ä¸­ï¼Œç„¶åå°±å¯<strong>é€šè¿‡ç”Ÿæˆçš„å¯†é’¥</strong>è¿›è¡Œè®¤è¯ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä¸è¾“å…¥å¯†ç çš„æƒ…å†µä¸‹ç™»å½•ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="powershell-è¿æ¥">powershell è¿æ¥<a class="hash-link" href="#powershell-è¿æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>windows10 2018 å¹´ç§‹å­£æ›´æ–°ï¼ˆä¹Ÿå°±æ˜¯ 1809 ç‰ˆæœ¬ï¼‰åå†…ç½® OpenSSHï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ powershell æˆ–è€… cmd æ‰§è¡Œ SSH è¿æ¥ã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">ssh</span><span class="token plain"> root@</span><span class="token operator">&lt;</span><span class="token plain">ip</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// ç„¶åæç¤ºè¾“å…¥å¯†ç </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// æ–­å¼€è¿æ¥</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">logout</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»¥å¾€çš„ powershell ç­‰ä¹Ÿå¯ä»¥é€šè¿‡ <a href="https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse" target="_blank" rel="noopener noreferrer">Get started with OpenSSH | Microsoft Docs</a> è¿™ç¯‡æ–‡æ¡£ä¸€æ­¥ä¸€æ­¥å¾€ä¸‹é…ç½® opensshï¼Œç„¶åé€šè¿‡<code>ssh</code>å‘½ä»¤è¿æ¥äº‘æœåŠ¡å™¨ï¼Œä¸è¿‡éœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š</p><ul><li>æ–°è´­ä¹°çš„äº‘æœåŠ¡å™¨éœ€è¦å…ˆé€šè¿‡é‡ç½®å¯†ç æ“ä½œæ¥é…ç½® SSH è¿œç¨‹ç™»å½•å¯†ç ï¼›</li><li>powershell éœ€è¦ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="windows-terminal">windows terminal<a class="hash-link" href="#windows-terminal" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>windows terminal æœ¬èº«æ”¯æŒ SSH è¿æ¥ï¼Œé€šè¿‡ç”Ÿæˆå¯†é’¥å¯¹ï¼Œå¹¶æ·»åŠ æ–°é…ç½®çš„æ–¹å¼æ¥å®Œæˆè‡ªåŠ¨ç™»å½•å’Œè®¤è¯çš„è¿‡ç¨‹ï¼Œä»¥æ­¤æ¥æé«˜æ•ˆç‡ã€‚</p><p>windows terminal æ”¯æŒå¯è§†åŒ–é…ç½®ï¼Œåªéœ€è¦æ³¨æ„å‘½ä»¤è¡Œè¿™é‡Œä¸ºï¼š</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">ssh</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">username</span><span class="token operator">&gt;</span><span class="token plain">@</span><span class="token operator">&lt;</span><span class="token plain">ip</span><span class="token operator">&gt;</span><span class="token plain"> -p </span><span class="token number">22</span><span class="token plain"> -i ~/.ssh/id_rsa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image-20220626185539285" src="/assets/images/image-20220626185539285-814e9fbced7f1d546922760fd84857ed.png" width="1113" height="626" class="img_ev3q"></p><h1>æ›´æ–°ç³»ç»Ÿ</h1><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum -y update</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>å®‰è£…è¿œç¨‹æ¡Œé¢</h1><p>æˆ‘ä¸ªäººå¯¹ linux å‘½ä»¤ä¸€çªä¸é€šï¼Œæ‰€ä»¥è¿™é‡Œé€šè¿‡å®‰è£…è¿œç¨‹æ¡Œé¢çš„æ–¹å¼æ¥å®‰æ’ï¼</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum -y </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> epel-release </span><span class="token operator">&amp;&amp;</span><span class="token plain"> yum groupinstall Xfce</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum -y </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> xrdp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl start xrdp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"xfce4-session"</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> ~/.Xclients</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">chmod</span><span class="token plain"> +x .Xclients</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶åé€šè¿‡ windows çš„è¿œç¨‹æ¡Œé¢å®¢æˆ·ç«¯å°±å¯ä»¥è¿æ¥æœåŠ¡å™¨äº†</p><p><img loading="lazy" alt="image-20220626190222604" src="/assets/images/image-20220626190222604-bbbff40343e9339c96a2345df2b5ce6a.png" width="475" height="321" class="img_ev3q"></p><h1>å®‰è£…steamcmd</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å®‰è£…è¿è¡Œç¯å¢ƒ">å®‰è£…è¿è¡Œç¯å¢ƒ<a class="hash-link" href="#å®‰è£…è¿è¡Œç¯å¢ƒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">yum -y </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> glibc.i686 libstdc++.i686 </span><span class="token function" style="color:rgb(80, 250, 123)">screen</span><span class="token plain"> libcurl.i686</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å®‰è£…-steamcmd">å®‰è£… steamcmd<a class="hash-link" href="#å®‰è£…-steamcmd" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å…ˆåˆ›å»º<code>steam/steamcmd</code>ç›®å½•ï¼Œç„¶ååœ¨è¯¥ç›®å½•ä¸‹æ‰§è¡Œå®‰è£…<code>steamcmd</code>çš„å‘½ä»¤å¹¶è§£å‹</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> -sqL </span><span class="token string" style="color:rgb(255, 121, 198)">"https://steamcdn-a.akamaihd.net/client/installer/steamcmd_osx.tar.gz"</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">tar</span><span class="token plain"> zxvf -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>å®‰è£…é¥¥è’æœåŠ¡å™¨ç¨‹åº</h1><p>å®‰è£…å®Œ<code>steamcmd</code>åï¼Œå°±å¯ä»¥ä½¿ç”¨<code>steamcmd</code>å®‰è£…é¥¥è’æœåŠ¡å™¨ç¨‹åº<code>Donâ€™t Starve Together Dedicated Server</code></p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># è¿è¡Œ steamcmd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./steamcmd.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># åŒ¿åèº«ä»½ç™»å½•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">login anonymous</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># å®‰è£… Donâ€™t Starve Together Dedicated Server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">app_update </span><span class="token number">343050</span><span class="token plain"> validate +quit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å®‰è£…å®Œ<code>Donâ€™t Starve Together Dedicated Server</code>ä»¥åï¼Œå°±å¯ä»¥åœ¨<code>steam/steamapps/common</code>ä¸‹æ‰¾åˆ°è¯¥ç¨‹åºï¼Œä¸ºäº†æ–¹ä¾¿ä»¥åå‘½ä»¤æ“ä½œï¼Œå°†è¯¥æ–‡ä»¶å¤¹åç§°ä¿®æ”¹ä¸º<code>dst</code></p><p><img loading="lazy" alt="image-20220626193538075" src="/assets/images/image-20220626193538075-5e0decea671f53a86da64a870b72e63b.png" width="694" height="336" class="img_ev3q"></p><h1>åˆæ¬¡è¿è¡Œ server</h1><p>è¿˜æ˜¯åˆšæ‰çš„<code>dst</code>ç›®å½•ä¸‹ï¼Œæ‰¾åˆ°<code>bin</code>ç›®å½•ï¼Œé‡Œé¢æœ‰ä¸ª<code>dontstarve_dedicated_server_nullrenderer</code>ç¨‹åºï¼Œä½¿ç”¨å‘½ä»¤è¡Œè¿è¡Œå®ƒ</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> steam/steamcmd/common/dst/bin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./dontstarve_dedicated_server_nullrenderer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯èƒ½ä¼šæŠ¥<code>error while loading shared libraries: libcurl-gnutls.so.4: cannot open shared object file</code>çš„é”™è¯¯ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤è§£å†³ï¼Œæ³¨æ„å°†æœ«å°¾çš„ç›®å½•æ›¿æ¢æˆä½ å®‰è£…çš„ server çš„è·¯å¾„ã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">ln</span><span class="token plain"> -s /usr/lib/libcurl.so.4 ~/steam/steamcmd/common/dst/bin/lib32/libcurl-gnutls.so.4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶åçœ‹åˆ°<code>your server will not start</code>å°±è¡¨ç¤ºå¯ä»¥æˆåŠŸæ‰§è¡Œã€‚</p><h1>é…ç½®é¥¥è’ä¸–ç•Œ</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç”Ÿæˆåœ°å›¾é…ç½®">ç”Ÿæˆåœ°å›¾é…ç½®<a class="hash-link" href="#ç”Ÿæˆåœ°å›¾é…ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é…ç½®é¥¥è’æœåŠ¡å™¨è¿™é‡Œæœ€ç®€å•çš„æ–¹å¼æ˜¯å€ŸåŠ©é¥¥è’å®¢æˆ·ç«¯æ¥è§£å†³ï¼Œä¹Ÿå°±æ˜¯é¦–å…ˆæˆ‘ä»¬åœ¨æœ¬åœ°è¿è¡Œé¥¥è’æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªå¤šäººæˆ¿é—´ï¼ŒæŠŠæ£®æ—ã€æ´ç©´ä»¥åŠ<code>mod</code>ä»€ä¹ˆçš„éƒ½é…ç½®å¥½ï¼Œå¹¶é€‰æ‹©<strong>æœ¬åœ°å­˜æ¡£</strong>ï¼Œç„¶åç”Ÿæˆä¸–ç•Œã€‚</p><p><img loading="lazy" alt="image-20220626194448633" src="/assets/images/image-20220626194448633-26463d240c5bc40415093a376d9b9dec.png" width="1622" height="969" class="img_ev3q"></p><p>ç„¶åæˆ‘ä»¬åˆ°ç”µè„‘çš„æœ¬åœ°å­˜æ¡£ç›®å½•ï¼Œä¸€èˆ¬åœ¨ç”µè„‘æ–‡æ¡£ç›®å½•ä¸‹ï¼Œä¾‹å¦‚æˆ‘è¿™é‡Œåœ¨<code>Documents\Klei\DoNotStarveTogether\347061565</code>ä¸‹ï¼Œç„¶åå°±å¯ä»¥çœ‹åˆ°å¤šä¸ªç”Ÿæˆçš„å­˜æ¡£çš„ç›®å½•ï¼Œæ‰¾åˆ°æœ€è¿‘æ—¶é—´åˆ›å»ºçš„å°±æ˜¯åˆšæ‰ç”Ÿæˆçš„ä¸–ç•Œã€‚</p><p><img loading="lazy" alt="image-20220626194610527" src="/assets/images/image-20220626194610527-a82a0c4b8127e0c1d049ea21db7ed6a5.png" width="798" height="403" class="img_ev3q"></p><p>ä¸–ç•Œå­˜æ¡£åŒ…å«ä»¥ä¸‹æ–‡ä»¶å’Œç›®å½•ï¼š</p><p><img loading="lazy" alt="image-20220626195633501" src="/assets/images/image-20220626195633501-3491d27dffcd0e42a93eae8178549dbe.png" width="653" height="196" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç”Ÿæˆå¹¶æ›¿æ¢-token">ç”Ÿæˆå¹¶æ›¿æ¢ token<a class="hash-link" href="#ç”Ÿæˆå¹¶æ›¿æ¢-token" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç„¶åç™»å½•åˆ°<code>Klei</code>å®˜ç½‘ â€”â€” <a href="https://accounts.klei.com/account/info" target="_blank" rel="noopener noreferrer">Login</a>ï¼ˆæ”¯æŒ steam ç™»å½•ï¼‰ï¼Œç„¶åæ‰¾åˆ°é¥¥è’æ¸¸æˆæœåŠ¡å™¨å¹¶è¿›å…¥ã€‚</p><p><img loading="lazy" alt="image-20220626195057555" src="/assets/images/image-20220626195057555-86e9e6ceb148023c879112e28cca1466.png" width="1531" height="601" class="img_ev3q"></p><p>ç„¶åè¾“å…¥åç§°é€‰æ‹©æ·»åŠ æ–°æœåŠ¡å™¨</p><p><img loading="lazy" alt="image-20220626195138924" src="/assets/images/image-20220626195138924-6a52a605ed584f264c8155af0cf59329.png" width="1085" height="244" class="img_ev3q"></p><p>ç„¶åæ–°æ·»åŠ çš„æœåŠ¡å™¨ä¼šæ˜¾ç¤ºåœ¨å½“å‰é¡µé¢ä¸Šæ–¹åˆ—è¡¨é‡Œï¼Œæ‰¾åˆ°å®ƒå¹¶æŠŠä¸‹æ–¹çš„ä¸€ä¸²<code>token</code>å¤åˆ¶ä¸‹æ¥</p><p><img loading="lazy" alt="image-20220626195421056" src="/assets/images/image-20220626195421056-cf495e9a96039bf3a5dea1b21eb23936.png" width="1119" height="218" class="img_ev3q"></p><p>ç„¶åå›åˆ°åˆšæ‰æœ¬åœ°ç”µè„‘åˆ›å»ºçš„ä¸–ç•Œçš„å­˜æ¡£ç›®å½•ï¼Œæ‰“å¼€<code>cluster_token.txt</code>æ–‡ä»¶ï¼Œå°†å¤åˆ¶çš„æœåŠ¡å™¨<code>token</code>æ›¿æ¢è¿›å»å³å¯ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é…ç½®-mod">é…ç½® mod<a class="hash-link" href="#é…ç½®-mod" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ‰“å¼€åˆšæ‰é¥¥è’ä¸–ç•Œçš„<code>Master</code>æˆ–è€…<code>Caves</code>ç›®å½•ï¼Œæ‰¾åˆ°<code>modoverrides.lua</code>æ–‡ä»¶ï¼Œä½¿ç”¨æ–‡ä»¶ç¼–è¾‘å™¨æ‰“å¼€ï¼Œå¯ä»¥çœ‹åˆ°åˆ›å»ºä¸–ç•Œæ—¶é…ç½®å¯ç”¨çš„æ‰€æœ‰<code>mod</code>çš„ idã€‚</p><p><img loading="lazy" alt="image-20220626200138014" src="/assets/images/image-20220626200138014-ce50dbf4e49707f5242ad5813a4fb883.png" width="1027" height="670" class="img_ev3q"></p><p>å›åˆ°æœåŠ¡å™¨ä¸Šé¥¥è’æœåŠ¡å™¨çš„<code>dst/mods</code>ç›®å½•ï¼Œæ‰¾åˆ°<code>dedicated_server_mods_setup.lua</code>æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯æœåŠ¡å™¨åˆ›å»ºä¸–ç•Œæ—¶å®‰è£…<code>mod</code>çš„é…ç½®æ–‡ä»¶ã€‚</p><p>å°†<code>modoverrides.lua</code>å†…éƒ¨çš„<code>mod</code>çš„<code>id</code>å¤åˆ¶ä¸‹æ¥ï¼Œå¹¶ç”¨<code>ServerModSetup("xxxx")</code>åŒ…è£¹ï¼Œå†™å…¥<code>dedicated_server_mods_setup.lua</code>æ–‡ä»¶ï¼Œè¿™å°±å®Œæˆ<code>mod</code>å®‰è£…é…ç½®äº†ã€‚</p><h1>ä¸Šä¼ é¥¥è’ä¸–ç•Œé…ç½®æ–‡ä»¶</h1><p>é…ç½®å®Œé¥¥è’ä¸–ç•Œå’Œ<code>mod</code>ä»¥åï¼Œæˆ‘ä»¬æŠŠåˆšæ‰æœ¬åœ°ç”µè„‘æ–‡ä»¶ç›®å½•ä¸‹çš„å­˜æ¡£ç›®å½•ç›´æ¥ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„<code>.klei/DoNotStarveTogether</code>ç›®å½•ä¸‹ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨äº† ftp å®¢æˆ·ç«¯<code>FileZilla</code>æ¥ä¸Šä¼ æ–‡ä»¶ï¼Œå¾ˆæ–¹ä¾¿å¾ˆå¿«ï¼</p><h1>è¿è¡Œåœ°ä¸Šå’Œæ´ç©´æœåŠ¡</h1><p>ä¸Šä¼ å®Œé¥¥è’ä¸–ç•Œçš„é…ç½®æ–‡ä»¶ä»¥åï¼Œå°±å¯ä»¥å†æ¬¡ä½¿ç”¨<code>dontstarve_dedicated_server_nullrenderer</code>è¿è¡Œåœ°ä¸Šå’Œæ´ç©´æœåŠ¡äº†ã€‚</p><p>è¿™é‡Œéœ€è¦å¼€ä¸¤ä¸ª<code>shell</code>çª—å£æ¥è¿è¡Œä¸¤ä¸ªå‘½ä»¤ã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># å¯åŠ¨åœ°ä¸Šä¸–ç•Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./dontstarve_dedicated_server_nullrenderer -console -cluster MyDediServer -shard Caves</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># å¯åŠ¨æ´ç©´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./dontstarve_dedicated_server_nullrenderer -console -cluster MyDediServer -shard Master</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å¦‚ä½•ç»™ç±»åº“æ‰“åŒ…]]></title>
            <link>https://icodex.me/packlib</link>
            <guid>/packlib</guid>
            <pubDate>Sat, 26 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[èƒŒæ™¯]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="èƒŒæ™¯">èƒŒæ™¯<a class="hash-link" href="#èƒŒæ™¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨ä¸šåŠ¡åœºæ™¯å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™ä¸€äº›æ–¹æ³•æ¥è§£å†³ä¸€äº›ä¸šåŠ¡åœºæ™¯é—®é¢˜ï¼Œä¾‹å¦‚é˜²æŠ–ã€èŠ‚æµã€æ­£åˆ™è¡¨è¾¾å¼è¡¨å•æ ¡éªŒæ–¹æ³•ç­‰ã€‚ä¸€èˆ¬æˆ‘ä»¬ä¼šæŠŠè¿™äº›æ–¹æ³•ç»Ÿä¸€æ”¾åœ¨é¡¹ç›®çš„æŸä¸ªç›®å½•ï¼Œä¾‹å¦‚<code>utils</code>ä¸‹ç»´æŠ¤ã€‚</p><p>ä½†æ˜¯å½“æ¶‰åŠåˆ°è·¨å›¢é˜Ÿä½¿ç”¨çš„æ—¶å€™ï¼Œè¿™äº›æ–¹æ³•é€šè¿‡<code>npm</code>åŒ…çš„å½¢å¼æ¥ç»´æŠ¤ä¼šå‡å°‘å›¢é˜Ÿå¼€å‘æˆæœ¬ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ¢ç´¢ä½¿ç”¨<code>rollup</code>å’Œ<code>api-extractor</code>æ‰“åŒ…åŸºäº TypeScript å¼€å‘çš„ç±»åº“çš„ä½¿ç”¨è¿‡ç¨‹ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="rollup-æ˜¯å¹²å˜›çš„">rollup æ˜¯å¹²å˜›çš„<a class="hash-link" href="#rollup-æ˜¯å¹²å˜›çš„" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>rollup</code>(æ±‡æ€»)æ˜¯ä¸€ä¸ªæ”¯æŒ ES Modules æ¨¡å—è¯­æ³•çš„ JS åº”ç”¨æ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥å°† ES æ¨¡å—è¯­æ³•ç¼–è¯‘æˆ CommonJSï¼ŒAMDï¼ŒIIFE ç­‰å½¢å¼çš„ä»£ç ã€‚åŒæ—¶ï¼Œ<code>rollup</code>æ”¯æŒ<code>Tree-Shaking</code>ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tree-shaking">Tree-Shaking<a class="hash-link" href="#tree-shaking" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>rollup</code>æå‡º<code>Tree-Shaking</code>è¿™ä¸ªè¯ï¼Œç”¨æ¥åˆ å‡æ— ç”¨çš„ä»£ç æ®µã€‚åŸç†ä¸Šç®€å•æ¥è¯´ä»ç¼–è¯‘ä»£ç å¾—åˆ°çš„<code>AST</code>ï¼ˆAbstract Syntax Treeï¼‰ï¼Œé¦–å…ˆæ ‡è®°ç›¸å…³è”çš„ä»£ç ï¼Œç„¶åç§»é™¤æ²¡è¢«æ ‡è®°çš„ä»£ç ï¼Œç±»ä¼¼äº<code>æ ‡è®°-æ¸…é™¤</code>çš„å†…å­˜å›æ”¶æœºåˆ¶ã€‚</p><p>é€šè¿‡ ES Modules æ¨¡å—è¯­æ³•æ”¯æŒé™æ€åˆ†æçš„ç‰¹æ€§ï¼Œå¯ä»¥è®©<code>Tree-Shaking</code>æ›´å¥½åœ°å‘æŒ¥ä½œç”¨ï¼Œä½†æ˜¯è®¸å¤šç¬¬ä¸‰æ–¹åŒ…å¹¶ä¸æ˜¯ä»¥  ES Modules å½¢å¼å¯¹å¤–ç•Œæš´éœ² APIï¼Œä¾‹å¦‚<code>lodash</code>ï¼Œè¦æƒ³åœ¨ä»£ç å±‚é¢ä¸Šé…åˆ<code>Tree-Shaking</code>ï¼Œå¯ä»¥é€šè¿‡å¼•å…¥å­æ¨¡å—æ¥è§£å†³é—®é¢˜ã€‚ä¾‹å¦‚ä½¿ç”¨<code>import map from 'lodash-es/map'</code>è€Œä¸æ˜¯<code>import { map } from 'lodash-es'</code>ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸æ”¯æŒç¬¬ä¸‰æ–¹åŒ…">ä¸æ”¯æŒç¬¬ä¸‰æ–¹åŒ…<a class="hash-link" href="#ä¸æ”¯æŒç¬¬ä¸‰æ–¹åŒ…" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>rollup</code>æœ¬èº«ä¸æ”¯æŒå¤„ç†ä»<code>node_modules</code>å¼•å…¥çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œéœ€è¦é€šè¿‡é¢å¤–çš„<code>plugin</code> â€”â€” <code>@rollup/plugin-node-resolve</code>æ¥å¤„ç†ã€‚</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// rollup.config.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports">resolve</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'@rollup/plugin-node-resolve'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">input</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'src/main.js'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">output</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">file</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'bundle.js'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">format</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'cjs'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token function" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é…ç½®é¡¹">é…ç½®é¡¹<a class="hash-link" href="#é…ç½®é¡¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>rollup</code>æ”¯æŒ CLI å‘½ä»¤<code>rollup</code>ï¼Œé»˜è®¤æŸ¥æ‰¾é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„<code>rollup.config.js</code>é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤é…ç½®æ–‡ä»¶ä½¿ç”¨ CJS æ¨¡å—è¯­æ³•ï¼Œä½†æ˜¯ä¹Ÿæ”¯æŒä»¥<code>.cjs</code>å’Œ<code>.mjs</code>ä¸¤ç§åç¼€æ¥åŒºåˆ†åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨çš„æ¨¡å—è¯­æ³•ã€‚</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// rollup.config.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">Configuration</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ‰“åŒ…å…¥å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  input</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">entryAlias</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ’ä»¶æ•°ç»„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  plugins</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Plugin </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">undefined</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¿½ç•¥æ‰“åŒ…çš„æ¨¡å—</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  external</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> RegExp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> RegExp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        source</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        importer</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">undefined</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        isResolved</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">undefined</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç¼“å­˜ä¹‹å‰çš„æ„å»ºäº§ç‰©ï¼Œåœ¨ watch æ¨¡å¼ä¸‹æé«˜åç»­æ„å»ºé€Ÿåº¦ï¼Œå¼€å¯çš„æ—¶å€™ rollup ä¼šåªåˆ†ææ”¹å˜çš„æ¨¡å—</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¯ä»¥æŒ‡å®šç¼“å­˜ plugin å’Œ module</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  cache</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> RollupCache</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// è­¦ç¤ºä¿¡æ¯è‡ªå®šä¹‰å¤„ç†å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  onwarn</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  preserveEntrySignatures</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'strict'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'allow-extension'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'exports-only'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ˜¯å¦å¯¹ä½¿ç”¨äº† rollup è¿‡æ—¶çš„ç‰¹æ€§ç›´æ¥æŠ¥é”™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  strictDeprecations</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// acorn ç¼–è¯‘å™¨çš„é…ç½®é¡¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  acorn</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> AcornOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// acorn ä½¿ç”¨çš„æ’ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  acornInjectPlugins</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">unknown</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">unknown</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å…¨å±€ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œä¾‹å¦‚ window</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  context</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å•ç‹¬é…ç½®æ¯ä¸ªæ¨¡å—çš„ä¸Šä¸‹æ–‡å¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  moduleContext</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">id</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">undefined</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">id</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  preserveSymlinks</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ˜¯å¦å¯¹ä½¿ç”¨æœªå®šä¹‰çš„æ¨¡å—æç¤ºæŠ¥é”™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  shimMissingExports</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// è‡ªå®šä¹‰ tree-shaking çš„è¿‡ç¨‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  treeshake</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> TreeshakingPreset </span><span class="token operator">|</span><span class="token plain"> TreeshakingOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç¡®å®šåœ¨è¿è¡Œäº†å¤šå°‘æ¬¡ä¹‹åï¼Œæ’ä»¶ä¸å†ä½¿ç”¨çš„ç¼“å­˜èµ„æºåº”è¯¥è¢«åˆ é™¤ï¼Œé»˜è®¤ 10 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  experimentalCacheExpiry</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ˜¯å¦è®¡ç®—æ„å»ºæ€§èƒ½ï¼Œä¾‹å¦‚æ„å»ºæ—¶é—´ç­‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  perf</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ„å»ºè¾“å‡ºé…ç½®ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  output</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// è¾“å‡ºæ–‡ä»¶ç›®å½•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    dir</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// è¾“å‡ºæ–‡ä»¶å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    file</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æŒ‡å®šè¾“å‡ºäº§ç‰©çš„æ¨¡å—è¯­æ³•ï¼Œé»˜è®¤ esï¼Œä¹Ÿå°±æ˜¯ ES Modules è¯­æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    format</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'amd'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'cjs'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'es'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'iife'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'system'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'umd'</span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'commonjs'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'esm'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'module'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'systemjs'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// å°†å¤–éƒ¨æ¨¡å— ID è½¬æ¢ä¸ºå…¨å±€å˜é‡åï¼Œä¾‹å¦‚ jquery =&gt; $, åœ¨æ‰€æœ‰æ¨¡å—å†…éƒ¨ä¸éœ€è¦å¼•ç”¨ jquery å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ $</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    globals</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ‰“åŒ…äº§ç‰©å¯¹å¤–æš´éœ²çš„å…¨å±€å˜é‡å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    name</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// åªä½œç”¨äºå½“å‰è¾“å‡ºçš„æ’ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    plugins</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">OutputPlugin </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">undefined</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// å…¶ä»–é™æ€èµ„æºçš„è¾“å‡ºæ–‡ä»¶å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    assetFileNames</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">chunkInfo</span><span class="token operator">:</span><span class="token plain"> PreRenderedAsset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ”¾ç½®åœ¨æ‰“åŒ…äº§ç‰©é¡¶éƒ¨çš„å­—ç¬¦ä¸²å†…å®¹ï¼Œä¾‹å¦‚ä½œè€…ä¿¡æ¯ï¼Œç‰ˆæœ¬å£°æ˜ç­‰ï¼Œå’Œä¸‹é¢çš„ footer ä¸€æ ·</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    banner</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Promise</span><span class="token operator">&lt;</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    footer</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Promise</span><span class="token operator">&lt;</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æŒ‡å®š code-splitting æ‹†åˆ†å‡ºæ¥çš„ chunk çš„æ–‡ä»¶å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    chunkFileNames</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">chunkInfo</span><span class="token operator">:</span><span class="token plain"> PreRenderedChunk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// å‡å°‘ rollup ç”Ÿæˆçš„åŒ…è£…å™¨çš„ä»£ç ï¼Œå¯ä»¥ç”¨äºä¼˜åŒ–ç”Ÿæˆäº§ç‰©ä½“ç§¯ï¼Œé»˜è®¤ false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    compact</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æŒ‡å®šä» entry æŒ‡å®šçš„ chunk çš„æ–‡ä»¶å</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    entryFileNames</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">chunkInfo</span><span class="token operator">:</span><span class="token plain"> PreRenderedChunk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ˜¯å¦æ‹“å±• name æŒ‡å®šçš„å…¨å±€å˜é‡çš„åç§°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    extend</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// å½“æ‹†åˆ†å¤šä¸ª chunk çš„æ—¶å€™ï¼Œrollup ä¼šæŠŠåç»­å…³è”çš„æ¨¡å—æ·»åŠ åˆ°å…¥å£æ¨¡å— import è¿›æ¥ï¼Œè¿™æ ·JS å¼•æ“åœ¨ä»</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// å…¥å£å¼€å§‹åŠ è½½ chunk çš„æ—¶å€™å°±ä¼šæå‰å‘ç°å…¶ä»–å…³è”çš„æ¨¡å—å¹¶åŠ è½½å®ƒä»¬ï¼Œä»è€Œæå‡å¤šä¸ª chunk çš„åŠ è½½é€Ÿåº¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    hoistTransitiveImports</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// å½“æŒ‡å®šä¸€ä¸ªå…¥å£æ¨¡å—çš„æ—¶å€™ï¼Œå°†å…¶å†…éƒ¨ä½¿ç”¨åŠ¨æ€å¯¼å…¥ import() çš„æ¨¡å—ç›´æ¥æ‰“åŒ…è¿›æ¥è€Œä¸æ˜¯åˆ›å»ºå•ç‹¬çš„ chunk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    inlineDynamicImports</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    interop</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'auto'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'esModule'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'default'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'defaultOnly'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ”¾ç½®åœ¨æ‰“åŒ…äº§ç‰©å†…éƒ¨çš„ä»‹ç»ä¿¡æ¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    intro</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Promise</span><span class="token operator">&lt;</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    outro</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">Promise</span><span class="token operator">&lt;</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// code-splitting çš„æ–¹å¼ï¼Œå¯ä»¥å°†ç¬¬ä¸‰æ–¹åŒ…æ‹†åˆ†å‡ºæ¥æˆå•ç‹¬çš„ chunk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    manualChunks</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">chunkAlias</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> GetManualChunk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¯¹äº es æ¨¡å—æˆ–è€… compact è®¾ç½®ä¸º trueï¼Œä¼šå°†æ¨¡å—åæ··æ·†æˆå•ä¸ªå­—æ¯æ¥è¡¨ç¤ºï¼Œæ›´å¥½çš„å‹ç¼©ä»£ç ä½“ç§¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    minifyInternalExports</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// é…ç½® external æŒ‡å®šçš„æ¨¡å—åå’Œæ¨¡å—è·¯å¾„çš„æ˜ å°„å…³ç³»ï¼Œå¯ä»¥æ˜¯ CDN URL åœ°å€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    paths</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> Record</span><span class="token operator">&lt;</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">id</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// å°†æ¯ä¸ªæ¨¡å—éƒ½æ‹†åˆ†æˆå•ç‹¬çš„ chunk æ‰“åŒ…è¾“å‡ºï¼Œå¯ç”¨äºå°†æ–‡ä»¶ç»“æ„è½¬æ¢ä¸ºä¸åŒçš„æ¨¡å—æ ¼å¼æ¥è¾“å‡ºä¸åŒæ‰“åŒ…äº§ç‰©</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    preserveModules</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// ä¿è¯æŒ‡å®šç›®å½•çš„æ¨¡å—ä»å…¥å£è¿›å…¥å¯ä»¥è¾“å‡ºåˆ° output æŒ‡å®šçš„è¾“å‡ºæ–‡ä»¶å¤¹ï¼Œä»è€Œå’Œ preserveModules éš”ç¦»å¼€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    preserveModulesRoot</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// è¾“å‡º sourcemap çš„å½¢å¼ï¼Œé»˜è®¤ false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sourcemap</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'inline'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'hidden'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æŒ‡å®šæºä»£ç çš„å®é™…ä»£ç æ˜¯å¦è¢«æ·»åŠ åˆ° sourcemap ä¸­ï¼Œå¯å‡å° sourcemap çš„ä½“ç§¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sourcemapExcludeSources</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sourcemapFile</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sourcemapPathTransform</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ ¡éªŒç”Ÿæˆçš„ JS ä»£ç æ˜¯å¦æœ‰æ•ˆ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    validate</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// ä»¥ä¸‹å±äºæ¨¡å—è¯­æ³•ç›¸å…³çš„é…ç½®é¡¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    amd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    esModule</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// å†³å®šæ¨¡å—å¯¼å‡ºçš„è¯­æ³•å½¢å¼ï¼Œé»˜è®¤æƒ…å†µä¸‹ rollup ä¼šæ ¹æ®å…¥å£æ¨¡å—æ¥å†³å®š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    exports</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'default'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'named'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'none'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'auto'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ˜¯å¦ä¸å…è®¸ä¿®æ”¹å¯¼å‡ºçš„æ¨¡å—</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    externalLiveBindings</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ˜¯å¦ä½¿ç”¨ Object.freeze å†»ç»“ import as å½¢å¼å¯¼å‡ºçš„æ¨¡å—</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    freeze</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ˜¯å¦ä½¿ç”¨ç¼©è¿›å­—ç¬¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    indent</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    namespaceToStringTag</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// ä¸º UMD æ¨¡å—æ·»åŠ é¢å¤–çš„ä¸ä¼šå¯¼è‡´å†²çªçš„å¯¼å‡º</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    noConflict</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// ä½¿ç”¨ const å®šä¹‰å¯¼å‡ºçš„æ¨¡å—è€Œä¸æ˜¯ var</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    preferConst</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç§»é™¤ chunk åç§°ä¸­çš„ \0, ? and * å­—ç¬¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sanitizeFileName</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ˜¯å¦åœ¨é ES Modules æ¨¡å—é¡¶éƒ¨æ·»åŠ  use strictï¼Œé»˜è®¤æ·»åŠ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    strict</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// å½“æ‰“åŒ…æ¨¡å—è¾“å‡ºä¸º SystemJS çš„æ—¶å€™ï¼Œæ˜¯å¦ç”¨ null æ›¿æ¢ç©ºçš„ setter æ–¹æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    systemNullSetters</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// çƒ­æ›´æ–°ç›‘å¬é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  watch</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// é…ç½® Rollup åœ¨è§¦å‘é‡æ–°æ„å»ºä¹‹å‰ç­‰å¾…è¿›ä¸€æ­¥æ›´æ”¹çš„æ—¶é—´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    buildDelay</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    chokidar</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> ChokidarOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ˜¯å¦åœ¨é‡æ–°æ„å»ºçš„æ—¶å€™æ¸…ç©ºæ§åˆ¶å°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    clearScreen</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ’é™¤ç›‘å¬çš„æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    exclude</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> RegExp </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> RegExp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    include</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> RegExp </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:rgb(189, 147, 249)">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> RegExp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// è§¦å‘çƒ­æ›´æ–°çš„æ—¶å€™æ˜¯å¦è·³è¿‡ bundle.write() </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    skipWrite</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¸¸ç”¨plugin">å¸¸ç”¨plugin<a class="hash-link" href="#å¸¸ç”¨plugin" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>rollup</code>ç›®å‰æ”¯æŒçš„<code>plugin</code>éƒ½åœ¨è¿™ä¸ªåˆ—è¡¨é‡Œ â€”â€” <a href="https://github.com/rollup/awesome" target="_blank" rel="noopener noreferrer">rollup/awesome: âš¡ï¸ Delightful Rollup Plugins</a>ã€‚å¸¸ç”¨çš„æœ‰ä»¥ä¸‹è¿™äº›ï¼š</p><ul><li><code>@rollup/plugin-node-resolve</code>ï¼šè§£æ<code>node_modules</code>ä¸­ç¬¬ä¸‰æ–¹æ¨¡å—</li><li><code>@rollup/plugin-typescript</code>ï¼šè§£æ TypeScript æ¨¡å—ï¼Œæ³¨æ„é…ç½®<code>tsconfig</code>è·¯å¾„</li><li><code>@rollup/plugin-alias</code>ï¼š<code>alias</code>æ¨¡å—å</li><li><code>rollup-plugin-visualizer</code>ï¼š<code>rollup</code>æ‰“åŒ…äº§ç‰©å¯è§†åŒ–å›¾åˆ†æä¾èµ–é¡¹</li><li><code>rollup-plugin-progress</code>ï¼šæ„å»ºè¿›åº¦æ¡</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="api-extractor-æ˜¯ä»€ä¹ˆ">api-extractor æ˜¯ä»€ä¹ˆ<a class="hash-link" href="#api-extractor-æ˜¯ä»€ä¹ˆ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>api-extractor</code>æ˜¯è¾…åŠ©æ‰“åŒ… TypeScript ç±»å‹ç³»ç»Ÿçš„å·¥å…·ï¼Œå±äº TypeScript è¯­è¨€é¢†åŸŸçš„<code>rollup</code>ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>rollup</code>åªä¸ºæ‰“åŒ…ç”Ÿæˆ<code>.js</code>æ–‡ä»¶ï¼Œå€ŸåŠ©<code>@rollup/plugin-typescript</code>è¿™æ ·çš„æ’ä»¶ä¹Ÿå¯ä»¥ç”Ÿæˆ<code>.d.ts</code>åç¼€çš„ç±»å‹å®šä¹‰æ–‡ä»¶ï¼Œä½†æ˜¯ç±»å‹å®šä¹‰å¾€å¾€åˆ†æ•£åœ¨é¡¹ç›®ä¸åŒçš„æ–‡ä»¶ä¸‹ï¼Œå¯¼è‡´æ„å»ºäº§ç‰©æœ‰å¾ˆå¤š<code>.d.ts</code>æ–‡ä»¶ï¼Œçœ‹èµ·æ¥å¾ˆä¹±ï¼Œé‚£ä¹ˆåˆ«äººç”¨çš„æ—¶å€™å¾€å¾€è¿˜éœ€è¦ä»<code>node_modules</code>ä¸‹å¼•ç”¨ä¸åŒçš„<code>.d.ts</code>æ¨¡å—ï¼Œè¿™å°±å¾ˆä¸æ–¹ä¾¿äº†ã€‚</p><p><code>api-extractor</code>ä¸»è¦å°±æ˜¯è§£å†³ä¸Šé¢è¿™ä¸ªé—®é¢˜çš„ï¼Œå®ƒå¯ä»¥å°†æ‰€æœ‰ç±»å‹å®šä¹‰ä»ä¸€ä¸ªå…¥å£è·å–åˆ°ï¼Œæœ€åæ±‡æ€»åˆ°ä¸€ä¸ª<code>.d.ts</code>æ–‡ä»¶å†…éƒ¨ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul><li><p>å°†æ‰€æœ‰ TS ç±»å‹å®šä¹‰å¯¼å‡ºåˆ°ä¸€ä¸ª<code>.d.ts</code>æ–‡ä»¶ï¼Œè¿™ä¸€é¡¹åŠŸèƒ½æœ€æœ‰ç”¨ï¼›</p></li><li><p>ä»é¡¹ç›®å…¥å£éå†æ‰€æœ‰<code>export</code>çš„ç±»å‹ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ª markdown æŠ¥å‘Šï¼Œä¸€èˆ¬æ²¡ç”¨ï¼›</p></li><li><p>æ ¹æ®ç±»å‹ç”ŸæˆåŒ…å«ç±»å‹ç­¾åå’Œæ³¨é‡Šçš„ JSON æ–‡ä»¶ï¼Œç„¶åå†…ç½®çš„<code>api-documenter</code>å¯ä»¥æ ¹æ®è¿™äº› JSON æ–‡ä»¶ç”Ÿæˆ API æ–‡æ¡£ï¼Œä¸€èˆ¬æ²¡ç”¨ï¼›</p></li></ul><p><img loading="lazy" alt="image-20220326210450101" src="/assets/images/image-20220326210450101-e797435e9a94b578deb8dc890cce2436.png" width="633" height="511" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä½¿ç”¨">ä½¿ç”¨<a class="hash-link" href="#ä½¿ç”¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>api-extractor</code>ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼š</p><ol><li>é¦–å…ˆå…¨å±€å®‰è£…<code>@microsoft/api-extractor</code></li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">pnpm</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> @microsoft/api-extractor -g</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ<code>api-extractor init</code>ä¼šç”Ÿæˆä¸€ä¸ª<code>api-extractor</code>çš„ JSON é…ç½®æ–‡ä»¶<code>api-extractor.json</code></li><li>é…ç½®<code>api-extractor.json</code>ï¼Œå…³é”®éœ€è¦ä¸ºå…¶æŒ‡å®šä¸¤ä¸ªè·¯å¾„ï¼šç±»å‹å…¥å£æ–‡ä»¶è·¯å¾„<code>mainEntryPointFilePath</code>å’Œæ±‡æ€»è¾“å‡ºçš„æ–‡ä»¶è·¯å¾„<code>untrimmedFilePath</code></li></ol><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç±»å‹å…¥å£æ–‡ä»¶è·¯å¾„ï¼Œå¿…é¡»ä¸º .d.ts åç¼€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"mainEntryPointFilePath"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"&lt;projectFolder&gt;/lib/index.d.ts"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"compiler"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"tsconfigFilePath"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"&lt;projectFolder&gt;/tsconfig.json"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">ï¼Œ</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"apiReport"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ˜¯å¦ç”Ÿæˆ API æŠ¥å‘Šï¼Œä¸€èˆ¬ç”¨ä¸åˆ°ï¼Œå…³æ‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"enabled"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"docModel"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ˜¯å¦ç”Ÿæˆ doc model æ–‡æ¡£ï¼Œä¸€èˆ¬ç”¨ä¸åˆ°ï¼Œå…³æ‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"enabled"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"dtsRollup"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"enabled"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ±‡æ€» *.d.ts æ–‡ä»¶åè¾“å‡ºçš„ç›®å½•ï¼Œæœ‰ç”¨è€Œä¸”æ˜¯å…³é”®é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"untrimmedFilePath"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"&lt;projectFolder&gt;/lib/index.d.ts"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li><p>æ¥ç€æˆ‘ä»¬éœ€è¦ä¿è¯é¡¹ç›®ç”Ÿæˆäº†<code>api-extractor</code>éœ€è¦çš„ç±»å‹å…¥å£æ–‡ä»¶ï¼Œå› æ­¤å¯ä»¥å…ˆæ‰§è¡Œ<code>tsc</code>å¾—åˆ°æ„å»ºè¾“å‡ºçš„<code>*.d.ts</code>æ–‡ä»¶ï¼›</p></li><li><p>æœ€åæ‰§è¡Œ<code>api-extractor run</code>å³å¯ï¼Œä¼šåœ¨<code>dtsRollup.untrimmedFilePath</code>é…ç½®çš„è·¯å¾„ä¸‹é‡æ–°ç”Ÿæˆ<code>.d.ts</code>æ–‡ä»¶ï¼Œå†…éƒ¨æ±‡æ€»é¡¹ç›®æ‰€æœ‰çš„ç±»å‹å®šä¹‰ã€‚</p></li></ol><p><img loading="lazy" alt="image-20220327234721974" src="/assets/images/image-20220327234721974-8ed46b1ca54f33d7034c7d35e56f499c.png" width="1371" height="304" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="vite-æ˜¯æ€ä¹ˆç”¨-api-extractor-çš„">vite æ˜¯æ€ä¹ˆç”¨ api-extractor çš„<a class="hash-link" href="#vite-æ˜¯æ€ä¹ˆç”¨-api-extractor-çš„" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä»<code>api-extractor</code>å®˜ç½‘çš„ä»‹ç»é‡Œï¼Œæˆ‘æ ¹æœ¬çœ‹ä¸å‡º<code>api-extractor</code>çš„ä½¿ç”¨æ”¶ç›Šåœ¨å“ªï¼Œè¿™é‡Œåªèƒ½å…ˆå­¦ä¹ <code>vite</code>æ˜¯æ€ä¹ˆç”¨çš„äº†ã€‚</p><p>ä»<code>vite</code>é…ç½®çš„<code>api-extractor.json</code>æ¥çœ‹ï¼Œå…¶æŒ‡å®šçš„ç±»å‹æ–‡ä»¶å…¥å£ä¸º<code>./temp/node/index.d.ts</code>ï¼Œæ±‡æ€»ç”Ÿæˆçš„<code>.d.ts</code>æ–‡ä»¶ä½äº<code>./dist/node/index.d.ts</code>ã€‚</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"$schema"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"https://developer.microsoft.com/json-schemas/api-extractor/v7/api-extractor.schema.json"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// é¡¹ç›®ç›®å½•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"projectFolder"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"./src/node"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç±»å‹å®šä¹‰å…¥å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"mainEntryPointFilePath"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"./temp/node/index.d.ts"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"dtsRollup"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"enabled"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"untrimmedFilePath"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ•´ç†æ±‡æ€»åçš„ .d.ts è¾“å‡ºç›®å½•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"publicTrimmedFilePath"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"./dist/node/index.d.ts"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"apiReport"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"enabled"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"docModel"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"enabled"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"tsdocMetadata"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"enabled"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä½†æ˜¯åœ¨å®é™…é¡¹ç›®ä¸­å¹¶æœªå‘ç°è¯¥æ–‡ä»¶ï¼ŒçŒœæµ‹æ˜¯ç»è¿‡<code>tsc</code>ç¼–è¯‘ç”Ÿæˆçš„ç›®å½•ï¼Œäºæ˜¯æŸ¥æ‰¾<code>package.json</code>ä¸‹<code>scripts</code>çš„é…ç½®ï¼Œæœç„¶æ‰¾åˆ°å’Œ<code>tsc</code>ç›¸å…³çš„å‘½ä»¤ã€‚</p><p>è¿™é‡Œä¸€å…±å››ä¸ªç›¸å…³çš„å‘½ä»¤ï¼š</p><ul><li><code>build-temp-types</code>ï¼šä½¿ç”¨<code>tsc</code>ç¼–è¯‘ TypeScriptï¼Œä½†æ˜¯æŒ‡å®šäº†<code>emitDeclarationOnly</code>ï¼Œåªç”Ÿæˆ<code>.d.ts</code>æ–‡ä»¶åˆ°<code>temp/node</code>ç›®å½•</li><li><code>patch-types</code>ï¼šä½¿ç”¨<code>ts-node</code>è¿è¡Œ<code>scripts</code>ç›®å½•ä¸‹çš„<code>patchTypes.ts</code>ç¨‹åº</li><li><code>roll-types</code>ï¼šè¿è¡Œ<code>api-extractor</code>ç¨‹åºï¼Œå®Œäº‹åç§»é™¤<code>temp</code>æ–‡ä»¶å¤¹</li><li><code>build-type</code>ï¼šä½¿ç”¨<a href="https://github.com/mysticatea/npm-run-all" target="_blank" rel="noopener noreferrer">npm-run-all</a>çš„<code>run-s</code>æŒ‰é¡ºåºæ‰§è¡Œå‘½ä»¤</li></ul><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"scripts"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"build-types"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"run-s build-temp-types patch-types roll-types"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"build-temp-types"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"tsc --emitDeclarationOnly --outDir temp/node -p src/node"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"patch-types"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"ts-node scripts/patchTypes.ts"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"roll-types"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"api-extractor run &amp;&amp; rimraf temp"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä¸‹é¢æˆ‘è¿›å…¥<code>packages/vite</code>åˆ†åˆ«æ‰§è¡Œä»¥ä¸Šå‘½ä»¤çœ‹çœ‹æ•ˆæœã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> packages/vite</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">pnpm</span><span class="token plain"> run build-temp-types</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œ<code>build-temp-types</code>å¾—åˆ°æ‰€æœ‰æ–‡ä»¶çš„<code>.d.ts</code>æ–‡ä»¶</p><p><img loading="lazy" alt="image-20220328204143101" src="/assets/images/image-20220328204143101-670ae2f2a22b3d801efb62f4f06d708a.png" width="625" height="396" class="img_ev3q"></p><p>ç„¶åç»§ç»­æ‰§è¡Œ<code>patch-types</code>ï¼Œ<code>patch-types</code>è¿™ä¸ªç¨‹åºä¼šæŠŠ<code>src/node</code>ç›®å½•ä¸‹ä»£ç ä¸­ä»<code>types/*</code>å¼•å…¥çš„ç±»å‹è½¬æ¢æˆç›¸å¯¹è·¯å¾„ï¼Œè¿™æ ·<code>api-extractor</code>æ‰èƒ½æŸ¥æ‰¾å¾—åˆ°ã€‚</p><p>ä¾‹å¦‚<code>import type { Alias } from "types/alias"</code>è½¬æ¢åå¾—åˆ°<code>import type { Alias } from "../../../types/alias"</code>ã€‚</p><p>æœ€åæ‰§è¡Œ<code>api-extractor run</code>æ¥æ±‡æ€»æ‰€æœ‰çš„ç±»å‹å®šä¹‰ï¼Œå¹¶è¾“å‡ºåˆ°<code>./dist/node/index.d.ts</code>ç›®å½•ä¸‹ï¼Œè¿™ä¸ªç›®å½•åŒæ—¶ä¹Ÿæ˜¯<code>rollup</code>æ‰“åŒ…è¾“å‡ºçš„ JS æ–‡ä»¶ç›®å½•ã€‚</p><p>å…¶ä¸­å…³é”®çš„åœ°æ–¹å°±åœ¨äº<code>api-extractor</code>çš„å…¥å£æ–‡ä»¶ï¼Œåœ¨<code>vite</code>å†…éƒ¨çš„<code>src/node/index.ts</code>åªç”¨ä½œç±»å‹å®šä¹‰å…¥å£ï¼Œå†…éƒ¨è´Ÿè´£ä»å…¶ä»–ç›®å½•<code>export</code>ç±»å‹æˆ–è€…æ–¹æ³•ç­‰æˆå‘˜ã€‚</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token exports"> resolvePackageEntry </span><span class="token exports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'./plugins/resolve'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token exports"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token exports">  splitVendorChunkPlugin</span><span class="token exports punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token exports"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token exports">  splitVendorChunk</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token exports"></span><span class="token exports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'./plugins/splitVendorChunk'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token exports"> resolvePackageData </span><span class="token exports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'./packages'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token exports"> normalizePath </span><span class="token exports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'./utils'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æœ€ä½³å®è·µ">æœ€ä½³å®è·µ<a class="hash-link" href="#æœ€ä½³å®è·µ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä»‹ç»å®Œä»¥ä¸Šä¸¤ç§å·¥å…·çš„ä½¿ç”¨ï¼Œä¸‹é¢å¼€æï¼Œé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token operator">-</span><span class="token plain">scripts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token plain">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">js</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)">// rollup æ‰“åŒ…ç¨‹åº</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token plain">src                </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token plain">debounce</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">ts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token plain">throttle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">ts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token plain">index</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">ts</span><span class="token plain">           </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¯¼å‡ºå…¶ä»–æ–¹æ³•</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å®‰è£…<code>rollup</code>åˆ°é¡¹ç›®ä¾èµ–åï¼Œä½¿ç”¨<code>rollup</code>çš„ JavaScript API æ¥ç¼–å†™æ‰“åŒ…ç¨‹åºï¼Œæ”¾åœ¨<code>scripts/build.js</code>ä¸‹ï¼Œç›®çš„æ˜¯ä»é¡¹ç›®çš„å¤šä¸ªå…¥å£è¿›è¡Œæ‰“åŒ…ï¼Œä»è€Œå¾—åˆ°å¤šä¸ªåˆ†ç¦»çš„<code>.js</code>æ–‡ä»¶ã€‚</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> bundle </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">rollup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  input</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">pluginTS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// æŒ‡å®šç”Ÿæˆ *.d.ts ç±»å‹æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">tsconfig</span><span class="token operator">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'tsconfig.json'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// è¿™é‡Œæˆ‘ä»¬æŒ‡å®š rollup æ‰“åŒ…ä¸éœ€è¦ç”Ÿæˆ .d.ts æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">declaration</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">nodeResolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    analyze </span><span class="token operator">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">visualizer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">filename</span><span class="token operator">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'analyze/stats.html'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">open</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">gzipSize</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">filter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token known-class-name class-name">Boolean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶åä½¿ç”¨<code>tsc --emitDeclarationOnly --declaration --outDir dts</code>ç”Ÿæˆ<code>.d.ts</code>æ–‡ä»¶ï¼Œ<code>index.d.ts</code>å¦‚ä¸‹ï¼š</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> debounce </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'./debounce'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> throttle </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'./throttle'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æœ€åæ‰§è¡Œ<code>api-extractor run</code>è¾“å‡ºæ±‡æ€»çš„<code>.d.ts</code>æ–‡ä»¶ï¼Œå‘½ä»¤é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"scripts"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"build"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"run-s bundle build-types rollup-types"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"bundle"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"node scripts/build.js"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"build-types"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"tsc --emitDeclarationOnly --declaration --outDir dts"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"rollup-types"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"api-extractor run &amp;&amp; rimraf dts"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="qa">QA<a class="hash-link" href="#qa" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ae-missing-release-tag">ae-missing-release-tag<a class="hash-link" href="#ae-missing-release-tag" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä½¿ç”¨<code>api-extractor</code>çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯</p><blockquote><p><code>*â€œ___ is exported by the package, but it is missing a release tag (@alpha, @beta, @public, or @internal).â€*</code></p></blockquote><p><img loading="lazy" alt="image-20220328220425540" src="/assets/images/image-20220328220425540-c1137e209aa37c4a601babf842cbcfe2.png" width="1371" height="205" class="img_ev3q"></p><p>ä¸»è¦åŸå› æ˜¯<code>api-extractor</code>ä½¿ç”¨çš„æ³¨é‡Šæ¯”è¾ƒä¸¥æ ¼ï¼Œå¯ä»¥é€šè¿‡<code>@public</code>ï¼Œ <code>@alpha</code>(å†…éƒ¨æµ‹è¯•) æˆ–<code>@beta</code>(å…¬å¼€æµ‹è¯•)è¿™äº›æ³¨é‡Šæ¥åŒºåˆ†ä¸€ä¸ªæˆå‘˜çš„ç‰ˆæœ¬ã€‚</p><p>ä¸¤ç§æ–¹æ³•è§£å†³ä¸Šè¿°é—®é¢˜ï¼š</p><ul><li>æ–¹æ³•æ³¨é‡Šä¸Šæ·»åŠ <code>@public</code>ï¼›</li><li>åœ¨<code>api-extractor.json</code>ä¸­é…ç½®å…³æ‰æç¤º</li></ul><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token property">"messages"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"extractorMessageReporting"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"ae-missing-release-tag"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">"logLevel"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"none"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å®ç° Promise.all æœ‰å“ªäº›è¦ç‚¹]]></title>
            <link>https://icodex.me/promiseall</link>
            <guid>/promiseall</guid>
            <pubDate>Wed, 23 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Promise.all]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="promiseall">Promise.all<a class="hash-link" href="#promiseall" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>Promise.all</code>æ˜¯æ—¥å¸¸ä½¿ç”¨é¢‘ç‡éå¸¸é«˜çš„å¼‚æ­¥æ–¹æ³•ï¼Œè¿™ä¸¤å¤©å›é¡¾äº†ä¸€ä¸‹<code>Promise</code>çš„å‡ ä¸ªé™æ€æ–¹æ³•ï¼Œå¯¹<code>Promise.all</code>åˆæœ‰äº†ä¸€äº›æ–°çš„è®¤è¯†ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="promiseall-çš„å®šä¹‰">Promise.all çš„å®šä¹‰<a class="hash-link" href="#promiseall-çš„å®šä¹‰" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p><code>Promise.all(iterable)</code></p></blockquote><p>ç†è§£<code>Promise.all</code>API éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li>æ¥æ”¶ä¸€ä¸ª<strong>å¯è¿­ä»£</strong>å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¦åˆ™<code>throw TypeError</code>çš„é”™è¯¯ï¼›</li><li>å½“è¿­ä»£å™¨å†…éƒ¨æ‰€æœ‰<code>Promise</code>å¯¹è±¡<code>fulfilled</code>çš„æ—¶å€™ï¼Œ<code>Promise.all</code>è¿”å›<code>fulfilled</code>çŠ¶æ€çš„<code>Promise</code>å¯¹è±¡ï¼Œ<code>resolve</code>å‚æ•°ä¸ºä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰é<code>Promise</code>å¯¹è±¡ä»¥åŠæ‰€æœ‰<code>Promise</code>å¯¹è±¡<code>resolve</code>çš„å€¼ï¼›</li><li>å½“è¿­ä»£å™¨å†…éƒ¨å­˜åœ¨ä¸€ä¸ª<code>Promise</code>å¯¹è±¡çŠ¶æ€å˜ä¸º<code>rejected</code>æˆ–è€…é<code>Promise</code>å…ƒç´ æ‰§è¡Œå‡ºé”™æ—¶ï¼Œ<code>Promise.all</code>å°†ç«‹å³è¿”å›<code>rejected</code>çŠ¶æ€çš„<code>Promise</code>å¯¹è±¡ï¼Œ<code>reject</code>å‚æ•°ä¸º<code>rejected</code>çš„<code>Promise</code>å¯¹è±¡æŠ›å‡ºçš„ä¿¡æ¯ï¼Œæˆ–è€…é<code>Promise</code>å…ƒç´ æ‰§è¡ŒæŠ¥é”™çš„ä¿¡æ¯ï¼›</li><li><code>Promise.all</code>å˜æˆ<code>fulfilled</code>çŠ¶æ€æ—¶ï¼Œ<code>resolve</code>çš„æ•°ç»„å…ƒç´ æŒ‰ç…§è¿­ä»£å™¨å…ƒç´ çš„é¡ºåºï¼Œé<code>Promise</code>å¯¹è±¡ä¼šç›´æ¥æ”¾åœ¨å¯¹åº”ä½ç½®è¿”å›ã€‚</li></ol><p>ä»<code>Promise.all</code> API å®šä¹‰æ¥çœ‹ï¼Œé¦–å…ˆéœ€è¦ç†è§£ä»€ä¹ˆæ˜¯å¯è¿­ä»£å¯¹è±¡ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä»€ä¹ˆæ˜¯å¯è¿­ä»£">ä»€ä¹ˆæ˜¯å¯è¿­ä»£<a class="hash-link" href="#ä»€ä¹ˆæ˜¯å¯è¿­ä»£" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¯è¿­ä»£æ˜¯ ES6 æå‡ºçš„è¯­æ³•åè®®ï¼Œæ˜¯æŒ‡æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªè¦æ±‚çš„å¯¹è±¡ï¼š</p><ol><li><p><code>iterable</code>ï¼šå¯è¿­ä»£ã€‚å¯è¿­ä»£æŒ‡çš„æ˜¯ä¸€ä¸ªå¯¹è±¡å†…éƒ¨éœ€è¦å®ç°<code>Symbol.iterator</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸æ¥æ”¶å‚æ•°ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¿…é¡»æ˜¯<strong>è¿­ä»£å™¨</strong>ã€‚å½“ä½¿ç”¨<code>for...of</code>éå†çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨<code>Symbol.iterator</code>æ–¹æ³•ã€‚</p></li><li><p><code>iterator</code>ï¼šè¿­ä»£å™¨ã€‚<strong>è¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¯¹è±¡</strong>ï¼ŒåŒ…å«ä¸€ä¸ª<code>next</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªåŒ…å«ä»¥ä¸‹ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ã€‚</p></li></ol><ul><li><code>done: boolean</code>ï¼šè¡¨ç¤ºå½“å‰è¿­ä»£å™¨æ˜¯å¦è¿­ä»£å®Œæ¯•ï¼Œç»“æŸè¿­ä»£åˆ™è®¾ä¸º<code>true</code>ï¼Œæ­¤æ—¶<code>value</code>å¯ä»¥çœç•¥ï¼Œå› ä¸ºæ²¡ä¸œè¥¿è¦è¾“å‡ºäº†å˜›ã€‚</li><li><code>value:any</code>ï¼šè¿­ä»£å™¨æ¯æ¬¡è°ƒç”¨è¿”å›çš„å€¼</li></ul><p>åŸºäº<code>class</code>å®ç°çš„å¯è¿­ä»£å¯¹è±¡ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">SimpleClass</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">constructor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">data</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// é¦–å…ˆå®ç° Symbol.iterator æ–¹æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token known-class-name class-name">Symbol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">iterator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> index </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// è¿”å›ä¸€ä¸ªè¿­ä»£å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// è¿­ä»£å™¨å†…éƒ¨å¿…é¡»åŒ…å« next æ–¹æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">next</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">index </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token literal-property property">value</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">index</span><span class="token operator">++</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token literal-property property">done</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token literal-property property">done</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç›®å‰å†…ç½®çš„å¯è¿­ä»£å¯¹è±¡æœ‰ä»¥ä¸‹è¿™äº›ï¼š</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token known-class-name class-name">Array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token known-class-name class-name">String</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token known-class-name class-name">Map</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token known-class-name class-name">Set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token maybe-class-name">TypedArray</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™äº›ç±»å‹çš„å€¼éƒ½å¯ä»¥ä½¿ç”¨<code>for...of</code>éå†ã€‚</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>è­¦å‘Š</div><div class="admonitionContent_S0QG"><p>æœ‰ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼Œæ— æ³•å‡†ç¡®åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯è¿­ä»£ï¼Œå› ä¸ºè¦åŒæ—¶æ»¡è¶³ä¸Šè¿°è¯´çš„ä¸¤ä¸ªæ¡ä»¶æœ‰ä¸ª hack çš„æ–¹æ³•ã€‚</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> myIterator </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">next</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token known-class-name class-name">Symbol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">iterator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä½†æ˜¯å¯¹äºæ—¥å¸¸æ¥è¯´ï¼Œè°ä¼šå†™è¿™ä¹ˆ hack çš„ä»£ç å‘¢ï¼Ÿæ‰€ä»¥è¦åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯è¿­ä»£ä»ç„¶å¯ä»¥ä½¿ç”¨ï¼š</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typeof</span><span class="token plain"> sth</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token known-class-name class-name">Symbol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">iterator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'function'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="promiseall-çš„å®ç°">Promise.all çš„å®ç°<a class="hash-link" href="#promiseall-çš„å®ç°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(80, 250, 123)">_all</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">iterable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// åˆ¤æ–­è¿­ä»£å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typeof</span><span class="token plain"> iterable</span><span class="token operator">?.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token known-class-name class-name">Symbol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">iterator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"function"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">TypeError</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"parameter must be iterable"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> count </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token spread operator">...</span><span class="token plain">iterable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¦‚æœæ˜¯ç©ºçš„è¿­ä»£å™¨ï¼Œåˆ™ç›´æ¥ resolve ç©ºæ•°ç»„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">count </span><span class="token operator">===</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token function" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> resultArr </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> it </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">of</span><span class="token plain"> iterable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">v</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            count</span><span class="token operator">--</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            resultArr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">count </span><span class="token operator">===</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token function" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">resultArr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æµ‹è¯•</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> promise1 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> promise2 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">42</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> promise3 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'foo'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">_all</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">promise1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> promise2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> promise3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">values</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">values</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// [ 3, 42, 'foo' ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[PureEsm]]></title>
            <link>https://icodex.me/pureesm</link>
            <guid>/pureesm</guid>
            <pubDate>Mon, 28 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[image-20220303224642507]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="image-20220303224642507" src="/assets/images/image-20220303224642507-6cd7dc9b4afb568a8210b48c9746f937.png" width="704" height="326" class="img_ev3q"></p><p>Node ä»<code>v12.17(LTS)</code>ç‰ˆæœ¬å¼€å§‹æ­£å¼æ”¯æŒ ESM æ¨¡å—è¯­æ³•ï¼Œä½†æ˜¯ node æœ¬èº«åˆæ”¯æŒ CJS è¯­æ³•ï¼Œç›´æ¥è¿ç§»çš„è¯è¿˜æ˜¯æœ‰äº›æˆæœ¬çš„ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ¨¡å—åˆ¤å®šæ ‡å‡†">æ¨¡å—åˆ¤å®šæ ‡å‡†<a class="hash-link" href="#æ¨¡å—åˆ¤å®šæ ‡å‡†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="esm-æ¨¡å—">ESM æ¨¡å—<a class="hash-link" href="#esm-æ¨¡å—" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä½¿ç”¨çš„æ—¶å€™ Node æ ¹æ®ä»¥ä¸‹æ¡ä»¶åˆ¤æ–­ä¼ å…¥<code>import</code>æˆ–è€…<code>import()</code>çš„æ¨¡å—ä¸º ESMï¼š</p><ul><li><code>.mjs</code>æ¨¡å—ååç¼€</li><li>ç¦»æ¨¡å—æœ€è¿‘çš„ <code>package.json</code>å†…å®šä¹‰çš„<code>type="module"</code>å­—æ®µ</li><li>åœ¨ CLI å†…éƒ¨æ‰§è¡Œä¸€è¡Œä»£ç æ—¶ä¼ é€’ç»™<code>node</code>å‚æ•°<code>--input-type=module</code></li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"> --input-type</span><span class="token operator">=</span><span class="token plain">module --eval </span><span class="token string" style="color:rgb(255, 121, 198)">"import { sep } from 'path'; console.log(sep);"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cjsæ¨¡å—">CJSæ¨¡å—<a class="hash-link" href="#cjsæ¨¡å—" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä½†æ˜¯ Node åŒæ—¶åˆéœ€è¦æ”¯æŒ CommonJS è¯­æ³•ï¼Œå¯¹äºä½¿ç”¨<code>import</code>æˆ–è€…<code>import()</code>ä¼ å…¥çš„æ¨¡å—æ ¹æ®ä»¥ä¸‹æ¡ä»¶åˆ¤å®šå…¶ä¸º CJS æ¨¡å—ï¼š</p><ul><li><code>.cjs</code>æ¨¡å—ååç¼€</li><li>ç¦»æ¨¡å—æœ€è¿‘çš„ <code>package.json</code>å†…å®šä¹‰çš„<code>type="commonjs"</code>å­—æ®µ</li><li>åœ¨ CLI å†…éƒ¨æ‰§è¡Œä¸€è¡Œä»£ç æ—¶ä¼ é€’ç»™<code>node</code>å‚æ•°<code>--input-type=commonjs</code></li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"> --input-type</span><span class="token operator">=</span><span class="token plain">commonjs --eval </span><span class="token string" style="color:rgb(255, 121, 198)">"import { sep } from 'path'; console.log(sep);"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä»€ä¹ˆæ˜¯-pure-esm">ä»€ä¹ˆæ˜¯ Pure ESM<a class="hash-link" href="#ä»€ä¹ˆæ˜¯-pure-esm" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Pure ESM æ˜¯ <a href="https://gist.github.com/sindresorhus" target="_blank" rel="noopener noreferrer">sindresorhus</a> æå‡ºæ¥çš„ä¸€ä¸ªæ¦‚å¿µ â€”â€” <a href="https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c" target="_blank" rel="noopener noreferrer">Pure ESM package (github.com)</a>ï¼ŒæŒ‡çš„æ˜¯ä¸€ä¸ªä½¿ç”¨ Node å¼€å‘çš„æ¨¡å—åªèƒ½ä½¿ç”¨ ESM æ¨¡å—è¯­æ³•å¯¼å…¥ã€‚</p><p>ä½œè€…å»ºè®® Node  å¼€å‘åº”è¯¥è¿ç§»åˆ° ESMï¼ŒåŸå› å°±æ˜¯ä¸Šæ–‡è¯´çš„<code>import</code>è¯­æ³•æ—¢æ”¯æŒ ESM ä¹Ÿæ”¯æŒ CJSï¼Œä½†æ˜¯ CJS çš„è¯­æ³•<code>require</code>åªæ”¯æŒ CJS æ¨¡å—ã€‚</p><p>ä½œè€…è¿˜ä»‹ç»äº† CommonJS è¿ç§»åˆ° ESM çš„æƒ…å†µï¼š</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä»-commonjs-è¿ç§»åˆ°-esm">ä» CommonJS è¿ç§»åˆ° ESM<a class="hash-link" href="#ä»-commonjs-è¿ç§»åˆ°-esm" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>åœ¨<code>package.json</code>æ·»åŠ <code>"type": "module"</code></li><li>ä½¿ç”¨<code>exports</code>æ›¿æ¢<code>package.json</code>çš„<code>main</code>å­—æ®µæ¥æŒ‡å®šå…¥å£æ–‡ä»¶ï¼Œå› ä¸º<code>main</code>åªé€‚ç”¨äº CJS è¯­æ³•</li><li>åœ¨<code>package.json</code>æŒ‡å®š Node ç‰ˆæœ¬å¿…é¡»å¤§äº<code>12.20</code></li></ul><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token property">"engines"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"node"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"^12.20.0 || ^14.13.1 || &gt;=16.0.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>å¦‚æœæ˜¯ TypeScript é¡¹ç›®ï¼Œè¿˜éœ€è¦åœ¨<code>tsconfig.json</code>æŒ‡å®š<code>module: "es2020"</code></li><li>æœ€åä¸€æ­¥ï¼Œæ”¹é€  CJS è¯­æ³•<code>require()</code>/<code>module.export</code>åˆ° ESM è¯­æ³•<code>import</code>/<code>export</code>ï¼Œå¯¹äºå¼‚æ­¥æ¨¡å—éœ€è¦ä½¿ç”¨<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#dynamic_import" target="_blank" rel="noopener noreferrer"><code>import()</code></a>æˆ–è€…<code>top level await</code>ã€‚</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å‡çº§æŠ¥é”™çš„é—®é¢˜">å‡çº§æŠ¥é”™çš„é—®é¢˜<a class="hash-link" href="#å‡çº§æŠ¥é”™çš„é—®é¢˜" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¦‚æœä¸€ä¸ª node å¼€å‘çš„ package æ˜¯ä½¿ç”¨çš„ ESM æ¨¡å—è¯­æ³•å¯¼å‡ºï¼Œé‚£ä¹ˆåªèƒ½åœ¨ ESM æ¨¡å—ä¸­ä½¿ç”¨ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™<code>ERR_REQUIRE_ESM</code>ï¼Œä¾‹å¦‚ä½¿ç”¨<code>chalk5.0+</code></p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// index.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> chalk </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'chalk'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image-20220303230608412" src="/assets/images/image-20220303230608412-70f8776019c6252158bb6104e5d2f51f.png" width="1343" height="212" class="img_ev3q"></p><p>è¿™æ—¶å€™æœ€ç®€å•çš„æ–¹æ³•æ˜¯ç›´æ¥æŠŠå½“å‰æ¨¡å—æ”¹æˆ<code>.mjs</code>åç¼€ï¼Œç„¶åä½¿ç”¨ ESM çš„<code>import</code>è¯­æ³•å¼•å…¥ã€‚</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// index.mjs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports">chalk</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'chalk'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">chalk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">blue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'Hello world!'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™æ ·æ˜¯èƒ½åœ¨å½“å‰æ¨¡å—å¤„ç†ç¬¬ä¸‰æ–¹ ESM æ¨¡å—äº†ï¼Œä½†æ˜¯ä½¿ç”¨è¯¥<code>.mjs</code>æ¨¡å—çš„æ¨¡å—ä¹Ÿéœ€è¦æ˜¯ ESM æ¨¡å—ï¼ŒåŒæ ·éœ€è¦<code>import(xxx.mjs)</code>ã€‚å¯æƒ³è€ŒçŸ¥ï¼Œä¸æ–­æ”¹é€ ä¸‹å»æ•´ä¸ªé¡¹ç›®éƒ½è¿ç§»åˆ°äº† ESM æ¨¡å—ï¼Œæ‰€ä»¥è¦åœ¨ CJS é¡¹ç›®ä¸­ä½¿ç”¨ ESM æ¨¡å—ï¼Œæ•´ä¸ªé¡¹ç›®éƒ½å¿…é¡»éµå¾ª ESM æ¨¡å—è¯­æ³•ï¼Œè¿™æ—¶å€™ç›´æ¥ä½¿ç”¨<code>type: "module"</code>æœ€å¥½ã€‚</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// package.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"type"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"module"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[å­¦ä¹ vuecliæºç çš„æ”¶è·]]></title>
            <link>https://icodex.me/learncli</link>
            <guid>/learncli</guid>
            <pubDate>Sun, 27 Feb 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[ä¸ºä»€ä¹ˆå­¦ä¹ ]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸ºä»€ä¹ˆå­¦ä¹ ">ä¸ºä»€ä¹ˆå­¦ä¹ <a class="hash-link" href="#ä¸ºä»€ä¹ˆå­¦ä¹ " title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¹‹æ‰€ä»¥å­¦ä¹ <code>vue-cli</code>çš„æºç ï¼Œä¸»è¦æ˜¯æˆ‘ä¸ªäººæƒ³æå‡è„šæ‰‹æ¶æ­å»ºæ–¹é¢çš„èƒ½åŠ›ï¼Œå­¦ä¹ <code>vue-cli</code>æ’ä»¶æœºåˆ¶çš„è®¾è®¡æ¨¡å¼å’Œä¸€äº›è„šæ‰‹æ¶å¼€å‘çš„æŠ€å·§ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å­¦åˆ°äº†ä»€ä¹ˆ">å­¦åˆ°äº†ä»€ä¹ˆ<a class="hash-link" href="#å­¦åˆ°äº†ä»€ä¹ˆ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é€šè¿‡å­¦ä¹ <code>vue-cli</code>ä»è¾“å…¥ CLI å‘½ä»¤ã€ç”Ÿæˆä»£ç ï¼Œå®‰è£…ä¾èµ–å†åˆ°æœ€åå¼€å‘ç¯å¢ƒæ„å»ºçš„æ•´ä¸ªæµç¨‹ï¼Œæˆ‘ä¸ªäººæ”¶è·ä¸»è¦æ˜¯ä»¥ä¸‹å‡ æ–¹é¢ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ’ä»¶æ¨¡å¼çš„å®ç°">æ’ä»¶æ¨¡å¼çš„å®ç°<a class="hash-link" href="#æ’ä»¶æ¨¡å¼çš„å®ç°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é¦–å…ˆä¸»è¦æ˜¯<code>vue-cli</code>çº¦å®šçš„ä¸€å¥—æ’ä»¶æœºåˆ¶ï¼Œä¸€ä¸ªæ’ä»¶å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨<code>vue-cli</code>ä¸­æ’ä»¶å¯ä»¥ç”¨æ¥ä¿®æ”¹é¡¹ç›®<code>webpack</code>é…ç½®ï¼Œæ·»åŠ é¡¹ç›®ä¾èµ–åŒ…ï¼Œå†™å…¥é¡¹ç›®æ–‡ä»¶ä»¥åŠæ¤å…¥æ–°çš„<code>vue-cli-service</code>çš„å‘½ä»¤ç­‰ç­‰ã€‚å¹¶ä¸”ä½¿ç”¨çš„æ’ä»¶è¿˜æ”¯æŒæŒä¹…ç¼“å­˜åœ¨æœ¬åœ°ç›®å½•ä¸‹ä½œä¸º<code>preset</code>ï¼Œè¿™æ ·ä¸‹æ¬¡è°ƒç”¨<code>vue-cli</code>çš„å‘½ä»¤æ—¶å¯ä»¥ç›´æ¥åŸºäº<code>preset</code>å®‰è£…æ’ä»¶ã€‚</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// preset å†…éƒ¨ä¿å­˜çš„æ•°æ®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"useConfigFiles"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"cssPreprocessor"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"sass"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"plugins"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"@vue/cli-plugin-babel"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"@vue/cli-plugin-eslint"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">"config"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"airbnb"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">"lintOn"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"save"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"commit"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"@vue/cli-plugin-router"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"@vue/cli-plugin-vuex"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»¥<code>vue-cli-service</code>ä¸ºä¾‹ï¼Œå…¶ç”Ÿæˆé¡¹ç›®ä»£ç çš„è¿‡ç¨‹ç”¨ç®€å•çš„ä¼ªä»£ç è¡¨ç¤ºå°±æ˜¯ä»¥ä¸‹å‡ æ­¥ï¼š</p><ol><li>åˆå§‹åŒ–<code>Creator</code>å®ä¾‹ï¼Œä¿å­˜ä¸€äº›<code>package.json</code>çš„é…ç½®é¡¹ï¼Œè¦å†™å…¥çš„æ–‡ä»¶æ¨¡æ¿æ•°æ®ç­‰ï¼›</li></ol><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">Creator</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">constructor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">projectName</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// package.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">pkg</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token plain"> projectName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">private</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">devDependencies</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¾…æ‰§è¡Œçš„æ’ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">plugins</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¾…ç”Ÿæˆçš„æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">files</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// CLI é€‰é¡¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">options</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ‹“å±• package.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">extendPackage</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">fields</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ’å…¥å¾…ç”Ÿæˆæ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">render</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">sourceï¼Œdata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>è·å–æŒ‡å®š<code>preset</code>ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šçš„è¯å°±è®©ç”¨æˆ·é€‰æ‹©<code>preset</code>ï¼Œå¹¶å°†<code>preset</code>å†…éƒ¨çš„<code>plugin</code>å†™å…¥<code>package.json</code>çš„<code>dependencies</code>å†…éƒ¨</li></ol><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function-variable function" style="color:rgb(80, 250, 123)">resolvePreset</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> preset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">preset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> preset </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">load</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">preset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> answers </span><span class="token operator">=</span><span class="token plain"> inquirer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">prompt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'preset'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'list'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">message</span><span class="token operator">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">Please pick a preset:</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">choices</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'Default (Vue 2)'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">value</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'Default (Vue 2)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'Default (Vue 3)'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">value</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'Default (Vue 3)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'Manually select features'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">value</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'__manual__'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    preset </span><span class="token operator">=</span><span class="token plain"> answers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">preset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> deps </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">keys</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">preset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">plugins</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  deps</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">forEach</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">dep</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">plugins</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">pkg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">devDependencies</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">dep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> preset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">plugins</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">dep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>ç”Ÿæˆ<code>package.json</code>æ–‡ä»¶</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">writeFileSync</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">join</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">cwd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'package.json'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">stringify</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">pkg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">'utf8'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>å®‰è£…åˆå§‹<code>plugin</code>ä¾èµ–</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">shelljs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">exec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'npm install'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>åˆå§‹åŒ–<code>GeneratorAPI</code>å®ä¾‹ï¼Œ<code>GeneratorAPI</code>å®ä¾‹ä¼ å…¥<code>plugin</code>å†…éƒ¨çš„<code>generator</code>å‡½æ•°æ¥æ‹“å±•<code>Creator</code>å®ä¾‹çš„å¾…ç”Ÿæˆæ–‡ä»¶</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// vue-cli-service å†…éƒ¨ generator/index.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(80, 250, 123)">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">api</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">render</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'./template'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">doesCompile</span><span class="token operator">:</span><span class="token plain"> api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">hasPlugin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'babel'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">hasPlugin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'typescript'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">useBabel</span><span class="token operator">:</span><span class="token plain"> api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">hasPlugin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'babel'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">extendPackage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">scripts</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string-property property">'serve'</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'vue-cli-service serve'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string-property property">'build'</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'vue-cli-service build'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">browserslist</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">'&gt; 1%'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">'last 2 versions'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">'not dead'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token spread operator">...</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">vueVersion</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'3'</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">'not ie 11'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// GeneratorAPI æ’ä»¶å®ä¾‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">GeneratorAPI</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">constructor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">creator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">creator</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> generator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   * ä»å®‰è£…æ’ä»¶çš„è·¯å¾„ä¸­ç”Ÿæˆå¹¶æ¸²æŸ“æ¨¡æ¿æ–‡ä»¶</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   * @param templatePath</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   * @param data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">render</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">path</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">creator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">renderTemplate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   * æ‹“å±•package.jsonå­—æ®µ</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   * @param pkg</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">   */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">extendPkg</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">pkg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">creator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">extendPkg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">pkg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// è°ƒç”¨æ’ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function-variable function" style="color:rgb(80, 250, 123)">resolvePlugins</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">plugins</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">forEach</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">plugin</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> apply </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">plugin</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)">/generator</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">apply</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">GeneratorAPI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="6"><li>å†æ¬¡å®‰è£…ä¾èµ–</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">shelljs.exec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'npm install'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="7"><li>ç”Ÿæˆé¡¹ç›®æ–‡ä»¶</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">writeFileTree</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">files</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å½“ç„¶äº†ï¼Œè¿™ä¸ªåªæ˜¯ç®€åŒ–çš„ç‰ˆæœ¬ï¼Œå®é™…ä¸Š<code>vue-cli</code>å†…éƒ¨ä¼šå†é€šè¿‡ä¸€ä¸ªä¸­é—´çš„<code>Generator</code>å®ä¾‹æ¥ç®¡ç†æ‰€æœ‰æ’ä»¶ï¼Œå¹¶ä¸ä¼šå®Œå…¨æ”¾åœ¨ä¸»ç¨‹åº<code>Creator</code>å†…éƒ¨ï¼Œè€Œ<code>GeneratorAPI</code>åˆ™ç®¡ç†æ‰€æœ‰æ³¨å…¥åˆ°<code>plugin</code>çš„æ–¹æ³•ã€‚è¿™æ ·æ¯ä¸ª<code>class</code>å†…éƒ¨å„å¸å…¶è´£ï¼Œä½¿å¾—åç»­ç»´æŠ¤æ›´åŠ æ–¹ä¾¿ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="äº‹ä»¶æœºåˆ¶">äº‹ä»¶æœºåˆ¶<a class="hash-link" href="#äº‹ä»¶æœºåˆ¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>vue-cli</code>å†…éƒ¨ä¸»ç¨‹åº<code>Creator</code>ç»§æ‰¿äº† NodeJS çš„<code>EventEmitter</code>ï¼Œç„¶ååœ¨ç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ä¸­æš´éœ²ä¸€äº›äº‹ä»¶å›è°ƒã€‚</p><p><code>EventEmitter</code>æ¯”è¾ƒç®€å•ï¼Œ<code>on</code>å‡½æ•°ç”¨äºç»‘å®šäº‹ä»¶å‡½æ•°ï¼Œ<code>emit</code>å±æ€§ç”¨äºè§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚<code>emit</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº‹ä»¶åç§°ï¼Œåç»­å‚æ•°å°†ä¼ å…¥å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">emit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'creation'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token literal-property property">event</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'creating'</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">emit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'creation'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token literal-property property">event</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'git-init'</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">emit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'creation'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token literal-property property">event</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'plugins-install'</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">emit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'creation'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token literal-property property">event</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'invoking-generators'</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">emit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'creation'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token literal-property property">event</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'deps-install'</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">emit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'creation'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token literal-property property">event</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'completion-hooks'</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">emit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'creation'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token literal-property property">event</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'done'</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™æ ·åç»­åœ¨å…¶ä»–æ’ä»¶å†…éƒ¨å¯ä»¥é€šè¿‡åˆ›å»º<code>Creator</code>å®ä¾‹æ¥æ³¨å…¥å›è°ƒå‡½æ•°ï¼Œä¾‹å¦‚</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> creator </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Creator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">onCreationEvent</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token parameter"> event </span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    progress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">PROGRESS_ID</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token literal-property property">status</span><span class="token operator">:</span><span class="token plain"> event</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token literal-property property">info</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  creator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">on</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'creation'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> onCreationEvent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸€äº›nodejsçš„package">ä¸€äº›nodejsçš„package<a class="hash-link" href="#ä¸€äº›nodejsçš„package" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸€èˆ¬è¿™ç§ NodeJS CLI éƒ½ä¼šå¤§é‡ä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹<code>package</code>æ¥ç®€åŒ–å¼€å‘é€»è¾‘ï¼Œ<code>vue-cli</code>å†…éƒ¨ä¹Ÿä¸ä¹ä¸€äº›ç»å¸¸ä½¿ç”¨çš„ä¼˜è´¨ç¬¬ä¸‰æ–¹å¼€æºé¡¹ç›®ï¼Œä¾‹å¦‚<code>fs-extra</code>ï¼Œ<code>chalk</code>ç­‰è¿™äº›ï¼Œå°±ä¸å…¨éƒ¨åˆ—ä¸¾äº†ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸€äº›nodejsçš„å°æ–¹æ³•">ä¸€äº›nodejsçš„å°æ–¹æ³•<a class="hash-link" href="#ä¸€äº›nodejsçš„å°æ–¹æ³•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨<code>vue-cli</code>å†…éƒ¨æœ‰ä¸€äº›é€šç”¨æ–¹æ³•å¯ä»¥ç›´æ¥æ‹¿è¿‡æ¥ç”¨ï¼Œåç»­æˆ‘æ‰“ç®—æŠ½æˆä¸€ä¸ªå•ç‹¬çš„<code>node-util</code> npm åŒ…çš„å½¢å¼ï¼Œæ•´ç†ä¸€äº›å¸¸ç”¨çš„ NodeJS æ–¹æ³•ï¼Œè¿™æ ·ä»¥åç»´æŠ¤æ¯”è¾ƒæ–¹ä¾¿ã€‚</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// åˆ›å»ºæ–‡ä»¶å¤¹å¹¶å†™å…¥æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> fs </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'fs-extra'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">writeFileTree</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">dir</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> files</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> include</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">keys</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">files</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">forEach</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">include </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token operator">!</span><span class="token plain">include</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">has</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> filePath </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">join</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">ensureDirSync</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">dirname</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">filePath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">writeFileSync</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">filePath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> files</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[vuecliæºç è§£æ(1)]]></title>
            <link>https://icodex.me/2022/01/23/vuecliæºç è§£æ1</link>
            <guid>/2022/01/23/vuecliæºç è§£æ1</guid>
            <pubDate>Sun, 23 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[image-20220122161749258]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="image-20220122161749258" src="/assets/images/image-20220122161749258-383f62ef576a853b9ae26397291e6d3f.png" width="988" height="563" class="img_ev3q"></p><p><code>vue-cli</code>æ˜¯ vue å®˜æ–¹å‡ºå“çš„è„šæ‰‹æ¶é¡¹ç›®ï¼Œç”¨æ¥å¿«é€Ÿæ­å»º<code>vue</code>é¡¹ç›®ï¼Œä¸€é”®ç”Ÿæˆé¡¹ç›®åŸºç¡€ä»£ç ã€‚</p><p>ä¸€ç›´å¯¹å…¶å†…éƒ¨çš„è¿è¡ŒåŸç†æ¯”è¾ƒå¥½å¥‡ï¼Œå¹¶ä¸”å¼€å‘è„šæ‰‹æ¶çš„èƒ½åŠ›ä¹Ÿæ˜¯ä¸€åå‰ç«¯å¼€å‘äººå‘˜éœ€è¦æŒæ¡çš„æŠ€èƒ½ï¼Œæ‰€ä»¥è¿™é‡Œä»¥<code>v4.5.15</code>ç‰ˆæœ¬ä¸ºä¾‹ï¼Œè®°å½•ä¸€ä¸‹æºç ç ”ç©¶çš„è¿‡ç¨‹å’Œå­¦ä¹ ç‚¹ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å…¥å£">å…¥å£<a class="hash-link" href="#å…¥å£" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>vue-cli</code>é‡‡ç”¨çš„ä»ç„¶æ˜¯é€šè¿‡<code>lerna</code>ç®¡ç†çš„ monorepoï¼Œä¸çŸ¥é“æœªæ¥ä¼šä¸ä¼šè¿ç§»åˆ° pnpmï¼Œä»<code>package.json</code>å¯ä»¥çœ‹åˆ°æ ¸å¿ƒä»“åº“å°±æ˜¯ä»¥ä¸‹ä¸‰ä¸ªï¼Œå…¶ä¸­<code>@vue</code>å°±æ˜¯ä¸€äº›æ ¸å¿ƒä»£ç ï¼ŒåŒ…æ‹¬è„šæ‰‹æ¶<code>@vue/cli</code>ã€<code>vue-cli-service</code>ä»¥åŠä¸€äº›æ’ä»¶ã€‚</p><p><img loading="lazy" alt="image-20220122103920356" src="/assets/images/image-20220122103920356-e89179755b064eeedf19b5d580f7cc1c.png" width="763" height="141" class="img_ev3q"></p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">vue-cli</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€ docs                                                 // æ–‡æ¡£</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€ packages                                         </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”œâ”€ @vue</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ babel-preset-app</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli                                // @vue/cli</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-init</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-overlay</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-plugin-babel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-plugin-e2e-cypress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-plugin-e2e-nightwatch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-plugin-e2e-webdriverio</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-plugin-eslint</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-plugin-pwa</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-plugin-router</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-plugin-typescript</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-plugin-unit-jest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-plugin-unit-mocha</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-plugin-vuex</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-service                // vue-cli-service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-shared-utils</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-test-utils         // ä¸€äº›ç¬¬ä¸‰åº“çš„æºä»£ç ï¼Œæˆ–è€…ä¸€äº›å·¥å…·å‡½æ•°ç­‰</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-ui</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â”œâ”€ cli-ui-addon-webpack</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚    â”‚    â””â”€ cli-ui-addon-widgets</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€ scripts                                          // ä¸€äº›ç®¡ç†monorepoçš„ç¨‹åº</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="vuecli">@vue/cli<a class="hash-link" href="#vuecli" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å…ˆä»è„šæ‰‹æ¶å¯åŠ¨å¼•å¯¼ç¨‹åº<code>@vue/cli</code>å¼€å§‹åˆ†æï¼Œä»<code>package.json</code>æ³¨å†Œçš„<code>bin</code>å±æ€§æ‰¾åˆ°å…¥å£ç¨‹åºä¸º<code>bin/vue.js</code>.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"bin"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"vue"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"bin/vue.js"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ£€æŸ¥nodejsç‰ˆæœ¬">æ£€æŸ¥Nodejsç‰ˆæœ¬<a class="hash-link" href="#æ£€æŸ¥nodejsç‰ˆæœ¬" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é¦–å…ˆä¼šé€šè¿‡<code>semver</code>è¿™ä¸ªåº“æ£€æŸ¥ä½¿ç”¨è€…æœ¬åœ° Nodejs çš„ç‰ˆæœ¬å’Œåœ¨<code>@vue/cli</code>çš„<code>package.json</code>ä¸‹è¦æ±‚çš„ç‰ˆæœ¬æ˜¯å¦ç¬¦åˆã€‚</p><p><img loading="lazy" alt="image-20220122105655018" src="/assets/images/image-20220122105655018-2a59e01ca4a44436ff6c9418216d8237.png" width="751" height="310" class="img_ev3q"></p><p>è¿™é‡Œç®€å•äº†è§£ä¸‹ Nodejs çš„ç‰ˆæœ¬ç®¡ç†ï¼ŒNodejs ç‰ˆæœ¬æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li><code>CURRENT</code>ï¼šå½“å‰çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯å½“å‰æœ€æ–°çš„ Nodejs ç‰ˆæœ¬ï¼Œ<code>ACTIVE</code>ç‰ˆæœ¬çš„ Nodejs ä¼šç»´æŠ¤æŒç»­ 6 ä¸ªæœˆæ—¶é—´ï¼Œ6 ä¸ªæœˆä¹‹åå¥‡æ•°ç‰ˆæœ¬ä¼šä¸å†ç»´æŠ¤ï¼Œè€Œå¶æ•°ç‰ˆæœ¬ä¼šå˜æˆ<code>ACTIVE</code>çŠ¶æ€çš„<code>LTS</code>ç‰ˆæœ¬</li><li><code>ACTIVE</code>ï¼šæ´»è·ƒçŠ¶æ€ï¼Œæ˜¯æ­£åœ¨ç§¯æç»´æŠ¤å’Œå‡çº§çš„ç‰ˆæœ¬ï¼ŒåŒ…æ‹¬ä¸€äº› BUG ä¿®å¤ï¼ŒåŠŸèƒ½æ”¹è¿›ç­‰</li><li><code>MAINTENANCE</code>ï¼šç»´æŠ¤çŠ¶æ€ï¼Œåªä¿®å¤ BUGï¼Œç»´æŠ¤æ—¶é—´ä¸å®š</li><li><code>EOL</code>ï¼šEnd of Lifeï¼Œä¹Ÿå°±æ˜¯ç»ˆæ­¢ç»´æŠ¤çš„ç‰ˆæœ¬</li><li><code>LTS</code>ï¼šlong-term supportï¼Œä¹Ÿå°±æ˜¯é•¿æœŸç»´æŠ¤ç‰ˆæœ¬ï¼Œè¿™æ„å‘³ç€é‡å¤§çš„ Bug å°†åœ¨åç»­çš„ 30 ä¸ªæœˆå†…æŒç»­å¾—åˆ°ä¸æ–­åœ°ä¿®å¤ã€‚</li></ul><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒNodejs 12 å·²è¿›å…¥ç»´æŠ¤çŠ¶æ€ï¼Œå¹¶ä¸”åœ¨ 2022 å¹´ 4 æœˆä»½å°±ä¼šç»ˆæ­¢ç»´æŠ¤ï¼Œåˆ°æ—¶å€™Nodejs 18 ä¹Ÿä¼šå‘å¸ƒï¼ŒNodejs 17 ä¹Ÿä¼šç»ˆæ­¢ç»´æŠ¤ã€‚ åæ­£ä¸€ä¸ªåŸåˆ™æ˜¯å§‹ç»ˆç”¨ LTS ç‰ˆæœ¬å°±è¡Œäº†ã€‚å¯ä»¥ä½¿ç”¨<code>nvm</code>ä¾¿æ·çš„ç®¡ç† Nodejs çš„ç‰ˆæœ¬ã€‚</p><p><img loading="lazy" alt="Releases" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NjAiIGhlaWdodD0iNTAwIj48ZGVmcz48c3R5bGU+LmN1cnJlbnR7ZmlsbDojMmFhNzQ4fS5hY3RpdmV7ZmlsbDojNDdiNGZmfS5tYWludGVuYW5jZSwudGljayB0ZXh0e2ZpbGw6Izg5YTE5ZH0udW5zdGFibGV7ZmlsbDojZmZiODAwfS5iYXItam9pbiwubGFiZWx7ZmlsbDojZmZmfS5iYXItam9pbi5jdXJyZW50e2Rpc3BsYXk6bm9uZX0udGljayB0ZXh0e2ZvbnQ6MTZweCBzYW5zLXNlcmlmfS5heGlzLS15IC50aWNrIHRleHR7dGV4dC1hbmNob3I6ZW5kfS5sYWJlbHtmb250OjIwcHggc2Fucy1zZXJpZjtmb250LXdlaWdodDoxMDA7dGV4dC1hbmNob3I6c3RhcnQ7ZG9taW5hbnQtYmFzZWxpbmU6bWlkZGxlO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZX08L3N0eWxlPjwvZGVmcz48ZyBpZD0iYmFyLWNvbnRhaW5lciI+PGcgY2xhc3M9ImF4aXMgYXhpcy0teCIgZmlsbD0ibm9uZSIgZm9udC1zaXplPSIxMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPjxnIGNsYXNzPSJ0aWNrIj48cGF0aCBzdHJva2U9IiM4OWExOWQiIGQ9Ik0uNSAwdjQ0MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQ1LjE5NSAzMCkiLz48dGV4dCBmaWxsPSIjMDAwIiB4PSIuNSIgZHk9Ii0xMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQ1LjE5NSAzMCkiPkp1bCAyMDIxPC90ZXh0PjwvZz48ZyBjbGFzcz0idGljayI+PHBhdGggc3Ryb2tlPSIjODlhMTlkIiBzdHJva2UtZGFzaGFycmF5PSIyLDIiIGQ9Ik0uNSAwdjQ0MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUzLjI3NSAzMCkiLz48dGV4dCBmaWxsPSIjMDAwIiB4PSIuNSIgZHk9Ii0xMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUzLjI3NSAzMCkiPk9jdCAyMDIxPC90ZXh0PjwvZz48ZyBjbGFzcz0idGljayI+PHBhdGggc3Ryb2tlPSIjODlhMTlkIiBkPSJNLjUgMHY0NDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM2MS40MDQgMzApIi8+PHRleHQgZmlsbD0iIzAwMCIgeD0iLjUiIGR5PSItMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM2MS40MDQgMzApIj5KYW4gMjAyMjwvdGV4dD48L2c+PGcgY2xhc3M9InRpY2siPjxwYXRoIHN0cm9rZT0iIzg5YTE5ZCIgc3Ryb2tlLWRhc2hhcnJheT0iMiwyIiBkPSJNLjUgMHY0NDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ2Ny4wODYgMzApIi8+PHRleHQgZmlsbD0iIzAwMCIgeD0iLjUiIGR5PSItMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ2Ny4wODYgMzApIj5BcHIgMjAyMjwvdGV4dD48L2c+PGcgY2xhc3M9InRpY2siPjxwYXRoIHN0cm9rZT0iIzg5YTE5ZCIgZD0iTS41IDB2NDQwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NzMuOTkxIDMwKSIvPjx0ZXh0IGZpbGw9IiMwMDAiIHg9Ii41IiBkeT0iLTEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NzMuOTkxIDMwKSI+SnVsIDIwMjI8L3RleHQ+PC9nPjxnIGNsYXNzPSJ0aWNrIj48cGF0aCBzdHJva2U9IiM4OWExOWQiIHN0cm9rZS1kYXNoYXJyYXk9IjIsMiIgZD0iTS41IDB2NDQwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2ODIuMDcxIDMwKSIvPjx0ZXh0IGZpbGw9IiMwMDAiIHg9Ii41IiBkeT0iLTEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2ODIuMDcxIDMwKSI+T2N0IDIwMjI8L3RleHQ+PC9nPjxnIGNsYXNzPSJ0aWNrIj48cGF0aCBzdHJva2U9IiM4OWExOWQiIGQ9Ik0uNSAwdjQ0MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzkwLjIgMzApIi8+PHRleHQgZmlsbD0iIzAwMCIgeD0iLjUiIGR5PSItMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDc5MC4yIDMwKSI+SmFuIDIwMjM8L3RleHQ+PC9nPjxnIGNsYXNzPSJ0aWNrIj48cGF0aCBzdHJva2U9IiM4OWExOWQiIHN0cm9rZS1kYXNoYXJyYXk9IjIsMiIgZD0iTS41IDB2NDQwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4OTUuODgyIDMwKSIvPjx0ZXh0IGZpbGw9IiMwMDAiIHg9Ii41IiBkeT0iLTEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4OTUuODgyIDMwKSI+QXByIDIwMjM8L3RleHQ+PC9nPjwvZz48ZyBjbGFzcz0iYXhpcyBheGlzLS15IiBmaWxsPSJub25lIiBmb250LXNpemU9IjEwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiI+PGcgY2xhc3M9InRpY2siPjxwYXRoIHN0cm9rZT0iI2UxZTdlNyIgZD0iTTAgLjVoODIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTAgNzUuMzk3KSIvPjx0ZXh0IGZpbGw9IiMwMDAiIHk9Ii41IiBkeT0iLjMyZW0iIGR4PSItMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMCA3NS4zOTcpIj5NYXN0ZXI8L3RleHQ+PC9nPjxnIGNsYXNzPSJ0aWNrIj48cGF0aCBzdHJva2U9IiNlMWU3ZTciIGQ9Ik0wIC41aDgyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEwIDE0NS4yMzgpIi8+PHRleHQgZmlsbD0iIzAwMCIgeT0iLjUiIGR5PSIuMzJlbSIgZHg9Ii0xMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEwIDE0NS4yMzgpIj5Ob2RlLmpzIDEyPC90ZXh0PjwvZz48ZyBjbGFzcz0idGljayI+PHBhdGggc3Ryb2tlPSIjZTFlN2U3IiBkPSJNMCAuNWg4MjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMCAyMTUuMDgpIi8+PHRleHQgZmlsbD0iIzAwMCIgeT0iLjUiIGR5PSIuMzJlbSIgZHg9Ii0xMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEwIDIxNS4wOCkiPk5vZGUuanMgMTQ8L3RleHQ+PC9nPjxnIGNsYXNzPSJ0aWNrIj48cGF0aCBzdHJva2U9IiNlMWU3ZTciIGQ9Ik0wIC41aDgyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEwIDI4NC45MikiLz48dGV4dCBmaWxsPSIjMDAwIiB5PSIuNSIgZHk9Ii4zMmVtIiBkeD0iLTEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTAgMjg0LjkyKSI+Tm9kZS5qcyAxNjwvdGV4dD48L2c+PGcgY2xhc3M9InRpY2siPjxwYXRoIHN0cm9rZT0iI2UxZTdlNyIgZD0iTTAgLjVoODIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTAgMzU0Ljc2MikiLz48dGV4dCBmaWxsPSIjMDAwIiB5PSIuNSIgZHk9Ii4zMmVtIiBkeD0iLTEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTAgMzU0Ljc2MikiPk5vZGUuanMgMTc8L3RleHQ+PC9nPjxnIGNsYXNzPSJ0aWNrIj48cGF0aCBzdHJva2U9IiNlMWU3ZTciIGQ9Ik0wIC41aDgyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEwIDQyNC42MDMpIi8+PHRleHQgZmlsbD0iIzAwMCIgeT0iLjUiIGR5PSIuMzJlbSIgZHg9Ii0xMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEwIDQyNC42MDMpIj5Ob2RlLmpzIDE4PC90ZXh0PjwvZz48cGF0aCBzdHJva2U9IiM4OWExOWQiIGQ9Ik0wIDQ0MGg4MjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMCAzMCkiLz48L2c+PHBhdGggY2xhc3M9ImJhciB1bnN0YWJsZSIgZD0iTTAgMjAuOTUyaDgyMHY0OC44ODlIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMCAzMCkiLz48dGV4dCBjbGFzcz0ibGFiZWwiIHg9IjE1IiB5PSI0Ny4zOTciIHN0eWxlPSJvcGFjaXR5OjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMCAzMCkiPnVuc3RhYmxlPC90ZXh0PjxwYXRoIGNsYXNzPSJiYXIgbWFpbnRlbmFuY2UiIGQ9Ik0wIDkwLjc5NGgzOTEuMjAzdjQ4Ljg4OUgweiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEwIDMwKSIvPjx0ZXh0IGNsYXNzPSJsYWJlbCIgeD0iMTUiIHk9IjExNy4yMzgiIHN0eWxlPSJvcGFjaXR5OjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMCAzMCkiPm1haW50ZW5hbmNlPC90ZXh0PjxwYXRoIGNsYXNzPSJiYXIgbWFpbnRlbmFuY2UiIGQ9Ik0xNjQuNDcgMTYwLjYzNUg4MjB2NDguODg5SDE2NC40N3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMCAzMCkiLz48cGF0aCBjbGFzcz0iYmFyLWpvaW4gbWFpbnRlbmFuY2UiIHN0eWxlPSJvcGFjaXR5OjEiIGQ9Ik0xNjMuNDcgMTYwLjYzNWgydjQ4Ljg4OWgtMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMCAzMCkiLz48dGV4dCBjbGFzcz0ibGFiZWwiIHg9IjE3OS40NyIgeT0iMTg3LjA3OSIgc3R5bGU9Im9wYWNpdHk6MSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEwIDMwKSI+bWFpbnRlbmFuY2U8L3RleHQ+PHBhdGggY2xhc3M9ImJhciBhY3RpdmUiIGQ9Ik0wIDE2MC42MzVoMTY0LjQ3djQ4Ljg4OUgweiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEwIDMwKSIvPjx0ZXh0IGNsYXNzPSJsYWJlbCIgeD0iMTUiIHk9IjE4Ny4wNzkiIHN0eWxlPSJvcGFjaXR5OjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMCAzMCkiPmFjdGl2ZTwvdGV4dD48cGF0aCBjbGFzcz0iYmFyIG1haW50ZW5hbmNlIiBkPSJNNTkyLjA5MiAyMzAuNDc2SDgyMHY0OC44ODlINTkyLjA5MnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMCAzMCkiLz48cGF0aCBjbGFzcz0iYmFyLWpvaW4gbWFpbnRlbmFuY2UiIHN0eWxlPSJvcGFjaXR5OjEiIGQ9Ik01OTEuMDkyIDIzMC40NzZoMnY0OC44ODloLTJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTAgMzApIi8+PHRleHQgY2xhc3M9ImxhYmVsIiB4PSI2MDcuMDkyIiB5PSIyNTYuOTIxIiBzdHlsZT0ib3BhY2l0eToxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTAgMzApIj5tYWludGVuYW5jZTwvdGV4dD48Zz48cGF0aCBjbGFzcz0iYmFyIGFjdGl2ZSIgZD0iTTE3Mi42OTMgMjMwLjQ3Nmg0MTkuMzk4djQ4Ljg4OUgxNzIuNjkzeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEwIDMwKSIvPjxwYXRoIGNsYXNzPSJiYXItam9pbiBhY3RpdmUiIHN0eWxlPSJvcGFjaXR5OjEiIGQ9Ik0xNzEuNjkzIDIzMC40NzZoMnY0OC44ODloLTJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTAgMzApIi8+PHRleHQgY2xhc3M9ImxhYmVsIiB4PSIxODcuNjkzIiB5PSIyNTYuOTIxIiBzdHlsZT0ib3BhY2l0eToxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTAgMzApIj5hY3RpdmU8L3RleHQ+PC9nPjxnPjxwYXRoIGNsYXNzPSJiYXIgY3VycmVudCIgZD0iTTAgMjMwLjQ3NmgxNzIuNjkzdjQ4Ljg4OUgweiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEwIDMwKSIvPjx0ZXh0IGNsYXNzPSJsYWJlbCIgeD0iMTUiIHk9IjI1Ni45MjEiIHN0eWxlPSJvcGFjaXR5OjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMCAzMCkiPmN1cnJlbnQ8L3RleHQ+PC9nPjxnPjxwYXRoIGNsYXNzPSJiYXIgbWFpbnRlbmFuY2UiIGQ9Ik0zNTcuMTM1IDMwMC4zMTdoNzEuNjYydjQ4Ljg4OWgtNzEuNjYyeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEwIDMwKSIvPjxwYXRoIGNsYXNzPSJiYXItam9pbiBtYWludGVuYW5jZSIgc3R5bGU9Im9wYWNpdHk6MSIgZD0iTTM1Ni4xMzUgMzAwLjMxN2gydjQ4Ljg4OWgtMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMCAzMCkiLz48L2c+PGc+PHBhdGggY2xhc3M9ImJhciBjdXJyZW50IiBkPSJNMTY0LjQ3IDMwMC4zMTdoMTkyLjY2NXY0OC44ODlIMTY0LjQ3eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEwIDMwKSIvPjx0ZXh0IGNsYXNzPSJsYWJlbCIgeD0iMTc5LjQ3IiB5PSIzMjYuNzYyIiBzdHlsZT0ib3BhY2l0eToxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTAgMzApIj5jdXJyZW50PC90ZXh0PjwvZz48Zz48cGF0aCBjbGFzcz0iYmFyIGFjdGl2ZSIgZD0iTTYwMC4zMTUgMzcwLjE1OUg4MjB2NDguODg5SDYwMC4zMTV6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTAgMzApIi8+PHBhdGggY2xhc3M9ImJhci1qb2luIGFjdGl2ZSIgc3R5bGU9Im9wYWNpdHk6MSIgZD0iTTU5OS4zMTUgMzcwLjE1OWgydjQ4Ljg4OWgtMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMCAzMCkiLz48dGV4dCBjbGFzcz0ibGFiZWwiIHg9IjYxNS4zMTUiIHk9IjM5Ni42MDMiIHN0eWxlPSJvcGFjaXR5OjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMCAzMCkiPmFjdGl2ZTwvdGV4dD48L2c+PGc+PHBhdGggY2xhc3M9ImJhciBjdXJyZW50IiBkPSJNMzc4LjI4MSAzNzAuMTU5aDIyMi4wMzR2NDguODg5SDM3OC4yODF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTAgMzApIi8+PHRleHQgY2xhc3M9ImxhYmVsIiB4PSIzOTMuMjgxIiB5PSIzOTYuNjAzIiBzdHlsZT0ib3BhY2l0eToxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTAgMzApIj5jdXJyZW50PC90ZXh0PjwvZz48L2c+PC9zdmc+" width="960" height="500" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ³¨å†Œå‘½ä»¤">æ³¨å†Œå‘½ä»¤<a class="hash-link" href="#æ³¨å†Œå‘½ä»¤" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç„¶åä½¿ç”¨<code>commanderjs</code>æ³¨å†Œå‘½ä»¤<code>create</code>ï¼Œå¹¶ä¸”åŒ…å«å¿…å¡«çš„<code>app-name</code>å‚æ•°ï¼Œå¯ä»¥çœ‹åˆ°<code>create</code>æ³¨å†Œä»¥åï¼Œä¼šå»åŠ è½½ä¸Šå±‚<code>lib</code>ä¸‹çš„<code>create.js</code>ç¨‹åºï¼Œè¿™é‡Œè¿˜ä¼ é€’äº†é¡¹ç›®åç§°å’Œé¢å¤–çš„ CLI å‚æ•°ã€‚</p><p><img loading="lazy" alt="image-20220122125035080" src="/assets/images/image-20220122125035080-24427345132120b9bc9ef93da02b990c.png" width="1417" height="545" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ ¡éªŒé¡¹ç›®åç§°">æ ¡éªŒé¡¹ç›®åç§°<a class="hash-link" href="#æ ¡éªŒé¡¹ç›®åç§°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>create.js</code>å†…éƒ¨é¦–å…ˆä¼šé€šè¿‡<code>validate-npm-package-name</code>è¿™ä¸ªåº“å»æ ¡éªŒé¡¹ç›®åç§°ï¼Œå¹¶ä¸”ä¼šé¢å¤–å¤„ç†ä½¿ç”¨<code>.</code>ä½œä¸ºå½“å‰ç›®å½•çš„æƒ…å†µï¼Œè€ƒè™‘çš„éå¸¸å‘¨åˆ°ã€‚</p><p><img loading="lazy" alt="image-20220122150200380" src="/assets/images/image-20220122150200380-542f8c4c464b1ddf0a47efb71e6dba44.png" width="1070" height="151" class="img_ev3q"></p><p>å¦‚æœé€šè¿‡ CLI æŒ‡å®š<code>--merge</code>ï¼Œåˆ™ä¼šæ¸…ç©ºç›®æ ‡æ–‡ä»¶å¤¹ï¼Œå¦åˆ™ä¼šä½¿ç”¨<code>inquirer</code>åœ¨ CLI å‘èµ·é€‰é¡¹é€‰æ‹©æ˜¯å¦åˆå¹¶ç›®å½•æ–‡ä»¶æˆ–è€…é€‰æ‹©æ¸…ç©ºã€‚è¿™é‡Œä½¿ç”¨äº†<code>fs-extra</code>æ¥æ“ä½œæ–‡ä»¶ç³»ç»Ÿã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åˆå§‹åŒ–creatorå®ä¾‹">åˆå§‹åŒ–Creatorå®ä¾‹<a class="hash-link" href="#åˆå§‹åŒ–creatorå®ä¾‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ç¡®è®¤äº†ç›®æ ‡æ–‡ä»¶å¤¹ä»¥åï¼Œä¼šåˆå§‹åŒ–<code>Creator</code>çš„å®ä¾‹ï¼Œå¹¶ä¼ é€’ CLI å‚æ•°æ¥è°ƒç”¨å®ä¾‹çš„<code>create</code>æ–¹æ³•ã€‚</p><p><img loading="lazy" alt="image-20220122131148494" src="/assets/images/image-20220122131148494-8c1580e427fbf12b2c2529d62a84d835.png" width="1133" height="84" class="img_ev3q"></p><p>è¿™é‡Œä¼ é€’äº†ä¸‰ä¸ªåˆå§‹åŒ–å‚æ•°ï¼š</p><ul><li><code>name</code>ï¼šé¡¹ç›®åç§°</li><li><code>targetDir</code>ï¼šåˆ›å»ºé¡¹ç›®çš„æ–‡ä»¶å¤¹</li><li><code>getPromptModules()</code>ï¼šåŠ è½½ä½äºä¸Šå±‚<code>promptModules</code>æ–‡ä»¶å¤¹ä¸‹çš„ä¸€äº›å‡½æ•°</li></ul><p><img loading="lazy" alt="image-20220122134405339" src="/assets/images/image-20220122134405339-97c651ae244647793dab917a9baef396.png" width="987" height="375" class="img_ev3q"></p><p>ä½äº<code>promptModules</code>ä¸‹çš„éƒ½æ˜¯ä¸€äº›ç”¨æˆ·åœ¨åˆ›å»ºé¡¹ç›®æ—¶æ‰‹åŠ¨é€‰æ‹©çš„åŠŸèƒ½é¡¹ï¼Œä¾‹å¦‚<code>vue</code>çš„ç‰ˆæœ¬ï¼Œæ˜¯å¦ä½¿ç”¨ TSï¼ŒCSSé¢„å¤„ç†å™¨ç­‰ã€‚</p><p>ä»¥<code>../promptModules/babel.js</code>ä¸ºä¾‹ï¼Œå¯ä»¥çœ‹åˆ°å…¶å†…éƒ¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ª<code>cli</code>å¯¹è±¡ï¼Œå¹¶ä¸”è°ƒç”¨äº†<code>cli</code>å¯¹è±¡æš´éœ²çš„<code>injectFeature</code>å’Œ<code>onPromptComplete</code>è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p><p><img loading="lazy" alt="image-20220122143703009" src="/assets/images/image-20220122143703009-513ef3844ba30f08507530e64a9fdf74.png" width="1120" height="526" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è·å–prompté€‰é¡¹">è·å–prompté€‰é¡¹<a class="hash-link" href="#è·å–prompté€‰é¡¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" alt="image-20220122132912054" src="/assets/images/image-20220122132912054-be4f13282b0c60743908586426676f87.png" width="1222" height="507" class="img_ev3q"></p><p>åœ¨<code>Creator</code>çš„æ„é€ å‡½æ•°å†…éƒ¨ä¼šåˆå§‹åŒ–ä¸€äº›å®ä¾‹å±æ€§ï¼š</p><ul><li><p><code>name</code>ï¼šé¡¹ç›®åç§°</p></li><li><p><code>context</code>ï¼šå½“å‰åˆ›å»ºçš„ç›®å½•</p></li><li><p><code>presetPrompt</code>ï¼š<code>preset</code>çš„é€‰é¡¹ï¼›é€šè¿‡<code>resolveIntroPrompts</code>è·å–<code>preset</code>ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…æ‹¬åŠ è½½ç”¨æˆ·åˆ›å»ºçš„ä¿å­˜åœ¨æœ¬åœ°<code>.vuerc</code>ä¸‹çš„<code>preset</code>ï¼Œä»¥åŠ<code>@vue/cli</code>å†…ç½®é»˜è®¤çš„<code>preset</code>ä¿¡æ¯ï¼Œç„¶åç»„åˆæˆ<code>inquirer</code>é€‰é¡¹å‚æ•°ä¿å­˜åœ¨è¿™ä¸ªå±æ€§ä¸‹</p></li></ul><p><img loading="lazy" alt="image-20220122155504150" src="/assets/images/image-20220122155504150-38f59d0305f5ffad78dd1bd2304e85c0.png" width="1130" height="830" class="img_ev3q"></p><p>é»˜è®¤çš„<code>preset</code>åªæœ‰ä¸¤ä¸ªï¼šé€‰æ‹©<code>vue2</code>å’Œ<code>vue3</code>çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”éƒ½ä¼šåŒ…å«<code>@vue/cli-plugin-babel</code>å’Œ<code>@vue/cli-plugin-eslint</code>ä¸¤ä¸ª<code>plugin</code></p><p><img loading="lazy" alt="image-20220122143427655" src="/assets/images/image-20220122143427655-cdedc8637bc125a0aa6acfbbb3d29a60.png" width="1120" height="577" class="img_ev3q"></p><ul><li><code>featurePrompt</code>ï¼šå¦‚æœç”¨æˆ·é€‰æ‹©ä¸ä½¿ç”¨ä»»ä½•<code>preset</code>è€Œæ˜¯æ‰‹åŠ¨é€‰æ‹©ä¸€äº›åŠŸèƒ½æ¥åˆ›å»ºé¡¹ç›®ï¼Œä¾‹å¦‚æ˜¯å¦ä½¿ç”¨ TSï¼Œé€‰æ‹© CSS é¢„å¤„ç†å™¨ç­‰ï¼Œé‚£ä¹ˆå°±ä¼šä»<code>featurePrompt</code>åŠ è½½ä¸€äº›é€‰é¡¹</li></ul><p><img loading="lazy" alt="image-20220122135142250" src="/assets/images/image-20220122135142250-6fb804ccbb759927bdba55d812c84d50.png" width="1118" height="625" class="img_ev3q"></p><ul><li><code>outroPrompts</code>ï¼šä¸»è¦æ˜¯é€šè¿‡<code>inquirer</code>æŒ‡å®šçš„ä¸€äº›é€‰é¡¹ï¼Œä¾‹å¦‚ä¿å­˜é…ç½®æ–‡ä»¶çš„æ–¹å¼ã€é€‰æ‹©ä½¿ç”¨çš„ä¾èµ–ç®¡ç†å·¥å…·npm,yarn,pnpmç­‰</li></ul><p>ä¹‹åä¼šé€šè¿‡ä¼ å…¥å½“å‰å®ä¾‹å¯¹è±¡<code>this</code>æ¥åˆå§‹åŒ–ä¸€ä¸ª<code>PromptModuleAPI</code>çš„å®ä¾‹ã€‚</p><p><img loading="lazy" alt="image-20220122135843585" src="/assets/images/image-20220122135843585-90887d2e397c38afe1f971a04c3bec80.png" width="889" height="85" class="img_ev3q"></p><p><code>PromptModuleAPI</code>å†…éƒ¨ä¼šå¾€è‡ªèº«çš„å®ä¾‹ä¸ŠæŒ‚è½½ä¸€ä¸ª<code>creator</code>å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯<code>Creator</code>çš„å®ä¾‹ï¼Œè¿™æ ·åœ¨<code>PromptModuleAPI</code>å†…éƒ¨çš„å®ä¾‹å°±å¯ä»¥é€šè¿‡<code>creator</code>å¯¹è±¡è®¿é—®<code>Creator</code>çš„å®ä¾‹å†…éƒ¨çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><p><img loading="lazy" alt="image-20220122135238009" src="/assets/images/image-20220122135238009-cbab834c5827e0a82f2b06e69ccce4af.png" width="1022" height="578" class="img_ev3q"></p><p>è¿™æ—¶å€™åˆå§‹åŒ–<code>Creator</code>å®ä¾‹æ—¶ä¼ å…¥çš„<code>promptModules</code>å†…éƒ¨çš„æ¯ä¸ªå‡½æ•°å°±ä¼šè¢«è°ƒç”¨ï¼Œå¹¶ä¼ å…¥<code>PromptModuleAPI</code>çš„å®ä¾‹ä½œä¸ºå‚æ•°ï¼Œæ¯ä¸ªå‡½æ•°å†…éƒ¨é€šè¿‡è°ƒç”¨<code>PromptModuleAPI</code>å†…éƒ¨çš„æ–¹æ³•å†å‘<code>Creator</code>å®ä¾‹å†…éƒ¨çš„å±æ€§æ³¨å…¥è‡ªèº«çš„<code>prompt</code>é€‰é¡¹ï¼Œä¸å¾—ä¸è¯´é€»è¾‘æœ‰ç‚¹ç»•ï¼Œä½†æ˜¯æé«˜äº†ç¨‹åºçš„æ‹“å±•æ€§ï¼Œä»¥å<code>@vue/cli</code>å†…éƒ¨æƒ³æ‹“å±•ä¸€äº›åŠŸèƒ½ï¼Œåªéœ€è¦åœ¨<code>promptModules</code>æ–‡ä»¶å¤¹ä¸‹ç¼–å†™ç¨‹åºå³å¯ã€‚</p><ul><li><code>injectFeature</code>ï¼šå¾€å®ä¾‹çš„<code>featurePrompt.choices</code>æ¨å…¥ä¸€äº›<code>feature</code></li><li><code>injectPrompt</code>ï¼šå¾€å®ä¾‹çš„<code>injectedPrompts</code>æ¨å…¥ä¸€äº›<code>prompt</code></li><li><code>injectOptionForPrompt</code>ï¼šå¾€<code>injectedPrompts.choices</code>æ¨å…¥ä¸€äº›é€‰é¡¹</li><li><code>onPromptComplete</code>ï¼šå¾€å®ä¾‹çš„<code>promptCompleteCbs</code>æ¨å…¥å›è°ƒå‡½æ•°ï¼Œåœ¨<code>prompt</code>æ‰§è¡Œå®Œä»¥åæ‰§è¡Œ</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç»„åˆpromptå¹¶è·å–preset">ç»„åˆpromptå¹¶è·å–preset<a class="hash-link" href="#ç»„åˆpromptå¹¶è·å–preset" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åˆå§‹åŒ–<code>Creator</code>å®ä¾‹ä»¥åä¼šè°ƒç”¨<code>create</code>æ–¹æ³•ï¼Œæ¥æ”¶ CLI å‘½ä»¤è¡ŒæŒ‡å®šçš„æ‰€æœ‰å‚æ•°ï¼Œåœ¨ä½¿ç”¨<code>vue create xx</code>å‘½ä»¤æ²¡æœ‰æŒ‡å®šä»»ä½•å…¶ä»–å‚æ•°çš„æƒ…å†µä¸‹ä¼šè¿›å…¥<code>promptAndResolvePreset</code>æ–¹æ³•ã€‚<code>promptAndResolvePreset</code>å†…éƒ¨ä¸»è¦åšäº†ä¸¤ä»¶äº‹ï¼š</p><ul><li>åˆå¹¶<code>Creator</code>å®ä¾‹çš„<code>presetPrompt</code>ï¼Œ<code>featurePrompt</code>ï¼Œ<code>injectedPrompts</code>ä»¥åŠ<code>outroPrompts</code>è¿™äº›é€‰é¡¹ï¼Œå¹¶ä¸”é»˜è®¤çš„é€‰é¡¹<code>presetPrompt</code>ä½œä¸ºç¬¬ä¸€ä¸ªï¼Œåç»­çš„<code>prompt</code>ä¼šé€šè¿‡<code>inquirer</code>çš„<code>when</code>å‡½æ•°æ¥åˆ¤æ–­å…¶æ˜¯å¦éœ€è¦æ‰§è¡Œï¼Œå¦‚æœç”¨æˆ·é€‰æ‹©ä¸ä½¿ç”¨<code>preset</code>ï¼Œé‚£ä¹ˆæ‰ä¼šæ‰§è¡Œåç»­æ‰‹åŠ¨é€‰æ‹©<code>feature</code>çš„éƒ¨åˆ†</li></ul><p><img loading="lazy" alt="image-20220122154431693" src="/assets/images/image-20220122154431693-8b8c773f904db75ccc28434e00b8209a.png" width="976" height="454" class="img_ev3q"></p><ul><li>å½“ç”¨æˆ·é€‰æ‹©äº†<code>preset</code>ä»¥åï¼Œå°±ä¼šé€šè¿‡<code>resolvePreset</code>å†æ¬¡è·å–<code>preset</code>çš„ä¿¡æ¯</li></ul><p><img loading="lazy" alt="image-20220122154736822" src="/assets/images/image-20220122154736822-d551d5312864aad9fc9bcadc882cd9d3.png" width="984" height="80" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ³¨å…¥vue-cli-service">æ³¨å…¥vue-cli-service<a class="hash-link" href="#æ³¨å…¥vue-cli-service" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>vue-cli-service</code>åœ¨è¿™é‡Œä¹Ÿæ˜¯ä½œä¸ºä¸€ä¸ª<code>plugin</code>ï¼Œä¸Šæ–‡è·å–<code>preset</code>ä¿¡æ¯ä»¥åï¼Œä¼šåœ¨å…¶é»˜è®¤<code>plugins</code>çš„åŸºç¡€ä¸Šå†æ³¨å†Œ<code>vue-cli-service</code></p><p><img loading="lazy" alt="image-20220122160008434" src="/assets/images/image-20220122160008434-71a95cc243476732b86a24c61e0022d7.png" width="893" height="152" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç”Ÿæˆpackagejson">ç”Ÿæˆpackage.json<a class="hash-link" href="#ç”Ÿæˆpackagejson" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>è·å–æ‰€æœ‰<code>plugin</code>ä»¥åï¼Œä¼šåˆ›å»º<code>package.json</code>å¯¹è±¡ï¼Œå†™å…¥<code>plugin</code>çš„ç‰ˆæœ¬ï¼Œå¹¶ç”Ÿæˆæ–‡ä»¶</p><p><img loading="lazy" alt="image-20220122161035813" src="/assets/images/image-20220122161035813-d08a5b88545c3059628ce0a5d0a5903a.png" width="1081" height="851" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åˆå§‹åŒ–git">åˆå§‹åŒ–git<a class="hash-link" href="#åˆå§‹åŒ–git" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¦‚æœé€šè¿‡ CLI æŒ‡å®šåˆå§‹åŒ– gitï¼Œè¿™é‡Œè¿˜ä¼šè°ƒç”¨<code>git init</code>å‘½ä»¤ï¼Œåˆå§‹åŒ– git æœ¬åœ°å­˜å‚¨æœåŠ¡ã€‚</p><p><img loading="lazy" alt="image-20220123221844974" src="/assets/images/image-20220123221844974-d78075b1046217f1d268c52d278f9166.png" width="1129" height="151" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å®‰è£…ä¾èµ–">å®‰è£…ä¾èµ–<a class="hash-link" href="#å®‰è£…ä¾èµ–" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>@vue/cli</code>å†…éƒ¨å®šä¹‰äº†ä¾èµ–ç®¡ç†åŸºç±»<code>PackageManager</code>ï¼Œå†…éƒ¨ä¼šåˆ¤æ–­å®¢æˆ·ç«¯ä½¿ç”¨çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œä½¿ç”¨çš„æºåœ°å€ç­‰ä¿¡æ¯ï¼Œä»£ç å¾ˆå¤šï¼Œå°±ä¸ä¸€ä¸€å±•å¼€äº†ã€‚è¿™é‡Œå®‰è£…çš„ä¾èµ–ä»å‰é¢æ¥çœ‹ä¸»è¦æœ‰ä¸‰ä¸ªï¼š</p><ul><li><code>@vue/cli-plugin-babel</code></li><li><code>@vue/cli-plugin-eslint</code></li><li><code>@vue/cli-service</code></li></ul><p><img loading="lazy" alt="image-20220123222843578" src="/assets/images/image-20220123222843578-5b0503cf895dd9cefa7dccaf82db2e69.png" width="1099" height="280" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[vuecliæºç è§£æ(2)]]></title>
            <link>https://icodex.me/2022/01/23/vuecliæºç è§£æ2</link>
            <guid>/2022/01/23/vuecliæºç è§£æ2</guid>
            <pubDate>Sun, 23 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[image-20220122161800174]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="image-20220122161800174" src="/assets/images/image-20220122161800174-383f62ef576a853b9ae26397291e6d3f.png" width="988" height="563" class="img_ev3q"></p><p>ä¸Šæ–‡è¯´åˆ°åˆ›å»ºå®Œ<code>package.json</code>æ–‡ä»¶å¹¶å®‰è£…<code>plugins</code>çš„ä¾èµ–ï¼Œç„¶ååç»­ä¼šåˆå§‹åŒ–<code>Generator</code>å®ä¾‹ï¼Œ<code>Generator</code>å†…éƒ¨ä¼šè°ƒç”¨å„ä¸ª<code>plugin</code>ï¼Œæ¶‰åŠåˆ°æ’ä»¶æœºåˆ¶çš„å®ç°ï¼Œè¿™é‡Œå•ç‹¬èµ·ä¸€ç¯‡ä»‹ç»ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pluginç¨‹åº">pluginç¨‹åº<a class="hash-link" href="#pluginç¨‹åº" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é¦–å…ˆäº†è§£ä¸€ä¸‹<code>@vue/cli</code>ä¸­<code>plugin</code>çš„å¼€å‘æ–¹å¼ï¼Œ<code>plugin</code>ç”±ä¸€ä¸ª Service æ’ä»¶<code>index.js</code>æ–‡ä»¶ä½œä¸ºå¼•å¯¼ï¼Œæ­¤å¤–è¿˜å¯ä»¥åŒ…å«<code>generator.js </code>ï¼Œ<code>prompts.js</code>è¿™äº›æ–‡ä»¶ã€‚</p><p><code>index.js</code>å¯ä»¥ä¿®æ”¹ webpack é…ç½®ï¼Œåˆ›å»ºæ–°çš„ vue-cli service å‘½ä»¤æˆ–è€…ä¿®æ”¹å·²ç»å­˜åœ¨çš„å‘½ä»¤ã€‚</p><p><code>generator</code>ä¸»è¦ç”¨äºæ‹“å±•é¡¹ç›®ä¾èµ–ï¼Œåˆ›å»ºæ–°çš„æ–‡ä»¶æˆ–è€…ç¼–è¾‘å·²ç»å­˜åœ¨çš„æ–‡ä»¶ï¼›ä¸”å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p><p><code>prompts.js</code>åˆ™åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®æˆ–è€…åœ¨å·²æœ‰é¡¹ç›®ä¸­æ·»åŠ æ–°çš„æ’ä»¶æ—¶å¤„ç†ç”¨æˆ·é€‰é¡¹ï¼Œé€šè¿‡<code>inquirer</code>å®ç°ã€‚</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ README.md</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ generator.js  </span><span class="token comment" style="color:rgb(98, 114, 164)"># generatorï¼ˆå¯é€‰ï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ index.js      </span><span class="token comment" style="color:rgb(98, 114, 164)"># service æ’ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ package.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ prompts.js    </span><span class="token comment" style="color:rgb(98, 114, 164)"># prompt æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â””â”€â”€ ui.js         </span><span class="token comment" style="color:rgb(98, 114, 164)"># Vue UI é›†æˆï¼ˆå¯é€‰ï¼‰</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åŠ è½½plugin">åŠ è½½plugin<a class="hash-link" href="#åŠ è½½plugin" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç´§æ¥ä¸Šæ–‡ç»§ç»­åˆ†æ<code>Creator</code>å†…éƒ¨çš„<code>create</code>æ–¹æ³•ï¼Œåœ¨å®‰è£…å®Œ<code>@vue/cli</code>å†…éƒ¨çš„<code>vue-cli-service</code>ç­‰æ’ä»¶çš„ä¾èµ–åï¼Œä¼šé€šè¿‡<code>resolvePlugins</code>æ–¹æ³•å¯¹<code>preset</code>çš„<code>plugins</code>æ‰§è¡Œé¡ºåºè¿›è¡Œæ’åˆ—ï¼Œä¿è¯<code>vue-cli-service</code>å§‹ç»ˆç¬¬ä¸€ä¸ªæ‰§è¡Œï¼Œå¹¶ä¸”åŠ è½½<code>plugin</code>å†…éƒ¨çš„<code>generator.js</code>å’Œ<code>prompts.js</code>ç¨‹åºï¼Œæ¨å…¥<code>apply</code>æ–¹æ³•ã€‚</p><p><img loading="lazy" alt="image-20220122165140480" src="/assets/images/image-20220122165140480-b41f70a2dd1918b8e3e92deae833d865.png" width="1114" height="779" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åˆå§‹åŒ–generator">åˆå§‹åŒ–Generator<a class="hash-link" href="#åˆå§‹åŒ–generator" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åŠ è½½å®Œ<code>plugin</code>ä¹‹åï¼Œä¼šåˆå§‹åŒ–<code>Generator</code>å®ä¾‹ã€‚</p><p><img loading="lazy" alt="image-20220122162924717" src="/assets/images/image-20220122162924717-30d891a7dc25ebd5ab49ecd840b4e5ca.png" width="1220" height="247" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pluginsæ’åº">pluginsæ’åº<a class="hash-link" href="#pluginsæ’åº" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨<code>Generator</code>æ„é€ å‡½æ•°å†…éƒ¨ä¼šå¯¹<code>plugins</code>è¿›è¡Œæ’åºï¼Œè¿™ä¸ªæ’åºæœ‰ç‚¹è®²ç©¶çš„ï¼Œæ ¹æ®ä»£ç é‡Œçš„æ³¨é‡Šæ¥çœ‹ä½¿ç”¨äº† leetcode 210 é¢˜çš„ç®—æ³•ï¼Œè¿™é‡Œä»¥åæ¢ç´¢ã€‚</p><p><img loading="lazy" alt="image-20220123224513408" src="/assets/images/image-20220123224513408-515199eec534ee2095d73e53f6e17eb7.png" width="1224" height="383" class="img_ev3q"></p><p><img loading="lazy" alt="image-20220123225127884" src="/assets/images/image-20220123225127884-5b6179bd8191e94b3b38e36bbf21043f.png" width="872" height="805" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åŠ è½½generatorç¨‹åº">åŠ è½½generatorç¨‹åº<a class="hash-link" href="#åŠ è½½generatorç¨‹åº" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åˆå§‹åŒ–çš„æ—¶å€™è¿˜ä¼šåŠ è½½<code>package.json</code>å†…éƒ¨çš„å…¶ä»–æ’ä»¶ï¼Œæ”¾å…¥å®ä¾‹çš„<code>allPlugins</code>å†…éƒ¨ã€‚</p><p><img loading="lazy" alt="image-20220123231305314" src="/assets/images/image-20220123231305314-164f0732b862cb9ec1642e99ab76695c.png" width="916" height="61" class="img_ev3q"></p><p><img loading="lazy" alt="image-20220123231340125" src="/assets/images/image-20220123231340125-952d70e4385d6021a689935b328654c4.png" width="1139" height="307" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è°ƒç”¨generateæ–¹æ³•">è°ƒç”¨generateæ–¹æ³•<a class="hash-link" href="#è°ƒç”¨generateæ–¹æ³•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åˆå§‹åŒ–å®Œ<code>Generator</code>ä¼šè°ƒç”¨å®ä¾‹çš„<code>generate</code>æ–¹æ³•ï¼Œ<code>generate</code>å†…éƒ¨é¦–å…ˆä¼šè°ƒç”¨<code>initPlugins</code></p><p><img loading="lazy" alt="image-20220123230342636" src="/assets/images/image-20220123230342636-17666fe2cec53b8c6ebe3882a913d391.png" width="1262" height="462" class="img_ev3q"></p><p><code>initPlugins</code>å†…éƒ¨ä¼šä¸ºæ¯ä¸€ä¸ª<code>plugin</code>åˆå§‹åŒ–ä¸€ä¸ª<code>GeneratorAPI</code>çš„å®ä¾‹ï¼Œç„¶åå°†å®ä¾‹å¯¹è±¡ä¼ å…¥<code>apply</code>æ–¹æ³•ï¼Œä¸Šæ–‡è¯´åˆ°<code>apply</code>å°±æ˜¯<code>plugin</code>å†…éƒ¨çš„<code>generator</code>ç¨‹åºï¼Œæ‰€ä»¥è¿™é‡Œå°±æ˜¯æ‰§è¡Œ<code>plugin</code>å†…éƒ¨çš„<code>generator</code>ã€‚</p><p><img loading="lazy" alt="image-20220123232325784" src="/assets/images/image-20220123232325784-bd6c4d67e7ebe53788032fdecd4a32c9.png" width="1133" height="321" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="generatorapi">GeneratorAPI<a class="hash-link" href="#generatorapi" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>GeneratorAPI</code>è¿™ä¸ªç±»å†…éƒ¨åŒ…å«ç¼–å†™<code>plugin</code>çš„<code>generator</code>æ‰€éœ€è¦çš„æ‰€æœ‰æ–¹æ³•ï¼Œå…¶åœ¨åˆå§‹åŒ–çš„æ—¶å€™æ¥æ”¶<code>plugin</code>çš„åç§°<code>id</code>ï¼Œ<code>Generator</code>çš„å®ä¾‹ï¼Œæ’ä»¶çš„å‚æ•°<code>options</code>ã€‚å…¶å†…éƒ¨å®šä¹‰äº†ç”Ÿæˆæ¨¡æ¿æ–‡ä»¶çš„æ–¹æ³•<code>render</code>ï¼Œæ‹“å±•<code>package.json</code>çš„ä¾èµ–é¡¹<code>extendPackage</code>ç­‰ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="vue-cli-service">vue-cli-service<a class="hash-link" href="#vue-cli-service" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä»¥<code>vue-cli-service</code>ä¸ºä¾‹ï¼Œå…¶å†…éƒ¨<code>generator</code>ç¨‹åºå¦‚ä¸‹ï¼Œä½¿ç”¨<code>render</code>æ–¹æ³•æ¸²æŸ“<code>template</code>å†…éƒ¨çš„æ¨¡æ¿æ–‡ä»¶ï¼Œæ‹“å±•<code>package.json</code>çš„ä¾èµ–é¡¹ä»¥åŠæ³¨å…¥<code>scripts</code>å’Œ<code>browserslist</code>å­—æ®µã€‚</p><p><img loading="lazy" alt="image-20220123233651940" src="/assets/images/image-20220123233651940-eb38f9861c162e90dc1be967e733ae76.png" width="985" height="882" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="render">render<a class="hash-link" href="#render" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>render</code>æ–¹æ³•ä¼šè§£æä¼ å…¥çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œä½¿ç”¨<code>globby</code>åŒ¹é…è·å–æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€‚å¯¹äº<code>ejs</code>æ¨¡æ¿è¿˜ä¼šè°ƒç”¨<code>renderFile</code>æ–¹æ³•å°†å‚æ•°å¡«å…¥æ¨¡æ¿å†…éƒ¨ã€‚</p><p><img loading="lazy" alt="image-20220124000415280" src="/assets/images/image-20220124000415280-3abfa6f8a6a02ad51dec22de9fee7429.png" width="1167" height="701" class="img_ev3q"></p><p>æœ€åé€šè¿‡<code>_injectFileMiddleware</code>æ¨å…¥<code>Generator</code>å®ä¾‹çš„<code>fileMiddlewares</code>ä¸­ã€‚</p><p><img loading="lazy" alt="image-20220124000509280" src="/assets/images/image-20220124000509280-bfcd27a161538dded77f228358a9ae39.png" width="1097" height="252" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extendpackage">extendPackage<a class="hash-link" href="#extendpackage" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><img loading="lazy" alt="image-20220124000730967" src="/assets/images/image-20220124000730967-cf4c7ee8d4ae27eed7582b3882a47131.png" width="1132" height="594" class="img_ev3q"></p><p><code>extendPackage</code>å†…éƒ¨ä¼šæ‹“å±•<code>Generator</code>å®ä¾‹çš„<code>pkg</code>å±æ€§ï¼Œä¹Ÿå°±å¯¹åº”<code>package.json</code>å†…éƒ¨çš„å­—æ®µã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç”Ÿæˆé…ç½®æ–‡ä»¶">ç”Ÿæˆé…ç½®æ–‡ä»¶<a class="hash-link" href="#ç”Ÿæˆé…ç½®æ–‡ä»¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç»§ç»­çœ‹<code>generate</code>æ–¹æ³•ï¼Œä¹‹åä¼šè°ƒç”¨<code>extractConfigFiles</code>æ–¹æ³•ï¼Œ<code>extractConfigFiles</code>ä¼šè·å–åœ¨<code>package.json</code>å†…éƒ¨çš„é…ç½®é¡¹å­—æ®µï¼Œä¾‹å¦‚<code>babel</code>ï¼Œ<code>eslintConfig</code>ï¼Œ<code>browserslist</code>ç­‰ï¼Œå°†å®ƒä»¬å¯¹åº”çš„æœ‰æ•ˆé…ç½®æ–‡ä»¶åç§°æ¨å…¥å®ä¾‹çš„<code>files</code>å±æ€§å†…éƒ¨ï¼Œç„¶ååˆ é™¤<code>package.json</code>å†…éƒ¨çš„è¿™äº›å­—æ®µã€‚</p><p><img loading="lazy" alt="image-20220123235424070" src="/assets/images/image-20220123235424070-78cb23141d399e05f16e4143db458ad5.png" width="671" height="720" class="img_ev3q"></p><p>ä¹‹åä¼šè°ƒç”¨<code>writeFileTree</code>ç”Ÿæˆæ‰€æœ‰æ–‡ä»¶ï¼Œ<code>writeFileTree</code>å†…éƒ¨ä½¿ç”¨<code>fs-extra</code>æ¥æ“ä½œæ–‡ä»¶ã€‚è¿™æ ·<code>plugin</code>çš„<code>generator</code>å°±æ‰§è¡Œå®Œäº†ã€‚</p><p><img loading="lazy" alt="image-20220123235711778" src="/assets/images/image-20220123235711778-dcf5e371f604b727fe4ea3766073e9fd.png" width="1141" height="457" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[vuecliæºç è§£æ(3)]]></title>
            <link>https://icodex.me/2022/01/23/vuecliæºç è§£æ3</link>
            <guid>/2022/01/23/vuecliæºç è§£æ3</guid>
            <pubDate>Sun, 23 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[image-20220122161800174]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="image-20220122161800174" src="/assets/images/image-20220122161800174-383f62ef576a853b9ae26397291e6d3f.png" width="988" height="563" class="img_ev3q"></p><p><code>vue-cli-service</code>ä½œä¸ºç¬¬ä¸€ä¸ªå¿…ç„¶ä¼šè¢«è°ƒç”¨çš„<code>plugin</code>ï¼Œå…¶åŠŸèƒ½ä¸»è¦æ˜¯ç”Ÿæˆé¡¹ç›®æ¨¡æ¿æ–‡ä»¶ï¼Œä»¥åŠé€šè¿‡<code>serve</code>ã€<code>build</code>ç­‰å‘½ä»¤è¿›è¡Œå¼€å‘ç¯å¢ƒ<code>server</code>çš„å¯åŠ¨å’Œç”Ÿäº§ç¯å¢ƒçš„æ„å»ºæ‰“åŒ…ç­‰ã€‚ä¸‹é¢åˆ†æå…¶å†…éƒ¨é€»è¾‘ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ£€æŸ¥-node-ç‰ˆæœ¬">æ£€æŸ¥ Node ç‰ˆæœ¬<a class="hash-link" href="#æ£€æŸ¥-node-ç‰ˆæœ¬" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>vue-cli-service</code>ä½äº<code>@vue/cli-service</code>ç›®å½•ä¸‹ï¼Œé€šè¿‡<code>package.json</code>æ‰¾åˆ°å…¶å…¥å£ç¨‹åºä¸º<code>bin/vue-cli-service.js</code>ï¼Œé¦–å…ˆä¾æ—§æ˜¯æ£€æŸ¥ Node ç‰ˆæœ¬ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åˆå§‹åŒ–serviceå®ä¾‹">åˆå§‹åŒ–Serviceå®ä¾‹<a class="hash-link" href="#åˆå§‹åŒ–serviceå®ä¾‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¼ å…¥æ‰§è¡Œå½“å‰å‘½ä»¤çš„ç›®å½•ï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºé¡¹ç›®çš„æ–‡ä»¶å¤¹ï¼Œæ¥åˆå§‹åŒ–<code>Service</code>å®ä¾‹ã€‚</p><p><img loading="lazy" alt="image-20220122182531357" src="/assets/images/image-20220122182531357-78b52c4632e6658ecd438105d502ba97.png" width="1070" height="62" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åŠ è½½é¡¹ç›®è¿è¡Œç¨‹åºå’Œwebpacké…ç½®é¡¹">åŠ è½½é¡¹ç›®è¿è¡Œç¨‹åºå’Œwebpacké…ç½®é¡¹<a class="hash-link" href="#åŠ è½½é¡¹ç›®è¿è¡Œç¨‹åºå’Œwebpacké…ç½®é¡¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" alt="image-20220122183108440" src="/assets/images/image-20220122183108440-72ab20bb5ce533e084493d2c3a83be03.png" width="1193" height="673" class="img_ev3q"></p><p><code>resolvePlugins</code>ä¼šä»ä¸Šå±‚çš„<code>commands</code>ä»¥åŠ<code>config</code>ç›®å½•åŠ è½½è¿›æ¥æ‰€æœ‰<code>index.js</code>æ–‡ä»¶ã€‚<code>commands</code>ç›®å½•ä¸‹åŒ…æ‹¬å¼€å‘ç¯å¢ƒæ‰§è¡Œç¨‹åº<code>serve.js</code>ä»¥åŠç”Ÿäº§ç¯å¢ƒæ‰“åŒ…<code>build.js</code>ç­‰ï¼Œ<code>config</code>ç›®å½•åŒ…å«<code>webpack</code>çš„é…ç½®ç¨‹åºï¼Œéƒ½æ˜¯é¡¹ç›®è¿è¡Œæ‰€éœ€çš„ç¨‹åºï¼Œå› ä¸ºé€šè¿‡<code>@vue/cli</code>åˆ›å»ºçš„é¡¹ç›®ä¸ä¼šæš´éœ²<code>webpack</code>ç­‰é…ç½®é¡¹ï¼Œæ‰€ä»¥éœ€è¦è¿™äº›ç¨‹åºæ¥æ‰§è¡Œã€‚</p><p>è¿™äº›ç¨‹åºè¢«çœ‹åš<code>plugin</code>ï¼ŒåŒ…å«ä¸€ä¸ª<code>id</code>ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œå’Œä¸€ä¸ª<code>apply</code>æ–¹æ³•ï¼Œéœ€è¦æ‰§è¡Œçš„æ—¶å€™è°ƒç”¨<code>apply</code>æ–¹æ³•å³å¯ã€‚</p><p><img loading="lazy" alt="image-20220123135153677" src="/assets/images/image-20220123135153677-b0a37c009668e9268f092aa0b0303ed0.png" width="1108" height="502" class="img_ev3q"></p><p>ç„¶åè¿˜ä¼šå¯¹<code>plugins</code>è¿›è¡Œæ’åºã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="servejs">serve.js<a class="hash-link" href="#servejs" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>serve.js</code>æ˜¯å¼€å‘ç¯å¢ƒä¸‹å¯åŠ¨ webpack dev server çš„ç¨‹åºï¼Œå…¶è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°å†…éƒ¨é€šè¿‡è°ƒç”¨<code>api.registerCommand</code>ä¼ é€’äº†ä¸‰ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆ<code>serve.js</code>é€šè¿‡<code>plugin</code>çš„æ–¹å¼æ³¨å†Œï¼Œè‚¯å®šä¼šæœ‰æ‰§è¡Œçš„æ—¶å€™ï¼Œè§ä¸‹æ–‡ç»§ç»­æ¢ç´¢ã€‚</p><p><img loading="lazy" alt="image-20220122184906777" src="/assets/images/image-20220122184906777-7b136a690c785be22bb44042305178a6.png" width="1090" height="455" class="img_ev3q"></p><p>å¹¶ä¸”å¯¼å‡ºçš„æ¨¡å—è¿˜æœ‰ä¸€ä¸ª<code>defaultModes</code>å¯¹è±¡ï¼ŒåŒ…å«å‘½ä»¤åç§°å’Œç¯å¢ƒå˜é‡å‚æ•°çš„æ˜ å°„å…³ç³»ï¼Œè¿™æ ·<code>Service</code>å®ä¾‹å†…éƒ¨å¯ä»¥é€šè¿‡<code>defaultModes</code>è·å–å½“å‰ç¨‹åºæ‰§è¡Œçš„ç¯å¢ƒã€‚</p><p><img loading="lazy" alt="image-20220122184932953" src="/assets/images/image-20220122184932953-5a73d7c98b00074b929a41ec6ddc174f.png" width="969" height="85" class="img_ev3q"></p><p><img loading="lazy" alt="image-20220122190528586" src="/assets/images/image-20220122190528586-466a26f1ee97608e13f7564db5f25d55.png" width="1176" height="79" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="buildjs">build.js<a class="hash-link" href="#buildjs" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>build.js</code>æ˜¯ç”Ÿäº§ç¯å¢ƒçš„æ‰“åŒ…ç¨‹åºï¼Œåˆ™é€šè¿‡è°ƒç”¨<code>api.registerCommand</code>ä¼ é€’<code>build</code>å­—ç¬¦ä¸²ç­‰å‚æ•°ï¼Œä»¥åŠæš´éœ²äº†<code>production</code>çš„ç¯å¢ƒå˜é‡ã€‚</p><p><img loading="lazy" alt="image-20220123153348102" src="/assets/images/image-20220123153348102-0f4299d983852b7d82b439bf404dca0f.png" width="1248" height="494" class="img_ev3q"></p><p><img loading="lazy" alt="image-20220123153415916" src="/assets/images/image-20220123153415916-ad9bdb1df39f7da16f73362aade8838f.png" width="829" height="76" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cssjs">css.js<a class="hash-link" href="#cssjs" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨<code>config</code>ç›®å½•ä¸‹çš„<code>css.js</code>ä¸ºä¾‹ï¼Œå…¶é€šè¿‡<code>api.chainWebpack</code>æ¥é…ç½®<code>webpack</code></p><p><img loading="lazy" alt="image-20220123200053836" src="/assets/images/image-20220123200053836-fb935aa6c73a39545e4fc24ea291c601.png" width="859" height="137" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ³¨å†Œå‘½ä»¤è¡Œå‚æ•°">æ³¨å†Œå‘½ä»¤è¡Œå‚æ•°<a class="hash-link" href="#æ³¨å†Œå‘½ä»¤è¡Œå‚æ•°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åˆå§‹åŒ–å®Œ<code>Service</code>å®ä¾‹ï¼ŒåŠ è½½å®Œé¡¹ç›®æ‰€éœ€è¦çš„æ‰€æœ‰æ‰§è¡Œç¨‹åºï¼Œç„¶åä¼šæ‰§è¡Œ<code>run</code>æ–¹æ³•ï¼Œ<code>run</code>å†…éƒ¨é¦–å…ˆä¼šèµ°<code>init</code>æ–¹æ³•ã€‚</p><p><img loading="lazy" alt="image-20220122185844560" src="/assets/images/image-20220122185844560-17263354ada263fa02bf74bbe8292dbb.png" width="1058" height="108" class="img_ev3q"></p><p><img loading="lazy" alt="image-20220122190940124" src="/assets/images/image-20220122190940124-ae598bec0885903757ed74174031eb3a.png" width="1243" height="676" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åŠ è½½env">åŠ è½½env<a class="hash-link" href="#åŠ è½½env" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨<code>init</code>æ–¹æ³•å†…éƒ¨ä¼šåŠ è½½æŒ‡å®šç¯å¢ƒçš„<code>.env</code>æ–‡ä»¶å†…éƒ¨è®¾ç½®ç¯å¢ƒå˜é‡å‚æ•°ï¼Œè¿™é‡Œä½¿ç”¨äº†<code>dotenv</code>å’Œ<code>dotenv-expand</code>è¿™ä¸¤ä¸ªåº“æ¥åŠ è½½<code>.env</code>æ–‡ä»¶çš„ç¯å¢ƒå˜é‡åˆ°<code>process.env</code>ä¸­ã€‚</p><p><img loading="lazy" alt="image-20220123153707199" src="/assets/images/image-20220123153707199-86a5c8e3cca465bbd849e346a39c601f.png" width="1100" height="162" class="img_ev3q"></p><p><img loading="lazy" alt="image-20220123160135916" src="/assets/images/image-20220123160135916-030f4402dcc8f19af8921b4bf60662aa.png" width="1062" height="573" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è·å–é¡¹ç›®é…ç½®é¡¹">è·å–é¡¹ç›®é…ç½®é¡¹<a class="hash-link" href="#è·å–é¡¹ç›®é…ç½®é¡¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨åŠ è½½äº†ç¯å¢ƒå˜é‡å‚æ•°ä»¥åï¼Œä¼šè°ƒç”¨<code>loadUserOptions</code>æ–¹æ³•ï¼Œ<code>loadUserOptions</code>å†…éƒ¨ä¼šè°ƒç”¨<code>loadFileConfig</code>è·å–é¡¹ç›®å†…éƒ¨çš„<code>vue.config.js</code>ç­‰å½¢å¼çš„é…ç½®æ–‡ä»¶ã€‚</p><p><img loading="lazy" alt="image-20220123160527552" src="/assets/images/image-20220123160527552-c708831ddde5c0298cdcde569a2e4b00.png" width="967" height="661" class="img_ev3q"></p><p>ç„¶åç”¨æˆ·é¡¹ç›®é…ç½®é¡¹ä¼šä¼ å…¥<code>loadedCallback</code>å‡½æ•°å†…éƒ¨ï¼Œä½¿ç”¨<code>lodash.defaultsDeep</code>å’Œ<code>vue-cli-service</code>å†…éƒ¨çš„é»˜è®¤é…ç½®åˆå¹¶ã€‚</p><p><img loading="lazy" alt="image-20220123161123293" src="/assets/images/image-20220123161123293-a05708786da869852a9fb1ee87cc620e.png" width="1193" height="142" class="img_ev3q"></p><p><img loading="lazy" alt="image-20220123160841575" src="/assets/images/image-20220123160841575-c5fe55dc1fde12dfb7f036b90b788f7c.png" width="887" height="707" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ³¨å…¥pluginapiå®ä¾‹">æ³¨å…¥PluginAPIå®ä¾‹<a class="hash-link" href="#æ³¨å…¥pluginapiå®ä¾‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>loadedCallback</code>å†…éƒ¨ä¼šè°ƒç”¨æ¯ä¸ª<code>plugin</code>çš„<code>apply</code>æ–¹æ³•ï¼Œä¼ å…¥<code>PluginAPI</code>çš„å®ä¾‹å’Œå½“å‰é¡¹ç›®çš„é…ç½®é¡¹ä½œä¸ºå‚æ•°ã€‚</p><p><img loading="lazy" alt="image-20220123160950689" src="/assets/images/image-20220123160950689-ed1f811fac9205c04fc0b5fb39ba8860.png" width="1063" height="507" class="img_ev3q"></p><p>å…¶ä¸­<code>PluginAPI</code>åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼ é€’äº†ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li><code>id</code>ï¼š<code>plugin</code>ç¨‹åºçš„åç§°</li><li><code>this</code>ï¼šæŒ‡å‘å½“å‰çš„<code>Service</code>å®ä¾‹</li></ul><p>åœ¨æ„é€ å‡½æ•°å†…éƒ¨åˆå§‹åŒ–ä»¥åï¼Œ<code>Service</code>å®ä¾‹ä¼šæŒ‚è½½åœ¨<code>PluginAPI</code>å®ä¾‹çš„<code>service</code>å±æ€§ä¸Šã€‚</p><p><img loading="lazy" alt="image-20220123162103664" src="/assets/images/image-20220123162103664-f87c07c90599c259fec378a9d6c90e41.png" width="1095" height="338" class="img_ev3q"></p><p>ä¸Šæ–‡ä»‹ç»åˆ°<code>apply</code>ä¹Ÿå°±æ˜¯<code>serve.js</code>ç­‰æ„å»ºæ¨¡å—å¯¼å‡ºçš„å‡½æ•°ï¼Œå…¶æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li><code>api</code>ï¼š<code>PluginAPI</code>çš„å®ä¾‹</li><li><code>options</code>ï¼šé¡¹ç›®çš„é…ç½®é¡¹</li></ul><p><code>PluginAPI</code>å†…éƒ¨å®šä¹‰äº†ä¸€ç³»åˆ—æ–¹æ³•å¯ä»¥é€šè¿‡<code>api</code>æ¥è°ƒç”¨ï¼Œå…¶ä¸­<code>api.registerCommand</code>æ˜¯å¾€<code>Service</code>å®ä¾‹çš„<code>commands</code>ä¸Šæ³¨å†Œ<code>vue-cli-service</code>çš„ CLI å‘½ä»¤å‚æ•°åç§°<code>serve</code>ï¼Œä¸è¿‡è¿™é‡Œåªæ˜¯æ³¨å†Œï¼Œå¹¶æ²¡æœ‰å¼€å§‹æ‰§è¡Œï¼Œæ‰€ä»¥åˆ°è¿™é‡Œç¨‹åºçš„ç›®çš„åªæ˜¯å°†æ„å»ºé¡¹ç›®éœ€è¦çš„ç¨‹åºåŠ è½½è¿›æ¥ï¼Œå¹¶ä¸”å’Œå‘½ä»¤è¡Œå‚æ•°å¯¹åº”èµ·æ¥è€Œå·²ã€‚</p><p><img loading="lazy" alt="image-20220122184906777" src="/assets/images/image-20220122184906777-7b136a690c785be22bb44042305178a6.png" width="1090" height="455" class="img_ev3q"></p><p><img loading="lazy" alt="image-20220123162213927" src="/assets/images/image-20220123162213927-25b82548a14eb155457c2d90364a85da.png" width="1156" height="499" class="img_ev3q"></p><p>åé¢çš„è¯ï¼Œå¦‚æœåœ¨é…ç½®æ–‡ä»¶ä¸­åŒ…å«<code>chainWebpack</code>å’Œ<code>webpackConfig</code>é…ç½®é¡¹ä¹Ÿä¼šæŒ‚è½½åˆ°<code>Service</code>å®ä¾‹çš„<code>webpackChainFns</code>å’Œ<code>webpackRawConfigFns</code>å±æ€§ä¸Šã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç»„åˆwebpacké…ç½®é¡¹">ç»„åˆwebpacké…ç½®é¡¹<a class="hash-link" href="#ç»„åˆwebpacké…ç½®é¡¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä¸Šæ–‡è¯´åˆ°<code>config</code>ç›®å½•ä¸‹çš„ç¨‹åºä¼šé€šè¿‡<code>api.chainWebpack</code>æ³¨å†Œä¸€äº› webpack çš„é…ç½®é¡¹ï¼Œè¿™äº›é…ç½®é¡¹ä¼šä¿å­˜åœ¨<code>Service</code>å®ä¾‹çš„<code>webpackChainFns</code>å’Œ<code>webpackRawConfigFns</code>å†…éƒ¨ã€‚</p><p><img loading="lazy" alt="image-20220123200323198" src="/assets/images/image-20220123200323198-5f7f5b514511b9b798bf70231e1c4f84.png" width="1150" height="514" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ‰§è¡Œç¨‹åº">æ‰§è¡Œç¨‹åº<a class="hash-link" href="#æ‰§è¡Œç¨‹åº" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å‘½ä»¤è¡Œå‚æ•°ç°åœ¨å’Œæ‰§è¡Œç¨‹åºå·²ç»é€šè¿‡<code>init</code>æ–¹æ³•å…³è”èµ·æ¥äº†ï¼Œæ¥ä¸‹æ¥ä¾¿æ˜¯æ‰¾åˆ°åœ¨ CLI è¾“å…¥çš„å‘½ä»¤å‚æ•°å¯¹åº”çš„æ‰§è¡Œç¨‹åºï¼Œç„¶åæ‰§è¡Œã€‚</p><p>æ¥ç€çœ‹<code>run</code>æ–¹æ³•å†…éƒ¨çš„é€»è¾‘ã€‚è¿™é‡Œé€šè¿‡<code>this.commands</code>æ‰¾åˆ°äº†å’Œå‘½ä»¤è¡Œå‚æ•°<code>name</code>å¯¹åº”çš„æ‰§è¡Œç¨‹åº<code>command</code>ï¼Œç„¶åä¾¿è°ƒç”¨<code>command.fn</code>è¿™ä¸ªæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯<code>serve.js</code>å†…éƒ¨ä¼ é€’çš„å›è°ƒå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å¼€å‘ç¯å¢ƒå¯åŠ¨ webpack dev server ç­‰æ“ä½œã€‚</p><p><img loading="lazy" alt="image-20220123162926937" src="/assets/images/image-20220123162926937-67e5cb578ecf9bd54a9fc28f5c5b3751.png" width="1045" height="357" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[vuecliæºç è§£æ(4)]]></title>
            <link>https://icodex.me/2022/01/23/vuecliæºç è§£æ4</link>
            <guid>/2022/01/23/vuecliæºç è§£æ4</guid>
            <pubDate>Sun, 23 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[image-20220122161800174]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="image-20220122161800174" src="/assets/images/image-20220122161800174-383f62ef576a853b9ae26397291e6d3f.png" width="988" height="563" class="img_ev3q"></p><p>ä¸Šæ–‡è¯´åˆ°é€šè¿‡<code>@vue/cli-service</code>ä¼šåŠ è½½æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶é€šè¿‡æ’ä»¶æœºåˆ¶æ³¨å†Œå‘½ä»¤è¡Œå‚æ•°å’Œæ‰§è¡Œæ–‡ä»¶çš„å¯¹åº”å…³ç³»ï¼Œè¿™æ ·åœ¨è¾“å…¥ç‰¹å®š CLI å‘½ä»¤å‚æ•°çš„æ—¶å€™å°±èƒ½æ‰¾åˆ°å¯¹åº”çš„æ‰§è¡Œç¨‹åºï¼Œä¾‹å¦‚<code>vue-cli-service serve</code>ä¼šå»æ‰§è¡Œ<code>servs.js</code>ç¨‹åºã€‚</p><p>è¿™ç¯‡æ–‡ç« å°±æ¥åˆ†æ<code>servs.js</code>åœ¨å¼€å‘ç¯å¢ƒä¸‹æ˜¯å¦‚ä½•æ„å»ºè¿è¡Œ<code>vue</code>é¡¹ç›®çš„ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è·å–webpacké…ç½®é¡¹">è·å–webpacké…ç½®é¡¹<a class="hash-link" href="#è·å–webpacké…ç½®é¡¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä»åœ¨æ§åˆ¶å°æ‰“å°<code>Starting development server...</code>å¼€å§‹ï¼Œé¦–å…ˆè·å–<code>webpack</code>çš„é…ç½®é¡¹å¹¶æ ¡éªŒï¼Œ<code>vue.config.js</code>æ”¯æŒ<code>chainWebpack</code>å’Œ<code>configureWebpack</code>ä¸¤ç§æ‹“å±•<code>webpack</code>é…ç½®é¡¹çš„æ–¹å¼ï¼Œæ‰€ä»¥è¿™é‡Œéƒ½è¦è€ƒè™‘åˆ°ã€‚</p><p><img loading="lazy" alt="image-20220123170238131" src="/assets/images/image-20220123170238131-15bab0621732945314912d43da1f2049.png" width="1028" height="132" class="img_ev3q"></p><p>é€šè¿‡<code>chainWebpack</code>æ‹“å±•çš„é…ç½®é¡¹ä¼šä½¿ç”¨<code>webpack-chain</code>è·å–ï¼›é€šè¿‡<code> configureWebpack</code>æ‹“å±•çš„é…ç½®é¡¹ä¿å­˜åœ¨<code>Service</code>å®ä¾‹çš„<code>webpackRawConfigFns</code>å†…éƒ¨ï¼Œå…¶ä¸­è¿˜åŒ…æ‹¬ä¸Šç¯‡æ–‡ç« æåˆ°çš„ä½äº<code>config</code>ç›®å½•ä¸‹é€šè¿‡<code>api.chainWebpack</code>æ’å…¥çš„ webpack é…ç½®é¡¹ã€‚</p><p>è¿™äº›é…ç½®é¡¹ä¼šä¾æ¬¡è¯»å–å¹¶å’Œ<code>chainWebpack</code>åˆå¹¶ï¼›æœ€åä½¿ç”¨<code>webpack-merge</code>è¿›è¡Œåˆå¹¶ã€‚</p><p><img loading="lazy" alt="image-20220123172545004" src="/assets/images/image-20220123172545004-93ffee406c931c7abcd2b5c134d8e34c.png" width="1277" height="732" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è·å–-wds-é…ç½®é¡¹">è·å– WDS é…ç½®é¡¹<a class="hash-link" href="#è·å–-wds-é…ç½®é¡¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å°†é€šè¿‡<code>chainWebpack</code>å’Œ<code>configureWebpack</code>å†…éƒ¨çš„<code>devServer</code>é…ç½®é¡¹å’Œ<code>vue.config.js</code>ä¸­çš„<code>devServer</code>é…ç½®é¡¹è¿›è¡Œåˆå¹¶ã€‚</p><p><img loading="lazy" alt="image-20220123173807288" src="/assets/images/image-20220123173807288-b30d3c87f66ccbd20f801b081f2d1360.png" width="849" height="131" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æŸ¥æ‰¾å¯ç”¨ç«¯å£">æŸ¥æ‰¾å¯ç”¨ç«¯å£<a class="hash-link" href="#æŸ¥æ‰¾å¯ç”¨ç«¯å£" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é€šè¿‡ç¬¬ä¸‰æ–¹åº“<code>portfinder</code>æ¥æŸ¥æ‰¾å¯ç”¨ç«¯å£</p><p><img loading="lazy" alt="image-20220123174410248" src="/assets/images/image-20220123174410248-760f6b68be89c83696772a54a1d14da2.png" width="1340" height="51" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è·å–urlå’Œproxyä¿¡æ¯">è·å–URLå’Œproxyä¿¡æ¯<a class="hash-link" href="#è·å–urlå’Œproxyä¿¡æ¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è¿™é‡Œç”¨äº†ä¸¤ä¸ª<code>create-react-app</code>çš„åº“æ¥è·å– URLï¼Œä»¥åŠ WDS çš„<code>proxy</code>é…ç½®</p><p><img loading="lazy" alt="image-20220123175455350" src="/assets/images/image-20220123175455350-95abed9b8f8d40a95dd9dd6f17ef0b71.png" width="1100" height="310" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="éšè—webpackçš„æ§åˆ¶å°ä¿¡æ¯">éšè—webpackçš„æ§åˆ¶å°ä¿¡æ¯<a class="hash-link" href="#éšè—webpackçš„æ§åˆ¶å°ä¿¡æ¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é€šè¿‡è®¾ç½® webpack çš„<code>infrastructureLogging: { level: 'none' }</code>æ¥éšè— WDS çš„è¾“å‡ºä¿¡æ¯ï¼Œè®¾ç½®<code>stats: 'errors-only'</code>è®©<code>webpack</code>ä»…åœ¨å‡ºé”™æ—¶æŠ¥é”™ã€‚</p><p><img loading="lazy" alt="image-20220123175744041" src="/assets/images/image-20220123175744041-73c278ba2aa9ba2d4bcd4afe0e56ed9b.png" width="1348" height="99" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åˆ›å»ºwebpackç¼–è¯‘å®ä¾‹">åˆ›å»ºwebpackç¼–è¯‘å®ä¾‹<a class="hash-link" href="#åˆ›å»ºwebpackç¼–è¯‘å®ä¾‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><img loading="lazy" alt="image-20220123192338019" src="/assets/images/image-20220123192338019-c0439be83cd08e2a2710cb1932ba18bc.png" width="901" height="61" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åˆ›å»º-wds-å®ä¾‹">åˆ›å»º WDS å®ä¾‹<a class="hash-link" href="#åˆ›å»º-wds-å®ä¾‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é€šè¿‡ WDS æä¾›çš„ <a href="https://webpack.js.org/api/webpack-dev-server/" target="_blank" rel="noopener noreferrer">Nodejs API</a> æ¥åˆå§‹åŒ–ä¸€ä¸ªå®ä¾‹</p><p><img loading="lazy" alt="image-20220123192020709" src="/assets/images/image-20220123192020709-53af1a918693c6932e85cb37f3e7be64.png" width="1265" height="326" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ³¨å†Œwebpackç¼–è¯‘å®Œæˆäº‹ä»¶">æ³¨å†Œwebpackç¼–è¯‘å®Œæˆäº‹ä»¶<a class="hash-link" href="#æ³¨å†Œwebpackç¼–è¯‘å®Œæˆäº‹ä»¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>webpack</code>çš„ Nodejs APIåœ¨åˆå§‹åŒ–ä»¥åå…·æœ‰<a href="https://webpack.js.org/api/compiler-hooks/#hooks" target="_blank" rel="noopener noreferrer">Compiler Hooks</a>ï¼Œhooks æš´éœ²äº†åœ¨ webpack è¿è¡Œä¸­çš„æ¯ä¸ªç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œå¯ä»¥æ¥æ³¨å†Œå®šæœŸæ‰§è¡Œçš„å›è°ƒå‡½æ•°ã€‚</p><p>è¿™é‡Œæ³¨å†Œäº†ä¸€ä¸ªåœ¨ webpack ç¼–è¯‘å®Œæˆåçš„å›è°ƒäº‹ä»¶ â€”â€” <a href="https://webpack.js.org/api/compiler-hooks/#done" target="_blank" rel="noopener noreferrer"><code>compiler.hooks.done</code></a>ï¼Œä¸»è¦æ˜¯åœ¨ webpack ç¼–è¯‘å®Œæˆä»¥ååœ¨æ§åˆ¶å°æ‰“å° URL ç­‰ä¸€äº›ä¿¡æ¯ã€‚</p><p><img loading="lazy" alt="image-20220123193247965" src="/assets/images/image-20220123193247965-c1f9a8a0ed31f4b4620cb495bcf7882e.png" width="1331" height="614" class="img_ev3q"></p><p>è¿™é‡Œè¿™ä¹ˆåšçš„åŸå› æ˜¯ WDS æœ¬èº«çš„ Nodejs API æ¯”è¾ƒç®€é™‹ï¼Œåªæä¾›äº†ä»¥ä¸‹å››ä¸ªæ–¹æ³•ï¼Œå¹¶æœªæš´éœ² webpack ç¼–è¯‘å®Œæˆçš„æ–¹æ³•ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦åˆ©ç”¨ webpack çš„ hooks æ¥æ³¨å†Œã€‚</p><ul><li><code>start</code>ï¼šå¯åŠ¨ WDS çš„å¼‚æ­¥æ–¹æ³•</li><li><code>startCallback</code>ï¼šå¯åŠ¨ä¹‹åçš„å›è°ƒå‡½æ•°</li><li><code>stop</code>ï¼šåœæ­¢ WDS</li><li><code>stopCallback</code>ï¼šåœæ­¢ WDS åçš„å›è°ƒ</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¯åŠ¨-wds">å¯åŠ¨ WDS<a class="hash-link" href="#å¯åŠ¨-wds" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é€šè¿‡<code>start</code>æ–¹æ³•å¯åŠ¨ WDSï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œæœ€åè¿”å›çš„æ˜¯ä¸€ä¸ª Promise å®ä¾‹ã€‚</p><p><img loading="lazy" alt="image-20220123193658453" src="/assets/images/image-20220123193658453-24db6158863fbce8c248c3d1e4876567.png" width="1209" height="200" class="img_ev3q"></p><p>ä¸»è¦çš„é€»è¾‘å°±æ˜¯è¿™äº›ï¼Œåˆ°æ­¤ï¼Œä»ä½¿ç”¨<code>vue create [app name]</code>å¼€å§‹åˆ°å¼€å‘ç¯å¢ƒæ‰§è¡Œ<code>vue-cli-service serve</code>çš„æ•´ä¸ªæµç¨‹å…¨éƒ¨åˆ†æå®Œæ¯•ã€‚</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[webpackç›‘å¬ä»£ç†åœ°å€ä¿®æ”¹è‡ªåŠ¨é‡å¯devServer]]></title>
            <link>https://icodex.me/2022/01/05/webpackç›‘å¬ä»£ç†åœ°å€ä¿®æ”¹è‡ªåŠ¨é‡å¯devServer</link>
            <guid>/2022/01/05/webpackç›‘å¬ä»£ç†åœ°å€ä¿®æ”¹è‡ªåŠ¨é‡å¯devServer</guid>
            <pubDate>Wed, 05 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[image-20220105213328676]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="image-20220105213328676" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjIAAACyCAYAAABY4yWoAAAREklEQVR4nO3deXCc9X3H8c/z7OpYHZa0unzJhyzb2C4Yy0dsg69AnACxcachMIWk6QDNTEsIBMq0ZVqTENKmUEwnQybTAE1DKFPCtAwGUoiJBRjkA59gSLF8Scay7sM61pL2efrHmonxIe/zrA7/dt+vv/fZfcKMnrz9PL/n+7Nc13UFAABgIHu0TwAAAMAvQgYAABiLkAEAAMYiZAAAgLEIGQAAYCxCBgAAGIuQAQAAxiJkAACAsQgZAABgLEIGAAAYi5ABAADGImQAAICxCBkAAGAsQgYAABiLkAEAAMYiZAAAgLEIGQAAYCxCBgAAGIuQAQAAxiJkAACAsQgZAABgLEIGAAAYi5ABAADGImQAAICxCBkAAGAsQgYAABiLkAEAAMYiZAAAgLEIGQAAYCxCBgAAGIuQAQAAxiJkAACAsQgZAABgLEIGAAAYi5ABAADGImQAAICxCBkAAGAsQgYAABiLkAEAAMYiZAAAgLEIGQAAYCxCBgAAGIuQAQAAxiJkAACAsYKjfQIAktu+dkdHu1z1O1I4w9KCQls5XHkADBHLdV13tE8CQPI53uvq7QZH9b2fv8Sk21Jl2FZloa0M7gkDSBAhA2BItfdJW5ocHeh0Bv1cTtDSkmJLc/JtWSN0bgCSDyEDYEhEotKOFkd72xz1D94wn1OSaWl5ia2ybHIGgHeEDICERF1pb5ujHS2Oegb8f095jqVlJbbCGQQNgPgRMgB8O9Tl6p1GR62nhuYyErSkKwpsLSq0FWJBMIA4EDIAPGuMuHq70VFd9/BcPkIBaWGhrblhW0Fu0AAYBCEDIG5dA1J1k6P9HY5G4spRkB573DQtl5oBcH6EDICL6nOknS2Odrc5OhUd+d+fmGVpeWlApZkj/9sALm2EDIALciXtb3dV3RRVVwILeWeMsTU5W3qvyVX3gL9LjmVJs/NsLS1moB6APyBkAJxXXXdsHUxjxP8lYmzI0opSW+NDsUdD/U7sFe2dLY589owyAtK8sK3KMAP1ABAyAM7Sckra0hjVoS7/l4bctNjalpljzr+2pWsg9hsfd/j/jZygtKQ4oDn5FgP1gBRGyACQJPUM/GGgXTSBuyULC2N3SwJx1EVDxNVbDY4+7fF/GWKgHpDaCBkgxQ040p42R++3OOpNYCHv3AJbS4pthQLej605GduXqaPf/+WoPMfS8lJbBekEDZBKCBkghX3S6WpLk6OOPv+Xgak5llaWBpSfnti5OJJ2tzra3uwo4jOoglYsqBYU2spiQTCQEggZIAXVn96Z+niv/z//oozYQt5JQ/xIJxKVtjY72tPqyO/ZMVAPSB2EDJBCOvqldxsd/d9FdqYeTHbQ0tJiS3+UP7yvDHX0S1UnElt0zEA9IPkRMkAKiESl91sc7fG4M/WZ0mxpfjj22CbNR8O09Ayo0MfznroeV1UNjpoTeA08NlDPVmkmQQMkG0IGSGJRV/qw3dW25qi6ExhoNyfP0lUlAWX7WHdyoCmi9a/UaE9dp+69doruXDre1zl82O4kNlBPpwfqlTBQD0gmhAyQpI73utpU76glgZ2py7Jj62CKM7zfyWjtHdCjvz2q57Z+qjMvM1OKs/WDtRVaVZHv+Ts/G6i3q9X/naUMW6ostLW4iGl6QDIgZIAkVHPS1cZj/t+lzk+PBUx5jr9HMU9V12vDpsPq7Om/4Ge+OKtID321QlPDGZ6/v2tAercxqo8SGKg3Y4ylGyb4eFccwCWFkAGSjONK/1YTVa+PRzChgLS4KPa2j5+E+d2Bdj20sUaHm7rj+nwwYOtbV5Xp3i+WaUyG96hojEhVDVHfA/VuLAv4jjUAlwZCBkgyzRHp2cPeFsQErNj+RYuK/O1fdKg1ovUbD6rq983eD5YUzsnQA1+eqlsXlPo6/uDJ2IRgrwP15uTbWj2OR0yAyQgZIMnUdTt6sTb+BSQzcm0tK7U1Js37b7X1RrVhc61++d4xRaP+X+n+zKzxufr+mulaMiXX87GOK+1u8zZQb2KWdNNkVv4CJiNkgCQTb8icvTO1V89U12vDm0fU3t3n6/jBrJk7Vn/7lakq8zEuuDcqbYtzoB4hA5iPkAGSTDwhc8OEgGZcYGfqi6k62KGHNtboYEOXr+PjlZke0O3LyvSdFWXK9jG4pr1PeuXTqJoGmT9DyADm4+EwkIL8RMyh1oi++cv9+sZTe4Y9YiQp0hfVk28e0bLHduh/9nlfe5OfLpX4eG0cgFn4pwiAQbX1RvXE5lo9W31M/QOJr4Pxqqkzoruf36+n38vX9786TfMn5oz4OQC4dBEyAC7o37fW6/FNw7MOxqu9R9u17smd+tqC8br/S5M1YUyC220DSAqEDIBzNHb168+e/Ugf1raP9qmc48X3j+u1Dxq14ebZun5WwWifDoBRxhoZAOcoyUnTz265TF+5vGS0T+Uc4wtC2nDzLCIGgCTuyAC4gMkFGfr5n87S24fGa/3Gg6o5cXJUzyeUEdRfLC/Td5aXKSPIIl4AMYQMgEEtL8/T5u9W6qnqej3x5hF1jMJ6mXWV4/TA6ikqy2NdDIDPI2QAxOWOJeO0bm6x/uXNWj2/9ZiizvCPoJo5LlcPr/U36RdAamCNDIC4FWUF9Y9ryvXGPQu1pCI8bL+Tl52uR/54pjbdXZlQxERGILYAjC7uyADwbEZxSC/cfrl+83Gr1m+sUX1b75B8b8C2dOviibrv2kkKhxK/PJ2Kc88lAOYiZAD4dt2ssFZftkg/eeuYflp1VL2nvO26faal08N6eE2FZhSHhvAMASQ7QgZAQgKWdM/Kifp6Zal+/MZh/ffOek/HjysI6aE1Fbp+1vA9qgKQvFgjA+Acvf3etyIYPyZN//q1GXr5r+brirK8i34+Mz2o760uV/VfLyJiAPhGyAA4x8OvH9ULuxt9HTtvYo5e/csr9cQts1WYm3Hez6ybN1ZV9y3UvavKFPAxEuaTpl7d8swHvs4PQHLh0RKAc7Se7NN9L9TqF9XH9cO1Far0sVHjn8wt1vWzC/X45lo9/U6d+gcczZ4wRo/cOF0Lyvxt/Ngeieqf3jii56qP+ToeQPIhZABc0Ad1HbrxyZ1aN2+sHryuXGNz0zwdH0qz9eDqKbpt4ThtPdyhmyv9b3nwH9vq9c9vHFZnT7/v7wCQfAgZAOc663HPS7tP6H/3N+uuVZN01wrvj4MmF2RocoG/iHn7UIf+4eUaHWzo8nU8gOTGGhkAcYn0Deix1w9p6aPb9dpHrcP+e7Xtp3Tncx/r1p/vIWIAXBB3ZAB4crytV99+9gMtqQjrkbUVmj7Ec196+h1t2Fynp9+pVf+A97enAKQWQgaAL9U1rbrm8e26dclE3X/tZBVmJX45eXFPkx557aCaT54agjMEkAoIGQC+uZJ+VX1ML+9t1D3XTNadS8f7+p5dx7r09xtrtK+2Y2hPEEDSY40MgIR19vTpBxsPaPmGnaqqiT9Gjnf26bsvfqIbn9xJxADwhTsyAIbM4cYufePpPbpmVrF+8c3Zg372Vzsa9PCrNepJYH8mAOCODIAh9+bHTRf9zJaadiIGQMIIGQAAYCxCBgAAGIuQATA6fGwWCQBnI2QAAICxCBkA5/ibL0/Rl+YUj/ZpXNDY/Ez97LbLR/s0AFwCeP0awDmmFGTomdtmq+pgh9a/XKNDjZfGXkeh9KC+vXKS7l4xUWk2z6YAcEcGwCBWTsvTW/fO1/o105WblTaq57Ju3lj97nsLdd+qsrgjJi+N2AGSHXdkAFzUHUvHa93cEj266aie33ZMrjtyvz17whj9cO10LZyUM3I/CsAY3JEBUtD2ZkdRjzFSlB3Uj2+cpt/es0iLK8LDc2JnKMjJ0GM3zdLrd83zFTF1Pa7qIyNYXABGBXdkgBT0bpOjfe2ulhVbmpnn7d8zM0tC+vXtl+vV/S166JUanWiPDOm5BQO2vnVVme6/ZpKy073/W6u9T3qrIapDXUQMkAoIGSDJ2FZ860JO9rt67birXW2uVpTaGh/ytp7khjmFumFOoTZsrtNPq44q0hf1c7qfs3pOsR68vlzl4UzPx/ZGpW3Njva0Ooo3YeL9bwXg0kXIAEkmK+jt/5xP9Lr6ryNRTc+1tLw0oDEe1/Teu6pMtywYqx/95pBe2n3C28GnTSnO1sNrK7SyIt/zsY4r7W51tL3FUcRjSxVlEjKA6QgZIMkUpEv56Zba+7w9Wjlw0tXBrgFdWWDrC0W2MgPxHzsuN00/+fpM3XH1RP3dSwe0r64jruNyQml6YPVU/fnicZ7O9TM1J1291eCos9/fY6Rp2YQMYDrLdUfy/QMAI6Ex4uqlOkfdA/7+vEMBS18osnRl2Pa1k8Cvdzfqpnklg37mP3c26rrZhSoIeSim0xoisYD5tMf/5Wtxka0lxbzvAJiOkAGSVGe/tKk+qqPd/v/E89ItrSixNS330rhz0TUgbWl09HGH4/s7ctIsLS+xNXPMpfG/CUBiCBkgyR3pdvVOg6PmU/7/1CdmWVpeaqt0lNaU9DuxV8Z3tTka8NkwGQFpXtjW/LAtHy9DAbhEETJACnBc6YN2R9uaXd+PmyRpdp6tq0ps5Yzg6roP21291+T/MZklaXa+raXFI3veAEYGIQOkkEhU2tnqaHero36fdzaCtjS/wNbCIltpw3hno7Y7tg7G5DtJAIYfIQOkoM5+V+82Ovp9p/8//6ygtLQ4oMvzhzYS2vukqoaoDicw0K4g3dKyS2htD4DhQ8gAKay+19XbDY6O9/q/DIQzLK0stTU5wVeZe6PS1iZHe9viH2h3tlBAWlhoa27YlsdxOgAMRcgA0Cedjt5tcj3PnjnTlGxLK8baCqd7KwjHlXadHmh3yudw4KAlzS2wtaDQVhbrYICUQsgAkBR7M2hvm6P3W1z1et1R8gxXFMTms2TFMR7mwMnYHSG/A+0kqTwnNpG4IN33VwAwGCED4HN6BqQdLVHtbXM975D9mXQ79ohnfqGtwHlu0DREXFWdSOyRVklmbB5MGdN5gZRGyAA4r9ZTrt5pdBLaRTo3zdLVJbYuOz18bkgG2gWlJcW25uT7mzoMILkQMgAGVdcdC5qGiP9LRWmmpSk5lna2OPI7xibdlirDtioLbWUw0A7AaYQMgItyJe1vd1Td7KorgfUsfliSZuVZuqokwEA7AOcgZADErc+JvWG0q8XRKf9Ph+I2IcvSCgbaARgEIQPAs64Bqbopqv0drobjClKQbunqEksVuTxDAjA4QgaAb42R2OvTdT1DcxkJBa3YQLsCi4F2AOJCyABI2OGu2ILgFp/7IgWt2PyZRUW2QnHMnwGAzxAyAIZE1JX2tTna3uKqx8OrSeU5tpaVWApncAsGgHeEDIAhFYlKO1pieyYNtsM2A+0ADAVCBsCw6OhztaXJ0Sdn7bCdE7ROD7SzGGgHIGGEDIBh1RBxdaTLVc9A7HXqqTmW0ngZCcAQIWQAAICx+HcRAAAwFiEDAACMRcgAAABjETIAAMBYhAwAADAWIQMAAIxFyAAAAGMRMgAAwFiEDAAAMBYhAwAAjEXIAAAAYxEyAADAWIQMAAAwFiEDAACMRcgAAABjETIAAMBYhAwAADAWIQMAAIxFyAAAAGMRMgAAwFiEDAAAMBYhAwAAjEXIAAAAYxEyAADAWIQMAAAwFiEDAACMRcgAAABjETIAAMBYhAwAADAWIQMAAIxFyAAAAGMRMgAAwFiEDAAAMBYhAwAAjEXIAAAAYxEyAADAWIQMAAAwFiEDAACMRcgAAABjETIAAMBYhAwAADAWIQMAAIxFyAAAAGMRMgAAwFiEDAAAMBYhAwAAjEXIAAAAYxEyAADAWP8P4XaI/1926xUAAAAASUVORK5CYII=" width="562" height="178" class="img_ev3q"></p><p>æœ¬æ–‡ä»‹ç»è§£å†³ç›‘å¬å¼€å‘ç¯å¢ƒä»£ç†åœ°å€æ›´æ”¹åè‡ªåŠ¨é‡å¯<code>webpack-dev-server</code>çš„é—®é¢˜ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="èƒŒæ™¯">èƒŒæ™¯<a class="hash-link" href="#èƒŒæ™¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ—¥å¸¸å¼€å‘ç»å¸¸é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜æ˜¯åˆ‡æ¢ webpack çš„<code>proxy</code>åœ°å€ï¼Œéœ€è¦é‡å¯<code>webpack-dev-server</code>æˆ–è€…å¦å¼€ä¸€ä¸ªç»ˆç«¯å»åˆ›å»ºä¸€ä¸ªæ–°çš„<code>webpack-dev-server</code>å®ä¾‹ã€‚</p><p>ä¸ºäº†ç®€åŒ–è¿™ä¸ªå˜æ€çš„è¿‡ç¨‹ï¼Œäºæ˜¯æ¢ç´¢å€ŸåŠ©<code>chokidar</code>ç›‘å¬ç³»ç»Ÿæ–‡ä»¶çš„èƒ½åŠ›ï¼Œæ¥ç›‘å¬<code>proxy</code>é…ç½®æ–‡ä»¶çš„ä¿®æ”¹å¹¶é…åˆ<code>webpack-dev-server</code>çš„ Nodejs  APIè¾¾åˆ°è‡ªåŠ¨é‡å¯çš„ç›®çš„ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä»€ä¹ˆæ˜¯chokidar">ä»€ä¹ˆæ˜¯chokidar<a class="hash-link" href="#ä»€ä¹ˆæ˜¯chokidar" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noopener noreferrer">chokidar</a> æ˜¯ä¸€ä¸ªåŸºäº Nodejs çš„<code>fs</code>æ¨¡å—å¼€å‘çš„ç›‘å¬æ–‡ä»¶çš„å·¥å…·ï¼Œè·¨å¹³å°ï¼ŒåŒæ—¶è§£å†³äº†<code>fs</code>æ¨¡å—æä¾›çš„åŸç”Ÿæ–¹æ³•<code>fs.watch</code>å’Œ<code>fs.watchFile</code>çš„ä¸è¶³ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fswatchfile">fs.watchFile<a class="hash-link" href="#fswatchfile" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>fs.watchFile(filename[, options], listener)</code>ç”¨æ¥ç›‘å¬å•ä¸ªæ–‡ä»¶çš„å˜åŒ–ï¼Œå…¶é‡‡ç”¨è½®è¯¢çš„æ–¹æ³•ï¼Œå¯ä»¥æŒ‡å®š<code>interval</code>è®¾ç½®è½®è¯¢æ—¶é—´é—´éš”ï¼Œé»˜è®¤æ˜¯<code>5007ms</code>ï¼Œå¹¶ä¸”å½“æ–‡ä»¶è¢«è®¿é—®å°±ä¼šè§¦å‘å›è°ƒå‡½æ•°<code>listener</code>ã€‚</p><p><code>fs.watchFile</code>çš„ä¸»è¦é—®é¢˜åœ¨äºé‡‡ç”¨è½®è¯¢çš„æ–¹å¼å¯¼è‡´ç›‘å¬ä¸ç²¾ç¡®ï¼Œå¹¶ä¸” CPU å ç”¨é«˜ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fswatch">fs.watch<a class="hash-link" href="#fswatch" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>fs.watch(filename[, options][, listener])</code>å¯ä»¥ç›‘å¬å•ä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œå¯ä»¥é€šè¿‡<code>eventType</code>æŒ‡å®šç›‘å¬æ–‡ä»¶å‘½åæˆ–è€…ä¿®æ”¹æ–‡ä»¶å†…å®¹å¯¼è‡´çš„å˜åŒ–ï¼Œä½†æ˜¯<code>fs.watch</code> API è·¨å¹³å°å¹¶é 100% ä¸€è‡´ï¼Œå¹¶ä¸”åœ¨æŸäº›æƒ…å†µä¸‹ä¸å¯ç”¨ï¼Œè‡³äºä»€ä¹ˆæƒ…å†µä¸‹ä¸å¯ç”¨ï¼Œå®˜æ–¹æ–‡æ¡£ä¹Ÿæ²¡è§£é‡Šã€‚åœ¨ Windows ä¸Šï¼Œå¦‚æœç›‘è§†ç›®å½•è¢«ç§»åŠ¨æˆ–é‡å‘½åï¼Œåˆ™ä¸ä¼šè§¦å‘ä»»ä½•äº‹ä»¶ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="chokidarwatchpaths-options">chokidar.watch(paths, <!-- -->[options]<!-- -->)<a class="hash-link" href="#chokidarwatchpaths-options" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>chokidar è§£å†³äº†<code>fs.watch</code>å’Œ<code>fs.watchFile</code>çš„ä¸è¶³ï¼Œå¹¶ä¸” API ç®€å•æ˜“ç”¨ä¸”ç›‘å¬æ•ˆç‡æ›´åŠ é«˜æ•ˆï¼Œä½¿å¾— vscode å†…éƒ¨çš„ç›‘å¬æ–‡ä»¶ä¹Ÿä½¿ç”¨äº†è¿™ä¸ªå·¥å…·ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="api">API<a class="hash-link" href="#api" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é…ç½®é¡¹">é…ç½®é¡¹<a class="hash-link" href="#é…ç½®é¡¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">chokidar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">watch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'file'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// æ˜¯å¦æŒä¹…åŒ–è§¦å‘ç›‘å¬äº‹ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">persistent</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¿½ç•¥ç›‘å¬çš„æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">ignored</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'*.txt'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å½“è®¾ç½®ä¸ºfalseæ—¶å€™ï¼Œåœ¨ chokidar åˆå§‹åŒ–å®Œæˆä¹‹å‰æ–°å¢æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ä¹Ÿä¼šè§¦å‘ add å’Œ addDiräº‹ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">ignoreInitial</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å½“è®¾ç½®æˆ false æ—¶ï¼Œåªæœ‰ symlink æœ¬èº«ä¼šè¢«è§‚å¯Ÿåˆ°å˜åŒ–ï¼Œè€Œä¸æ˜¯è·Ÿéšé“¾æ¥å¼•ç”¨å’Œå†’æ³¡äº‹ä»¶é€šè¿‡é“¾æ¥çš„è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">followSymlinks</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç›‘å¬æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹çš„ç›¸å¯¹æ ¹ç›®å½•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">cwd</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'.'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å½“è®¾ç½®æˆ true çš„æ—¶å€™ï¼Œä¼šå¿½ç•¥ glob æ¨¡å¼çš„pathè®¾ç½®ï¼ŒæŠŠå®ƒä»¬å½“æˆæ–‡ä»¶åçš„ä¸€éƒ¨åˆ†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">disableGlobbing</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// å½“è®¾ç½®æˆ falseï¼Œä½¿ç”¨ fs.watchFile æˆ–è€… fs.watch ç›‘å¬æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">usePolling</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// é’ˆå¯¹ fs.watchFile è®¾ç½®çš„è½®è¯¢é—´éš”</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">interval</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">binaryInterval</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">300</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">alwaysStat</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// è®¾ç½®å¤šå°‘å±‚çš„å­æ–‡ä»¶ç›®å½•ä¼šè¢«é€’å½’ç›‘å¬</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">depth</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">99</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// é»˜è®¤æƒ…å†µä¸‹ï¼Œaddäº‹ä»¶å°†åœ¨æ–‡ä»¶é¦–æ¬¡å‡ºç°åœ¨ç£ç›˜ä¸Šæ—¶è§¦å‘ï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰å†™å…¥æ•´ä¸ªæ–‡ä»¶ã€‚æ­¤å¤–ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œåœ¨å†™å…¥æ–‡ä»¶æ—¶å°†è§¦å‘ä¸€äº›æ›´æ”¹äº‹ä»¶ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç‰¹åˆ«æ˜¯åœ¨ç›‘è§†å¤§æ–‡ä»¶æ—¶ï¼Œå°†éœ€è¦ç­‰å¾…å†™æ“ä½œå®Œæˆï¼Œç„¶åæ‰èƒ½å“åº”æ–‡ä»¶çš„åˆ›å»ºæˆ–ä¿®æ”¹ã€‚å°†awaitWriteFinishè®¾ç½®ä¸ºtrue(æˆ–trueå€¼)å°†è½®è¯¢æ–‡ä»¶å¤§å°ï¼Œä¿æŒå…¶æ·»åŠ å’Œæ›´æ”¹äº‹ä»¶ï¼Œç›´åˆ°å¤§å°åœ¨å¯é…ç½®çš„æ—¶é—´å†…ä¸å˜ã€‚é€‚å½“çš„æŒç»­æ—¶é—´è®¾ç½®åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–äºæ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶ã€‚ä¸ºäº†å‡†ç¡®çš„æ£€æµ‹ï¼Œè¿™ä¸ªå‚æ•°åº”è¯¥ç›¸å¯¹è¾ƒé«˜ï¼Œä½¿å¾—æ–‡ä»¶ç›‘è§†çš„å“åº”æ›´å°‘ã€‚è°¨æ…ä½¿ç”¨ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">awaitWriteFinish</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">stabilityThreshold</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">2000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">pollInterval</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// æŒ‡ç¤ºæ˜¯å¦ç›‘è§†æ²¡æœ‰è¯»æƒé™çš„æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">ignorePermissionErrors</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// ç›‘å¬æ›´ä¸ºç»†èŠ‚çš„æ§åˆ¶ï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶åœ¨è¢«åˆ é™¤åçš„100æ¯«ç§’å†…è¢«é‡æ–°æ·»åŠ ï¼ŒChokidarä¼šå‘å‡ºä¸€ä¸ªchangeäº‹ä»¶ï¼Œè€Œä¸æ˜¯unlinkç„¶åæ·»åŠ ã€‚å¦‚æœé»˜è®¤çš„100æ¯«ç§’ä¸é€‚åˆä½ ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰å€¼æ¥è¦†ç›–å®ƒï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">atomic</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç›‘å¬äº‹ä»¶">ç›‘å¬äº‹ä»¶<a class="hash-link" href="#ç›‘å¬äº‹ä»¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>chokidar.watch</code>è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨è¯¥å¯¹è±¡çš„<code>.on(event, callback)</code>æ–¹æ³•è®¾ç½®ç›‘å¬äº‹ä»¶<code>event</code>å’Œå›è°ƒå‡½æ•°<code>callback</code>ï¼Œ<code>event</code>ç±»å‹å¦‚ä¸‹ï¼š</p><ul><li><code>add</code>ï¼šæ–°å¢æ–‡ä»¶</li><li><code>addDir</code>ï¼šæ–°å¢æ–‡ä»¶å¤¹</li><li><code>change</code>ï¼šæ–‡ä»¶å†…å®¹å˜åŒ–</li><li><code>unlink</code>ï¼šåˆ é™¤æ–‡ä»¶</li><li><code>unlink</code>ï¼šåˆ é™¤æ–‡ä»¶å¤¹</li><li><code>ready</code>ï¼šæ‰«ææ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ç»“æŸï¼Œå¼€å§‹ç›‘å¬</li><li><code>error</code>ï¼šç›‘å¬ç¨‹åºæŠ¥é”™</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="wds-çš„-nodejs-api">WDS çš„ Nodejs API<a class="hash-link" href="#wds-çš„-nodejs-api" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>webpack-dev-server</code>æä¾› <a href="https://webpack.js.org/api/webpack-dev-server/" target="_blank" rel="noopener noreferrer">Nodejs çš„ API</a>ï¼Œä¹Ÿå°±å‡ ä¸ªï¼š</p><ul><li><code>start</code>ï¼šå¯åŠ¨ WDSï¼›</li><li><code>startCallback</code>ï¼šå¯åŠ¨å¹¶æŒ‡å®šå¯åŠ¨å®Œçš„å›è°ƒï¼›</li><li><code>stop</code>ï¼šåœæ­¢ WDSï¼›</li><li><code>stopCallback</code>ï¼šåœæ­¢å¹¶æŒ‡å®šåœæ­¢åçš„å›è°ƒã€‘</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å®ç°æ€è·¯">å®ç°æ€è·¯<a class="hash-link" href="#å®ç°æ€è·¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ WDS æä¾›çš„ Nodejs API çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬åˆ©ç”¨<code>startCallback</code>å›è°ƒæ³¨å†Œ<code>chokidar</code>ç›‘å¬æ–‡ä»¶çš„ç¨‹åºï¼Œå½“æ£€æµ‹åˆ°<code>proxy</code>é…ç½®çš„æ–‡ä»¶å˜åŒ–åï¼Œ<code>stop</code> WDS å¹¶é‡å¯ä¸€ä¸ªæ–°çš„ WDS å®ä¾‹ã€‚</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// server.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token maybe-class-name">Webpack</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'webpack'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token maybe-class-name">WebpackDevServer</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'webpack-dev-server'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> webpackConfig </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'./webpack.config.js'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> proxy </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'./proxyConfig'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> chokidar </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'chokidar'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> compiler </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(80, 250, 123)">Webpack</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">webpackConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> server </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">WebpackDevServer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token spread operator">...</span><span class="token plain">webpackConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">devServer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  proxy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> compiler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">createServer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> server </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">WebpackDevServer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token spread operator">...</span><span class="token plain">webpackConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">devServer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> compiler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">startCallback</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> watcher </span><span class="token operator">=</span><span class="token plain"> chokidar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">watch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'./proxyConfig.js'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">on</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'change'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"checked dev-server proxy changes, restarting server"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">stopCallback</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        watcher</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">close</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">createServer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">createServer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// proxyConfig.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string-property property">"/api"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">target</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"http://127.0.0.2"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶åå¼€å‘ç¯å¢ƒçš„æƒ…å†µä¸‹ä½¿ç”¨æˆ‘ä»¬çš„<code>server.js</code>ç¨‹åºæ›¿ä»£ webpack çš„ cli å‘½ä»¤ï¼Œå³<code>node server.js</code>ï¼Œè¿™æ ·å°±å¯ä»¥äº†ã€‚</p><p><img loading="lazy" alt="image-20220105224129440" src="/assets/images/image-20220105224129440-a325a3446ec18500d614f10086a749a3.png" width="987" height="334" class="img_ev3q"></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[ä¸ªäººç½‘ç«™è¿ç§»]]></title>
            <link>https://icodex.me/2022/01/04/ä¸ªäººç½‘ç«™è¿ç§»</link>
            <guid>/2022/01/04/ä¸ªäººç½‘ç«™è¿ç§»</guid>
            <pubDate>Tue, 04 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[image20220104221756]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="image_20220104221756" src="/assets/images/image_20220104221756-cfc5beff3e5457b7afc1d90da027fbd9.png" width="853" height="287" class="img_ev3q"></p><p>æ–°å¹´ä¼Šå§‹ï¼Œå°†ä¸ªäººç½‘ç«™ä» dumi è¿ç§»åˆ°äº† docusaurusã€‚</p><blockquote><p>åœ°å€ï¼š<a href="https://icodex.me" target="_blank" rel="noopener noreferrer">https://icodex.me</a></p><p>ä»“åº“ï¼š<a href="https://github.com/wood3n/icodex-next" target="_blank" rel="noopener noreferrer">wood3n/icodex-next: blog (github.com)</a></p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="èƒŒæ™¯">èƒŒæ™¯<a class="hash-link" href="#èƒŒæ™¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è¿‡å»ä¸€å¹´å¤šçš„æ—¶é—´ï¼Œæˆ‘éƒ½åœ¨ç”¨ dumi æ„å»ºè‡ªå·±çš„å‰ç«¯çŸ¥è¯†ä½“ç³»æ–‡æ¡£ï¼ŒæœŸé—´å‡çº§è¿‡å¾ˆå¤šæ¬¡ dumi çš„ç‰ˆæœ¬ï¼Œä¹Ÿçœ‹ç€ dumi ä» 200 å¤š star é€æ¸å¢é•¿åˆ° 2k å¤š starã€‚</p><p>è¿‡å»é€‰æ‹© dumiï¼Œä¸»è¦çœ‹ä¸­çš„æ˜¯ dumi å¯¹äºåœ¨çº¿æ–‡æ¡£çš„äº¤äº’èƒ½åŠ›ï¼Œå› ä¸ºæœ‰æ—¶å€™å­¦ä¹ ä¸€ä¸ªæ–°çš„çŸ¥è¯†ç‚¹æ€»æƒ³ç€ç”¨ demo çš„æ–¹å¼å»å®ç°ï¼Œå°¤å…¶æ˜¯ CSS è¿™ç§çš„ã€‚è€Œ dumi æä¾›çš„äº¤äº’èƒ½åŠ›æ°å¥½å¯ä»¥æ»¡è¶³æˆ‘çš„è¿™ä¸€ä¸ªéœ€æ±‚ã€‚åŒæ—¶é…åˆ Typora ç¼–å†™ markdown æ–‡æ¡£ååˆ†çš„æ–¹ä¾¿ã€‚</p><p>ä¸è¿‡åŒæ—¶æˆ‘ä¹Ÿæ³¨æ„åˆ°äº† docusaurus ï¼ˆè¿™ä¸ªå–è‡ª<code>document</code>å’Œ<code>saurus</code>ç»„åˆè¯çš„åç§°çœŸçš„å¤ªéš¾è®°äº†ï¼‰è¿™ä¸ªæ–‡æ¡£ç”Ÿæˆå·¥å…·ï¼Œä¸è¿‡ä¸€å¹´å‰è¿™ä¸ªå·¥å…·è¿˜æ¯”è¾ƒç¨šå«©ï¼Œæä¾›çš„èƒ½åŠ›ä¸å¤ªå…¨é¢ï¼Œæ‰€ä»¥å°±æ”¾å¼ƒäº†ã€‚ä¸è¿‡éšç€è¶Šæ¥è¶Šå¤šçš„ç½‘ç«™å¼€å§‹ä½¿ç”¨ docusaurusï¼Œæˆ‘ä¹Ÿå¼€å§‹äº†è¿ç§»ä¹‹è·¯ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è¿ç§»æ­¥éª¤">è¿ç§»æ­¥éª¤<a class="hash-link" href="#è¿ç§»æ­¥éª¤" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>docusaurus æä¾›è„šæ‰‹æ¶å·¥å…·ç›´æ¥ç”Ÿæˆç«™ç‚¹é¡¹ç›®ä»£ç ï¼Œè¿™é‡Œç›´æ¥åˆ©ç”¨è„šæ‰‹æ¶æ¥åˆ›å»ºã€‚</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">npx create-docusaurus@latest my-website classic --typescript</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç”Ÿæˆçš„é¡¹ç›®ç›®å½•å¦‚ä¸‹ï¼š</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">my</span><span class="token operator">-</span><span class="token plain">website</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ blog</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚   â”œâ”€â”€ </span><span class="token number">2019</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">28</span><span class="token operator">-</span><span class="token plain">hola</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">md</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚   â”œâ”€â”€ </span><span class="token number">2019</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">29</span><span class="token operator">-</span><span class="token plain">hello</span><span class="token operator">-</span><span class="token plain">world</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">md</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚   â””â”€â”€ </span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">30</span><span class="token operator">-</span><span class="token plain">welcome</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">md</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ docs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚   â”œâ”€â”€ doc1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">md</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚   â”œâ”€â”€ doc2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">md</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚   â”œâ”€â”€ doc3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">md</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚   â””â”€â”€ mdx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">md</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ src</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚   â”œâ”€â”€ css</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚   â”‚   â””â”€â”€ custom</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">css</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚   â””â”€â”€ pages</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚       â”œâ”€â”€ styles</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">module</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">css</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚       â””â”€â”€ index</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”‚   â””â”€â”€ img</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ docusaurus</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">package</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ </span><span class="token constant" style="color:rgb(189, 147, 249)">README</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">md</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â”œâ”€â”€ sidebars</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">â””â”€â”€ yarn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">lock</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ’ä»¶å’Œé¢„è®¾èƒ½åŠ›">æ’ä»¶å’Œé¢„è®¾èƒ½åŠ›<a class="hash-link" href="#æ’ä»¶å’Œé¢„è®¾èƒ½åŠ›" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>docusaurus æä¾›æ’ä»¶å’Œé¢„è®¾çš„é…ç½®ï¼Œç±»ä¼¼äº babelï¼Œwebpack è¿™äº›å·¥å…·çš„èƒ½åŠ›ï¼Œä½¿ç”¨ CLI æŒ‡å®š<code>@docusaurus/preset-classic</code>é¢„è®¾ä¼šåŒæ—¶åŒ…å«è‡³å…³é‡è¦çš„ä¸‰ä¸ªæ’ä»¶ï¼š</p><ul><li><code>@docusaurus/plugin-content-docs</code>ï¼šæä¾›æ–‡æ¡£ç¼–å†™èƒ½åŠ›ï¼Œå¯¹åº”ç”Ÿæˆçš„<code>docs</code>ç›®å½•</li><li><code>@docusaurus/plugin-content-blog</code>ï¼šæä¾›åšå®¢æ¸²æŸ“èƒ½åŠ›ï¼Œå¯¹åº”ç”Ÿæˆçš„<code>blog</code>ç›®å½•</li><li><code>@docusaurus/plugin-content-pages</code>ï¼šæä¾›æ™®é€šå‰ç«¯é¡µé¢çš„æ¸²æŸ“èƒ½åŠ›ï¼Œå¯¹åº”ç”Ÿæˆçš„<code>pages</code>ç›®å½•</li></ul><p>è¿™ä¸‰ç§æ’ä»¶çš„é…ç½®éƒ½åœ¨<code>docusaurus.config.js</code>è¿™ä¸ªæ–‡ä»¶ä¸‹ï¼Œå¯¹äºæˆ‘ä¸ªäººéœ€æ±‚æ¥è¯´è¿™ä¸‰ç§èƒ½åŠ›éƒ½éœ€è¦ï¼Œå› æ­¤æˆ‘éƒ½å¼€å¯äº†ï¼Œå¦‚æœä¸éœ€è¦çš„è¯ï¼Œç›´æ¥åœ¨<code>presets.docs|blog|pages</code>è®¾ç½®æˆ<code>false</code>å³å¯ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¿®æ”¹ä¸»é¡µæŒ‡å‘">ä¿®æ”¹ä¸»é¡µæŒ‡å‘<a class="hash-link" href="#ä¿®æ”¹ä¸»é¡µæŒ‡å‘" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æˆ‘å¸Œæœ›å°†ä¸ªäººåšå®¢é¡µé¢ä½œä¸ºç«™ç‚¹ä¸»é¡µï¼Œé‚£ä¹ˆéœ€è¦åœ¨<code>docusaurus.config.js</code>å°†<code>blog</code>å¯¹åº”çš„<a href="https://www.docusaurus.cn/docs/api/plugins/@docusaurus/plugin-content-blog#routeBasePath" target="_blank" rel="noopener noreferrer"><code>routeBasePath</code></a>è®¾ç½®æˆ<code>/</code>ï¼ŒåŒæ—¶æŒ‡å®šåšå®¢æ–‡æ¡£æ‰€åœ¨çš„ç›®å½•<code>path</code>ï¼›è¿™æ ·å…¶ä»–åœ¨<code>docs</code>æˆ–è€…<code>pages</code>å°±æ˜¯ç›¸å¯¹äº<code>blog</code>çš„è·¯ç”±è·¯å¾„ã€‚</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// docusaurus.config.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">presets</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">"classic"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">blog</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// blogä½œä¸ºä¸»é¡µ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token literal-property property">routeBasePath</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"/"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"./blog"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token spread operator">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">pages</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"src/pages"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// æŒ‡å®š pages çš„è·¯ç”±è·¯å¾„ï¼Œå› ä¸º blog ä½œä¸ºä¸»é¡µäº†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token literal-property property">routeBasePath</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"/pages"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token spread operator">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é¡¶éƒ¨å¯¼èˆªæ é…ç½®">é¡¶éƒ¨å¯¼èˆªæ é…ç½®<a class="hash-link" href="#é¡¶éƒ¨å¯¼èˆªæ é…ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é¡¶æ æ— éå°±æ˜¯ Logoï¼Œå¯¼èˆªæ è¿™äº›ï¼Œå¯¹åº” docusaurus æä¾›çš„ä¸»é¢˜é…ç½®é¡¹çš„<a href="https://docusaurus.io/docs/api/themes/configuration#navbar" target="_blank" rel="noopener noreferrer"><code>navbar</code></a>ã€‚</p><table><thead><tr><th>é…ç½®é¡¹</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>title</code></td><td><code>string</code></td><td><code>undefined</code></td><td>é¡¶éƒ¨æ ‡é¢˜</td></tr><tr><td><code>logo</code></td><td><code>object</code></td><td><code>undefined</code></td><td>é¡¶éƒ¨ logo</td></tr><tr><td><code>items</code></td><td><code>NavbarItem[]</code></td><td><code>[]</code></td><td>é¡¶éƒ¨èœå•å¯¼èˆª</td></tr><tr><td><code>hideOnScroll</code></td><td><code>boolean</code></td><td><code>false</code></td><td>æ˜¯å¦åœ¨é¡µé¢å‘ä¸‹æ»šåŠ¨æ—¶è‡ªåŠ¨éšè—å¯¼èˆªæ </td></tr><tr><td><code>style</code></td><td>`'primary'</td><td>'dark'`</td><td></td></tr></tbody></table><p>å¯¼èˆªèœå•é€šè¿‡<code>items</code>é…ç½®ï¼Œdocusaurus æä¾› 5 ç§èœå•é…ç½®ç±»å‹ï¼š</p><ul><li><code>type="link"</code>ï¼šé»˜è®¤å½¢å¼ï¼Œé…ç½®<code>to</code>æˆ–è€…<code>href</code>æŒ‡å®šèœå•ç‚¹å‡»è·³è½¬è·¯ç”±ï¼›</li><li><code>type="dropdown"</code>ï¼šä¸‹æ‹‰èœå•å¯¼èˆª</li></ul><p><img loading="lazy" alt="image-20220104231019549" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANMAAAEMCAYAAABeGIOXAAAgAElEQVR4nO2df3RU1bn3v0DQgq7V6zKDpBrzAwiIIEmoBQkI3ttCQgSnEFNrbdUYoEUGoVHkwsu69y4XaaDijwxwr5By+2r7ViB2TWOTGbxr3YYGKEgzQ41YpTEQBzrIUL3vatG3CJz3j3POzD5nzu/ZM5NMns9akzln73322TPZ3/M8e58z+xkmCIKADJHBUxNEjGHDhnGpJ4dLLTYhEREDCbk/Jiuq4TwaYwcSEjFQSbZvplVMJCRioJNMH02Lm5dpEWX6/IQzeI1l7OLU7RuWigmIdHdeEsvQJN1iMzsfVzGlq1OTeAgt0iUuvfNwE1OqOjgJh0iGVAlMq14uYuLd4TMlIBJuesjUWIj3edX1JSUmXp2PrBphRDqtSzL12BLTQLRAJJihDQ9B8BKVpftMgiBw7bTJ1Ccfy7tNevVbe0Xxq1UTULhqP6KOjh+Er74OTOp6FVv69MuEgq9iUlcHQswxd3S9ii190pd94bdY0fUqVpyMcPt/JVNHspiKiWeHjbbV4fbCcSgo+hGCRgUj+7GiaDwKin6EbiCpL6vbOwGFxYmv7SHtDuAUQQDAXdsh7BhXgh+8eZF3xeZEu/D9Q6/hjtirFa3R5KsVpL+CICi+Ll4XyGTqsXxcZB9WFI7DijblF2J405a3NRKZi8qFP8GRE/+M8lLtstHjAQTiBzo8D0sd3vhwPcqlvYtvLsPdSycAb/wJT+q0wR65eGD7KTzAoyqWSC96kBKVGhI9uR/3fvo5Hv/K9/AfxXJqD7Ye60LUNQcuyE0SDJtWWvZd/JFNEGJ/YvuCxucz6nd2XDK2HrvHOXH9dC0Tz8kFuS7x73gsrJyLH+/eD/WFTiwbxOtPAU+vnQuj/5Sea6FRMiEld1EjXqoCnm+JtyHjbpPWi2l++s4bwcG/fg6MLsUzRWz6FDzztdnITWibg8+j/j/Z6GrW/+/6x9k5jx00xcRDSEaNue2rlajsCOBwJLFs9M0deH7tk/hWoZQnpiaMSWSib9ajaFw9fqXjdguC/GK//FzcNlHuCwIE4QLaPCUo8rQi+OtlKBonbstCi8ppsVeTyk2N4lce5TEAgEgrfsAep85nj1WVCW4vQVHFBgQABJ6ahaJxJfjBmxz8LFOi+PALK+XYC6TIidBrmHzoNUwO9TD7fpzQOEYUl2B6sTj5t7/ovt5jXif/ehEn/3rRkghSJaoEN4+XkLQzpPe8B7H8h/+MJa1BPLCqjCkQxZEDB/H0Ey3A2VhlEJCLWfPnAmsCOLyhBg/kKctjzV4sHiskXPASTxw/LvwBgInjkMuW6NiApRP3oq93V+zcwR0TsfTFOrzRuwtyS0M7JmLpuA/x0qFdWDxWdR75Cny+FStnbwReOoy++3MBXETb6gp8zSPg7eYa8bxSmcDavehrlvzN861oCwlY/OQH6Fsar2Pn/bnG3y03clE8UgAuhbC1bwqeKdIpFnPzxO/94nutePiSgHtv+gb+ffLYuFggCwcYJrDHMu8GpunDz/4vnv3gUGKGhhe2pWQOJt94c+ycsaI6LpsdN9CK66ewTCkVkrIQymc/AbxwQHmFD7XgKTTiW6WJvnjuV+djgXAQ/t9H41euSCf8HUDD7DJYQT4uuL0Cazrm4qWlpVKaXKIOrewg6sQWLH0ReLr1WbBnKHvydTTgINa0huSaIbv+siVt27wRgarN+Lf7ZbnmYnFdHdDxFo5ElGWOseccW4PFpfFqVRtpYCyWfq0UjwnAT8+9hjsPBRjLokJu1ukA5n7yeUxIinxBXVxMjLl90pem54YtchWhqWS29rmZ15aS2Vg8Rlv5Vq2VGWwZrdLDtQo6wbaPWfoEXl74E+xiXJfuQ3tQOX8ecgEwX7X4PrYGy9YCgQOdkOe2or8/gMDCRtSqJhES/HTswdJxJSgePxHF40VL09rLWhVJBVXjkM/UEzy0B0AdZibUX4p71gD44EPJ7WT7vQAhchB+P7Bg/tz4GEMQINwyDgtwEOGPBQjCWYS1yqjaLg8x0jdmEsdHT1c8gs6bRgGI4juHXsOdx7oSpv0BQPisC98/FwVuKFUKKf5tsV+cshfG9hMnINjXIlchmkoqNOoW2VIyG4tcRabjIrM+atlFTPxkADj9BMOq6pXycGHWgrl46kAnovfXIPd8K3a9eC+qDuUyxyHuNgEon10HvHhAcvVEF69yfqPYGXVPDgB1aO19FmWC8h8rqIuxbpqcVlWMfI36BQDw9+IjALnMEfI4DAAOrJ2NcWs12hSOAmN68S6AKbflahRgv4B469JN7uSleBdA9L1W3Pfpacw7/Df8rKIS8WuLgP/96WkALvysdEpCP5B3BfV3zXgDcW/R2OVa5BKtzvpTSpevqWQ2FmlYJKP65Dwz98/ujN5w9Ynt4NR8ygPQ3PtX4umODdh7QpwOP7D2STyQxx6j+udMW4CncRCB30chRDoR6JiLyunKzqg9y2PWTsZ8q4/1f4iPNK7eAERLpnAToRBjw/4/ovdU4mtHdVx+756NJtSttKranyudr9w7lqInLxcQovgv5iYtBODRvFI8KkTxyCE/TiR8R7L7K6eBuUBANrmJ/2eddtyfW4imCRUx165pQqJF0uxvJulGlkw7Q7uM41/aWjKHuo2R08twz1oBz3c1Ye9TB9FQURq3YkK8bLyuUsxcI7p6wd+/hUDVfNwz1uSLRGI9iS+N8gDKZj0O4D/xu4RBQwi/ewlY8I17pQkMIWbZBAAYey8WVAHbDoXUB8aRyhx4q1Njhk/1PTm82HHlhhsxRzNjCp6eUIg5uIhH3j6k+CyCZHYSRhrqi4WOG6vF/a4i/KikAj8qqcD9rkJbInEiHGODIcTKAA7F5MQaMedWUL60EQte/Ame1xj7aB1StnQzFvgPYPeBg2ioWwrWLmn+QwTtehLLI3aljKVNexwvVAIv1G5BkEkP7ngYL+AxPFGdyxwrvwQIQi4WPf4Y8PLDWPlrdsKkFStXt0pjD6mMfxPu2RFSlGk7IW2PHYc7ARzoP5tGS9SDHx9qxRsXlOknzp1Gl5CLrxcqvy9BECC4KrAjLxe4fBr/GOoxtUwCc29Ka8xk9P8UBAGLXEUxt09dTq8OszSjdDnPCEEQ7I+ZnApJr/EYOw9VCwHMnwuXUTmZsXNRWbURa/2Po77ZQnvkv+yV0LS8TC4Wvfwebt05GbUTfxpPrnwOR95fwozV4nXHrrh3PYNTe4GSb92LCT9kjntpCW5my3SOw6p5D2PCy2wZ2VpOw/f3PoYXviXmz992ENurDcZYXLgTDbMEbDvyM9x1ikkePQ1/mDWF+R5ZFxpA4Xy8gwO4688ncNfhs3i1ojImlETLBCZFeXVXozVuYcvqjYfUeXK6WZqcrndeNj2w+h4UrGbaeu3aNcs+BC8hmQrGMC2KN5+ag7UTf4HelaWGZa22L3mieHPNPDSU/BynVnJ5PmlIY2Xgr/trV60f7TlMs3MOgOOCKk4FYrvM+YMI+O/FC+tLLYtXD37iOouzAWD+129NoWCzFyProlfOzAKx6Vatktry2LVclsVk1EmciMaZ0KJoa/xfOPDU/8H2sYJBOePzGOFEDBc7XsGLmIPny28mMZlg5rYZlVeXU4tFr7wdUVkRmV6aJTGlWkhW9kM7J6P2ZYhjipXaVomnqMzruYhf//A+PHMAAObgx/+9E9W3KGcGhyJWHsuxU49WeSMRWbFMVq2SXUFZGjPZnlTgtO90rGWUbpbHi2yzUOlYt8HoHMmMkRQd3mRcZHefTTMVU6qElIyIrIjMKN1qPpEeTNejsygkO/s8BSenGYqJl5B45PGcEXRShuCP01m7ZKxRqgQGGFimdAvJqYh4WSmrZYjk4Tn17dQa8RYbwEFMPCxLqgVmlu60HGEPq+MuHkJKlYgMy2mJyalVstv5B7KgnJYnlNiduMikkJKu06qYeAjJbHsgCorElBx2xJRuIfGyZLqzeU7cO6eWJ9XispNmBAnKGTysklkaT/Eka7kUN22djpPM8qwKZcSIEcjJycGIESPScl+DGDoIgoCrV6/iypUruHr1KgQhfsNV3tZKU9eh1y8FQVBapmStklVLoyWo66+/Hjk5GQmxSwwxrly5gr///e+xfbXlceoGmq4BkWohCYJAQiLSSk5ODq6//npLfVPGyrbhjwOdDOjtCiknJ4eERKQdud/xEJSM4zUgzI6x2kgSEpEp5L5nR1BayPlJR1s3m1wwOkYQBIwYMSLZJhCEI0aMGOGoz6rTZIbzmAo3SzNqMM3aEZlCq+9Z6bN6aUlZJjsC0nqn+zdEpmH7oRN3z3QCgodV0sq3alIJIt04HSexcF03z46SSVDEQMFOfzUqYytyIC+3jgRFDBTs9FOz/psgplR0cCczfgSRLqzM1Fkh55NPPtGt3O62elJBT+Xs9pe//GXbjSYIXnzyySeKx4e0HilSPz6k97hRzujRoxWVG6nTrvnTExBZJ2KgMGrUKF0xmT2zp37Pue6662IVW5nFM7NIdoREYiIyzciRIw1FZCSgBDENHx4fNqmFovU4OisG9rF1tUjUeeptthEEkSnk/i+Lw6rLp/Vua2rcydy73hjKSn0EkWrs9k+jPusoDKfdO8NG7iNBDAScPqjAvtu6z2S3USQoYjBgVUhmfdbS40R2G2S0TW4eMZCw2j+t9FvLYya9CqwIIl1Wqbu5GPnNwZTUnUCoEfkFxbHX8jbdYJoWCMKbdB1EMjjpo5pPQDgZL5nlmTVuUE+NhxqR7+6F92gfwv3ia8WZZ+GLpLMRogC9BmFzCXO0+qHd8ZOM45+5OjGHg1pAMaLw7W5BlfcY3Hnx1Omr92C64zrL4env49A2Ihm0btkY3SJSb9taAyKZBvKu1xKRfViu5YpJ6cqrehS+lXE3MdpWx7hxdQlWx38mbOvc8rmibXXIX7kP3XL9zUEkWJlQI/ILGtGtU4eYX4OtALa6tdtH2INHP+X240C7Fin1VioK335gs+SGhY82AZ4ZYofMuw8Lq4GeMDNGifwGHe3z4H2wHIjsw+vYEnPhgl7AM7MR3QAAF9zL6oFtNfrjs8g+LJ+5HlN9cTdwVngfYmdrX49X5PpXl+u0vwXu55j2++qx1S2JpmwDwv2tWAdgna8P4f49CitJWMdq37TS11P21HhGLRIAwAX36lq45F2FgFyoqJwHf+A3sQ4ePR6Av7oSFXkA8mrhWeyK13R3JarQi7B89S/bgLBPEpTGuKV7/3r4G1rhKYunTV/MtAX1WMHUr808eDcxx5Qtg7e6Ex3HaZIilSTTby1ZJis3abXS9RqWPlGJ7pPoJs2Apz2e47q7ElXtARyOAEAUhwOdqKq8L9552dm6mevhV1ddtgHh/j74GiRXa6VseYI4sg1YN0fP4gCoHo/bTds+HvkKa+NC/iQL7iXhCL1+aXWWz9JNWyuNcHryVIiqqjBf3Ijsw/KCGiDmah2Dt5opmHcfFspXesnFW3i3KKVoWx3y3YCPcRGrdM43fbWU374eG2lqe9Bh1A/t9m3d1Yl4kh5LFEX4fWBqviSI4wH4q5vwUJle+bir1308AH/DKmncIVkp7zLrs3N5tVjRIO/kI189HnME41ZCbFf4feZiQaQUJ31W1zIlc+8pI+5daDc87fWYxYqnvRcfSZvRtmcVbh4gu3q9OHKmM8Eti7tTUfieY928KHwrVbNnkX14ZZssZHGCwi9PdsjHNDMTEJbohOe5+DFi+xPHWsmLlmBJxt3juqCKlXzeoopNYbt74T26IWZNXIu3wFvdArc07tmIVUo3D5AsSgu2bmNF6IJ7UxOqpMmF/IJngWWsm+eCe+cW4LliZkwVwMKjffEJB2mCQpy2lup4kJ2AsEI9fMt6US6do9wzHr7+DYy1LMdD3nnwe2bQ1DgH7Lh7evnDrly5ImhlaE3/sSdUp1nZ13rdcsst9j71UCDUKI3ZNiRxI5iwwscff6z4LZPWC9D/vZPu75mMzJuTKcPB/7QDMdSx08eTns1LtjEEMVCx23e5hqBI9zR41lK2AeH+TDdi6KL1jB6bp7fcQsotk7ohJCpioJJs/+QuJiuNIVERAwmr/dGsDPcnINJ1LEHwgGf/TYmbRyIhsg0rfdqRmEgsBKGEy4OuRpUTRDbA9ScYvE5GENlC0s/m2RUNiYwY7Njpw9zWzSOIoU5ab9oSRDbjaK1xLehRIiKbcPKTDMNn83iKQO8nGASRSfT6oJNwR+TmEQQnSEwEwYm4m3fajzvOXQQgAAKAkYU4+LXZyI3lBzD1nLTegCBg9k1fx447mF/JXjwMz6l+HBIEQBCA0Xfh+F2TTU5/AQCtnkhkBzkAEAq+im9fysUvZn8XpZD8yNN+TD7Rg5OlUyH0+THlz3/Dv5U8giUuMf9E6A38MroE38wFEBWFVJT3MJoLxbFQ9I+/xEtnJuOpAoOzf9QD5E1LywcliFQh/8YpJ3pyPx7+zIVfzK5EKVuiqAonBQFABL+MXsScm/4JS5gVQaaVLsE0iEboD3/ux6EbpsFbJO4DQO6kb2KNIEB/juEC3rz4FyxPxacjiAwwfM+nn+Oxr1QphaRB198v6mcKAnD5f2BQIpH+HjR9McrOEQQxoBneh1EYd6NRkTwsceUCn53A1BPvapaYdmshZn/Rj28cP2xRUO/Be/4v9ltLEAOYnN/iRnx/DMRJBz2KKvEuAphy7gSmHj6B7+V9Bw2FTL6rAl5BgOdPZzD/yBlU/MN9eHmS/hJePT3v4vXRN+Pbly7x+hwS76CpK4Q9sf1R2DyxFg+Okfcj2H/0LWz8ItZw7J2zEPF1K83yiaEOnzUgiirRU/EIXhsNvPrnn2Ha24eVK5S6KtB8z8N466Yv4fCn/42v/u4tvKNZ0cc4g9vRNpXzLF5fB0q6QsCtj+LUHPk1CR9+0AFxYVVJKNeVxfMn3oidQbmVZvkEYcywJzr3CMVf+R7WFWkvOqn5fqELK0+dAf7hn7D9jls0Fp7swQtH3sHPR03F23dN1nn64SS8R/+Eze4VyX+KC7/Fsg9OY9ytj2J9sU6Zvg6UnIO+pTHLJ7KSSCRiugil0QKUikUof3AD8NMLXfYmD1yzsXy0UYEp+O5NX3L6+WwTOnsaB28o0xdSjL+h90Iy+QShz/DSsjI8duU05hxTCeq0H3ee6AEQwS/ffgNvsJ0segi7PgOKRo0FAPzhxM/xwhn24Hfx2qf/D7OuvznlHwCIoPcyMPd6k5W8i8uweeTn2PjBPuzXEoxZPkGYEFtrXLxxC8SegLihFCdLpwAABCGCN479F/5FHpgLX8K/TliCb7riD7D+4cTP8egl6VhBwHfyvo01BUbrjPNy88RJBxi5eDGYCYaRRTg8817VYvpm+US2wdPNi4lJb6F+vXe9hfm10gaOmCSkMdZBAHVax5nlE1kD1zFT5j7GZKyasZhDPS6MGwns+R8bs25j7sXuOY9i7w3AnnPybJ+NfILQIAueGs/Dg2NcwKX3bY91ym4rwtwk8gmCJQvEBKB4IfbeoDV58A6auiTL0teBEtU9o9DZ0zg48kbcZiWfIEzI4JhJfOXlcbx529eBknPsrWTVEwzq/BvKcKr8Lv3j1flE1pElExApEBNB2CRLJiAIIrsgMREEJ0hMBMEJEhNBcILERBCcIDERBCdITATBCRITQXCCxEQQnCAxEQQnSEwEwQkSE0FwgsREEJwgMREEJ0hMBMEJEhNBcILERBCcIDERBCdITATBCRITQXCCxEQQnCAxEQQnSEwEwYnBL6ZQI/ILinVedfBF0tGIKHwr2fM2ojuZ2trqkq6DSD+DX0xlGxDu7xNfvnoA9fDJ+/174E75GpdR+FbOgGdSa7wdR8fjleZgqk+sJNRIAswwOZluwKAntBue9nr4dpbH0/JqsWu18ypdi/cgzCNACJFWBr9lMiKyD8sLiuFVxYTpbi5GfnMQsnu2vC0qpslu2sp9yuDXkF0vPTeuF2ETd1L7ePn8wZib6A1JZWNtMG9jd3Mx8t0tAFrg1mk/kXqyW0x592FhNbC1i3W5gjiyDVg3J25J/J4ZODJHdg2PwYv1KGfctO7mYpQHKhGU3LigtxduucOWLYO3uhOemfrjs2hbHco94xn3sxLhtnh393u2A5vEPI9OdGqjNk5frXJxd9ZSxMMMkN1iggvuZfXAtkDckoQC2FrdhIfYTtvQynRi1TGRfXhl2zx4N8U7qGvxKqxrD+BwRCq/85gkKC2rEMTrnk6s823A9FhaOdyLme7esMp8bGfURmJAkOViAlBWiXVowRHJ1evuakFV5X2KK3dVYb7ymLHjUSW7bud74YcklJibVoOt6ET4vHyAC+6dfQgfbUJV+3qUs65lKICtqMcsHYujeX4rZdg2EgOCITABUY5ZDYC7KwjP2F68sm0eFh616wTVw9fPWhYd8mqxq78W3c3FcLsbMcvKMUTWkP2WCcD0B5tQtS0A3/EA/Boulf9MWJlwvhd+jEd+HiQLELdsls8n73CyIIZtJAYEQ0JM4kRECzyeTsXEQ4xtNcyMXxBedwuqvMtEq5JXixUNwFY3O4MXhFceG4UapZnBON3718NfPR63x47vhGcmc3xkH7xtNufbjNoYg9y+TDIE3DwAcKGich6ASuXEg0SVtxX5u4uR3y7vH8MuZoJg+upj8L4/A+6CFilFdPtcgHjTGI3IL6iJV9jQijBz32n66j74UBw/vroJwZ0uwMYEtlkbxVnFGfDMLIanuglBmtFLO0MkDKf4lEJHpaoD6qYPJAZDGwcvFIbTLtJTCiuoMxIpJLvFJD0Bke/uhfcozawRqWWIuHkEoQ25eQQxACExEQQnSEwEwQkSE0FwgsREEJwgMREEJ0hMBMEJEhNBcILERBCcIDERBCdITATBCRITQXCCxEQQnCAxEQQnSEwEwQkSE0FwgsREEJwgMREEJ0hMBMGJ7BCTVvRACqtCpJnsEBMAZcRAKeRKmgSljKdEDFWySEwsUsiV9l58lOmmEEOGLBWTNsbR/4Lwsm6iRkzaxMh9YlS/ck8nIIWS0TqOGBpkqZii8O1WLmxvGP0PQHdzALNibmIr1m2rwXJmcf3u5mK432+KHR/eBBwOiXGZgt554vrh/X0Ir9YIDEAMCbJo4f4WZmH9efAe7cMueX1LOfrfUVX0P892HI7Uwp0HTF+9galLjOm09UwYgEvzeOTVpiGSOzGYyCIxyQHJxIXuPfuDcMtWQor+559ZDI/qqHXnAeQB8gL5nnYms0F8ix4PwF9dic0kHsKALBKTjAvuTU3omFkD7xw24LJR9L8gvAU16PEeQ3inaHu6m4vhTk+DiSwhO8dMcoCy3dKYyCz6nxR3Vi9Khit/PM0MEqZkp5gghcJsX4+NbVHz6H8AFFH3Qo1wb2MqK1sGb3WLYsICoUYmkh9IbET2ikkWkN/zLHwRKfpfdQvcsenvAGbJ0fXKNsDXwERU76qEr4GtzAX3TulGcEG8jOxCuhavwjpIddPU+JCFQsoQQxoKKUMQAxASE0FwgsREEJwgMREEJ0hMBMEJEhNBcILERBCcIDERBCdITATBCRITQXCCxEQQnCAxEQQnSEwEwQkSE0FwgsREEJwgMREEJ0hMBMEJEhNBcILERBCcIDERBCdITATBCRITQXAiO8QkRw7UDDgmhorx6q3maoPuZvvr4mkFQlOEpimogy+iezgxiMgOMcnIK7gOYBJC0/SvQvg5ijqYDWSRmOqxrgHwe3argpgNIOTQNJuY0DQoh2cnu08MVrJITMCsB5tQhRa4LbhiSldLyw0UowLK+cs1LZ4y2qB2GTWdCJ+3UIwYdGSVmJBXi83eecC2GoMxkigShat1tAk9blZQUqwmxMtsxrPKxfwj+7C8oAbwxaMNTvXMMB6bxQII8BnDEQOL7BITANfiLfBWqyNeMIR2w9OucrUkEcZC0ER+gw5VGbleme796+FvaGXiP5XjIe88bO0ytorTV/fBJwkqMa4uMZjJOjHJwc6q0IJXNNyuaLgXqK5EhSpeABuDSY4UqCzjQv6kWC0Ivw9gW43CVSz3dALv95pOJkxfLcXNlSJnWHMPiYFOFkYOhGRpAij3PAvf3atSdpoq7zHs0gmQpmDSeI0JhnJ4+vvwUFud1M49FCN3kJOFlklEdMs64XluO3rYdJ0ogKLFGo/bdcsEcSQ2ZhKtlD/wG1Mr9NGZTlQV5hu0cxXWWftIxAAna8UUc/faO+Fnk7WiAEb2YaOnE+uWycHPKkUXjJkV7G6uwVamGkVkQoloW51yYkGaCl94tyu2v1x1Azfath1bMR75ZJUGPdnp5slI7p7f08kkilEAsXIGygvWS2nz4D3ax7hZ5fD0twIFNciXrFGV9xh8DTPiQaPzarHL14t89wzke+JldpVBfCLD3QIAWOdj6s2rxa5N+7C8oDgu8OomBPvpPlM2QJEDiSENRQ4kiAEIiYkgOEFiIghOkJgIghMkJoLgBImJIDhBYiIITpCYCIITJCaC4ARXMcl3gwkiWzHq42SZCIITJCaC4ASJiSA4YUlMWn4ijY8IQkTWAlkmguAEiYkgOEFiIghOGP5sfdiwYYpf4CYDjbGIgYjRL2rtErNMyXZ2veOTaRxBZAqjfquXTm4eQXBCU0xkSQjCPrYsk12RkSiJwY6dPszFzSPREEMNrT6fsjFTWgUmh+EsSGF4y1Ajhcwcoljty45WdOU5Zc6Pevj6N2B6pptBDEmGDRuWmuWRB6bYkqRsA8L9mW4EkSmsWKek3bxk3Ln0uIJipMDlbVFl6M2EUJ3KsJv5zUFldPVQoyI4WSyKusLFTAxeFm2rc5gvR4mXQ32Si5kKePZf7mMmK43LxI1cv2cGjsyRQmb66lWhOhPDbgYLtyvDbmrRvh7lXZWxMJyJkTOKUR6ojNfp7VVE3zDLB4Ct7gBm9fch3E/xm1KF1f5oViatN+xwhHEAAAQ3SURBVG1TKyIxCl/sKq/qlGBDZpYtg7ca6AlLJSyE3dSmHr7V5dK2GIYzFjlQI7K6a/EqrGsP4HDEQr5ElXcZjQPTRLL9k+uYSW+sJDcwteMo4wkIo4BjctjNzbphN3WQgqNpcr4XfnTCP7MYHlXWuvMAYJIvtWVqPgWbSTdOHiUC0hCfKSsnIyxjIPCQST6RcexaKYWbZ/SLWie/th0sN3PNw246YOx4VKEFR0IO84kBgZ0+bnvM5MT86ZUfMGKzEHbTNnm1WNEAbHWrZujksZxZPpEWnPRDvfKO3Twz9y3946cWuAtaFCnrfH3xSQdD9MNuvmIw1jJj+upj8L4/g2mX6Na5LOYT6cPpOInNj4XhlOERjlO9bxSec8yYMTY+cjoRp8vDy6wKkhiMXLhwwXa4Ta19ABieDldrwLhzugThVd1Q7W6eAU97PWaRkIYkTvps0rN5anfObJ9NHziUw3O0l6KgD0HsuHem+1evXhW0XDu9bSMXj9226u65XNRdicwRjUaTdu/k7YTZPF4WgxauJAYjyfTbpB4nYk+ity3vW0kjiHRjtW9a6euGYuLR2clCEYMBHv3UsWWyolSyRsRgwqlFik2NqzOsnNBKnpWZEBIWkWnMBKTeN+qzli1TMo8RmTWWIDKNkz6qLsNt3Tyr5tCqygkiHVjtn1b6rallSuYhQDtuH0FkCifjJC0crTXO3qzSO5aERAwm7I6TtDTAdUVXK6JS7w/dHw4SmUYQBNvDEEcTEHaVaZan1+grV67oNo4gUonc96yMlaz0c9Nf2upVYFax3jHq7cuXL5uekyBSweXLl22Nj4z6OJCG5ZHNGnv58mUSFJF22H7nxCppYflxIqOTmL0bHT9s2DBcunSJBEWkjcuXL+PSpUsK945HX0/4PVMqJgXYOuVtddqlS5fwxRdf4LrrrkNOTg7N+BFcEQQBV65ciVkkMwvk6F7r1atXE5SjFpPR75q00qz+zN1umpV3o22tfb00J2WIOE7H33bv+dh5TybN6F3e5rqgitrqWCmjdxyLVp1OrhxGdRN8sfqd2p2wUm+bCczOEMTKpINRGU0xqUWg1fGNyuvVZ1VIVkWjVS4V4iDBOYOHdbJiqZJ9N8uz2u6k1oCwY530RGK1rBOrRCLILOl29bTSnLp/Ru+6bbt27ZqgZ1WSHTtppTkZD9ktY9Reo8+nB42XnJEKV08vz4nVsSMsK2lcVycyGitpHWPV4jixTmSVMg8vMan3rVqqVLh1RiLPkRPtXn2TEYyTyQar4ydi4JAqMbH7qRSWbaFdu3ZNAPRdGauuk9l2Mq6cWZrRtp3Ppge5ec5IRkxa6U6sk1ZasqLTrUMWE5A5QdnNM9q2sq+XpgeJyRl2PIVkrJPeNi9BWd1OyZhJva0uq3bbrMz2WUVdnty/zJGsmLTS7XZwp4Kye04A+P/hnf3vObturwAAAABJRU5ErkJggg==" width="211" height="268" class="img_ev3q"></p><ul><li><code>type="docsVersionDropdown"</code>ï¼šæ–‡æ¡£ç‰ˆæœ¬ä¸‹æ‹‰èœå•</li><li><code>type="localeDropdown"</code>ï¼šæ–‡æ¡£å¤šå›½è¯­é€‰æ‹©ä¸‹æ‹‰èœå•</li><li><code>type="search"</code>ï¼šæœç´¢æ¡†ï¼Œéœ€è¦é…ç½®<a href="https://docusaurus.io/docs/search#using-algolia-docsearch" target="_blank" rel="noopener noreferrer">æœç´¢å¼•æ“</a>æ‰å¯ç”¨</li></ul><p>åŒæ—¶é¡¶éƒ¨é»˜è®¤æ˜¯æä¾›ç½‘ç«™å¤œé—´å’Œç™½å¤©ä¸»é¢˜çš„åˆ‡æ¢æŒ‰é’®ã€‚</p><p>æˆ‘è§‰å¾—å”¯ä¸€çš„ä¸è¶³å°±æ˜¯ä¸æ”¯æŒè‡ªå®šä¹‰èœå•é¡¹çš„<code>icon</code>ï¼Œä¾‹å¦‚éœ€è¦æ˜¾ç¤º GitHub é“¾æ¥ï¼Œéœ€è¦è‡ªå·±åœ¨<code>src/custom.css</code>é‡Œè¿›è¡Œæ ·å¼è¦†ç›–ï¼š</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">href</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"https://github.com/wood3n/icodex"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">position</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"right"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// custom logo in custom.css</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">className</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"header-github-link"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token string-property property">"aria-label"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"GitHub repository"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">/* GitHub Link */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token selector class" style="color:rgb(255, 121, 198)">.header-github-link</span><span class="token selector pseudo-class" style="color:rgb(255, 121, 198)">:hover</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">opacity</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0.6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token selector class" style="color:rgb(255, 121, 198)">.header-github-link</span><span class="token selector pseudo-element" style="color:rgb(255, 121, 198)">:before</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">content</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">""</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">width</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">24</span><span class="token unit">px</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">height</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">24</span><span class="token unit">px</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">display</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> flex</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">background</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token url function" style="color:rgb(80, 250, 123)">url</span><span class="token url punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token url string url" style="color:rgb(255, 121, 198)">"data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12'/%3E%3C/svg%3E"</span><span class="token url punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    no-repeat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token selector" style="color:rgb(255, 121, 198)">html</span><span class="token selector attribute punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token selector attribute attr-name" style="color:rgb(241, 250, 140)">data-theme</span><span class="token selector attribute operator" style="color:rgb(255, 121, 198)">=</span><span class="token selector attribute attr-value" style="color:rgb(255, 121, 198)">"dark"</span><span class="token selector attribute punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token selector" style="color:rgb(255, 121, 198)"> </span><span class="token selector class" style="color:rgb(255, 121, 198)">.header-github-link</span><span class="token selector pseudo-element" style="color:rgb(255, 121, 198)">:before</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">background</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token url function" style="color:rgb(80, 250, 123)">url</span><span class="token url punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token url string url" style="color:rgb(255, 121, 198)">"data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='white' d='M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12'/%3E%3C/svg%3E"</span><span class="token url punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    no-repeat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ–‡æ¡£ä¾§æ èœå•é…ç½®">æ–‡æ¡£ä¾§æ èœå•é…ç½®<a class="hash-link" href="#æ–‡æ¡£ä¾§æ èœå•é…ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>docusaurus</code>é»˜è®¤æ˜¯ä¼šæ¸²æŸ“åœ¨<code>blog</code>æ–‡ä»¶å¤¹ä¸‹çš„<code>.md</code>æˆ–è€…<code>.mdx</code>æ–‡ä»¶ï¼Œå¯¹äº<code>src/pages</code>ç›®å½•çš„ä»»ä½•æ–‡ä»¶éƒ½ä¼šæ¸²æŸ“æˆé¡µé¢ï¼Œè€Œå¯¹äº<code>docs</code>ç›®å½•çš„ markdown æ–‡ä»¶å¯ä»¥é€šè¿‡<a href="https://docusaurus.io/docs/api/plugins/@docusaurus/plugin-content-docs#sidebarPath" target="_blank" rel="noopener noreferrer"><code>sidebarPath</code></a>æ¥é…ç½®ç”Ÿæˆä¸åŒçš„ä¾§è¾¹èœå•æ ã€‚</p><p>å¦‚æœä½¿ç”¨è„šæ‰‹æ¶åˆ›å»ºæ–‡æ¡£ç«™ç‚¹ï¼Œducusaurus ä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ª<code>sidebars.js</code>æ–‡ä»¶ï¼ŒåŒ…å«ä¸‹é¢è¿™ä¸ªé»˜è®¤é…ç½®é¡¹ï¼š</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">mySidebar</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'autogenerated'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">dirName</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'.'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨<code>docs</code>ç›®å½•çš„ markdown æ–‡ä»¶ä¼šå…¨éƒ¨æ˜¾ç¤ºå‡ºæ¥ï¼Œä¸ä¼šè‡ªåŠ¨å½’ç±»ï¼Œè€Œæˆ‘çš„éœ€æ±‚æ˜¯èƒ½å¤Ÿæ ¹æ®æˆ‘åœ¨ <code>docs</code>ç›®å½•ä¸‹åˆ›å»ºçš„æ–‡ä»¶å¤¹è¿›è¡Œåˆ†ç±»ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆæ¯ç¯‡æ–‡æ¡£çš„è·¯ç”±åœ°å€ã€‚æ¥çœ‹ä¸€ä¸‹ docusaurus æä¾›çš„èƒ½åŠ› â€”â€” <a href="https://docusaurus.io/docs/sidebar#understanding-sidebar-items" target="_blank" rel="noopener noreferrer">Sidebar | Docusaurus</a>ï¼Œå¯¹äºä¾§è¾¹æ ç”Ÿæˆçš„ç±»å‹æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li><code>type="doc"</code>ï¼šé…åˆ<code>id</code>æŒ‡å®šå•ä¸ªæ–‡æ¡£çš„æ ‡é¢˜å’Œé“¾æ¥</li><li><code>type="link"</code>ï¼šé…åˆ<code>href</code>æŒ‡å®šä»»æ„è·³è½¬é“¾æ¥</li><li><code>type="category"</code>ï¼šé…åˆ<code>items</code>æŒ‡å®šåˆ†ç±»åŒ…å«çš„æ–‡æ¡£</li><li><code>type="autogenerated"</code>ï¼šé…åˆ<code>dirName</code>è‡ªåŠ¨ç”Ÿæˆä¾§è¾¹æ </li></ul><p>çœ‹èµ·æ¥<code>type="category"</code>å¯ä»¥æ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼Œä½†æ˜¯æ¯ç¯‡æ–‡ç« å†™å®Œæˆ‘éƒ½è¦é…ç½®ä¸€ä¸‹ä¾§è¾¹æ è¿™ä¹Ÿå¤ªéº»çƒ¦äº†ï¼Œäºæ˜¯æˆ‘å°è¯•äº†ä¸‹<code>type="autogenerated"</code>è¿™ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„ï¼Œ<code>dirname</code>é…ç½®æˆåœ¨<code>docs</code>ä¸‹åˆ›å»ºçš„ç›®å½•åç§°å°±å¯ä»¥è‡ªåŠ¨å¯¹è¯¥ç›®å½•ä¸‹æ–‡æ¡£è¿›è¡Œåˆ†ç±»ï¼Œå†é…åˆé¡¶éƒ¨å¯¼èˆªæ çš„<code>docId</code>æŒ‡å‘æ¯ä¸ªæ–‡æ¡£åˆ†ç±»ä¸‹çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œç‚¹å‡»ä»¥åå°±ä¼šè‡ªåŠ¨æ‰“å¼€ä¸åŒç›®å½•ä¸‹å½’ç±»çš„æ–‡æ¡£åˆ—è¡¨ã€‚</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// sidebars.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> sidebars </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">javascript</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"autogenerated"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">dirName</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"javascript"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">typescript</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"autogenerated"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">dirName</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"typescript"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">css</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"autogenerated"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">dirName</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"css"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// docusaurus.config.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">themeConfig</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">navbar</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">items</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"dropdown"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">label</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"Skill"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">position</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"right"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token literal-property property">items</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"doc"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token literal-property property">label</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"JavaScript"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token literal-property property">docId</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"javascript/ç±»å‹/ç±»å‹å®šä¹‰"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token spread operator">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å›¾ç‰‡ç›®å½•">å›¾ç‰‡ç›®å½•<a class="hash-link" href="#å›¾ç‰‡ç›®å½•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å¯¹äºå›¾ç‰‡çš„å¤„ç†ï¼Œæˆ‘è¿™è¾¹æ²¡æœ‰é€‰æ‹©å›¾åºŠï¼Œç›´æ¥å¤åˆ¶åˆ°æŒ‡å®šç›®å½•ä¸‹ï¼Œdocusaurus æä¾›<a href="https://docusaurus.io/docs/static-assets" target="_blank" rel="noopener noreferrer"><code>staticDirectories</code></a>é…ç½®é¡¹ç”¨äºæŒ‡å®šé™æ€èµ„æºç›®å½•ï¼Œé»˜è®¤æ˜¯<code>static</code>æ–‡ä»¶å¤¹ï¼Œå¯¹äº<code>static</code>æ–‡ä»¶å¤¹çš„æ–‡ä»¶ï¼Œå…¨éƒ¨éƒ½ä¼šåœ¨æ„å»ºä»¥åå¤åˆ¶åˆ°ç½‘ç«™æ ¹ç›®å½•ä¸‹ã€‚</p><p>è€Œå¯¹äº<code>staticDirectories</code>æ²¡æœ‰åŒ…å«çš„æ–‡ä»¶ç›®å½•ï¼ŒåŒ…æ‹¬ markdown ä¸­å¼•ç”¨çš„å›¾ç‰‡æ–‡ä»¶ç­‰ï¼Œéƒ½ä¼šåœ¨æ„å»ºåå¤åˆ¶åˆ°ç½‘ç«™æ ¹ç›®å½•çš„<code>assets</code>ç›®å½•ä¸‹(å›¾ç‰‡çš„è¯å°±æ˜¯<code>assets/images</code>)ï¼Œå¹¶ä¸”ä¼šå¯¹è·¯å¾„è‡ªåŠ¨è¿›è¡Œè½¬æ¢ã€‚åˆ©ç”¨è¿™ä¸ªèƒ½åŠ›ï¼Œæˆ‘åœ¨ç½‘ç«™ä»£ç æ ¹ç›®å½•ä¸‹åˆ›å»ºäº†<code>public/images</code>ç›®å½•ç”¨äºä¿å­˜æ‰€æœ‰åœ¨ markdown é¡µé¢åŒ…å«çš„å›¾ç‰‡ï¼Œé…åˆ Typora å¤åˆ¶å›¾ç‰‡å¹¶è½¬æ¢å›¾ç‰‡ç›¸å¯¹è·¯å¾„çš„èƒ½åŠ›ï¼Œå°±å¯ä»¥åšåˆ°åœ¨ä»»ä½•åœ°æ–¹æ‰“å¼€ markdown éƒ½èƒ½æ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡ã€‚</p><p><img loading="lazy" alt="image-20220104234147642" src="/assets/images/image-20220104234147642-b31d2a03bc13cec3ef839326a9a0e17b.png" width="763" height="272" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç½‘ç«™éƒ¨ç½²">ç½‘ç«™éƒ¨ç½²<a class="hash-link" href="#ç½‘ç«™éƒ¨ç½²" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç½‘ç«™éƒ¨ç½²ä¸ç”¨å¤šè¯´äº†ï¼Œä¾æ—§ç™½å«– GitHub Pagesï¼Œdocusaurus ä¹Ÿæä¾›äº†é›†æˆ GitHub Actions è‡ªåŠ¨éƒ¨ç½²çš„é…ç½®å‚è€ƒ â€”â€” <a href="https://docusaurus.io/docs/deployment#triggering-deployment-with-github-actions" target="_blank" rel="noopener noreferrer">Deployment | Docusaurus</a>ï¼š</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Deploy to GitHub Pages</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">on</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">branches</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">website/</span><span class="token important">**</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">deploy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Deploy to GitHub Pages</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">node@v2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">with</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">node-version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 14.x</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">cache</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> yarn</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Build website</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token scalar string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">          yarn install --frozen-lockfile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token scalar string" style="color:rgb(255, 121, 198)">          yarn build</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># Popular action to deploy to GitHub Pages:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># Docs: https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-docusaurus</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Deploy to GitHub Pages</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> peaceiris/actions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">gh</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">pages@v3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">with</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">github_token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> secrets.GITHUB_TOKEN </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token comment" style="color:rgb(98, 114, 164)"># Build output to publish to the `gh-pages` branch:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">publish_dir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ./build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™æ ·åœ¨ä½¿ç”¨ Typora å†™å®Œæ–‡æ¡£æˆ–è€…åšå®¢ä»¥åï¼Œç›´æ¥<code>push</code>åˆ° GitHub ä»“åº“ï¼Œè§¦å‘ GitHub Actions å®Œæˆè‡ªåŠ¨æ„å»ºæ‰“åŒ…å’Œéƒ¨ç½²ï¼Œä¸€æ°”å‘µæˆï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘å†™åšå®¢æ—¶å€™æ‰‹å¿™è„šä¹±çš„éƒ¨ç½²äº†ã€‚</p><p><img loading="lazy" alt="image-20220104235311387" src="/assets/images/image-20220104235311387-593105280aa6fcb8c8ef3c0114dfb600.png" width="1108" height="528" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç½‘ç«™å…¨å±€æœç´¢">ç½‘ç«™å…¨å±€æœç´¢<a class="hash-link" href="#ç½‘ç«™å…¨å±€æœç´¢" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>docusaurus ä¼˜å…ˆæä¾›æ”¯æŒ Algolia çš„èƒ½åŠ›ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œåˆ†ä¸ºä¸‰æ­¥ï¼š</p><ol><li>é¦–å…ˆåœ¨<a href="https://github.com/algolia/docsearch-configs" target="_blank" rel="noopener noreferrer"><code>algolia</code>ä»“åº“</a>æäº¤ä¸€ä¸ªé…ç½®ç½‘ç«™ç´¢å¼•çš„ prï¼›</li><li>ç­‰ PR åˆå¹¶ä»¥ååœ¨<a href="https://docsearch.algolia.com/apply/" target="_blank" rel="noopener noreferrer">DocSearch</a>ç½‘ç«™æäº¤ç½‘ç«™çš„åŸŸåå’Œè”ç³»é‚®ç®±è·å–<code>appId</code>å’Œ<code>apiKey</code>ï¼›</li><li>åœ¨<code>docusaurus.config.js</code>å®Œæˆ<a href="https://docusaurus.io/docs/search#connecting-algolia" target="_blank" rel="noopener noreferrer">é…ç½®</a>å³å¯</li></ol>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[webpackä»£ç†é…ç½®]]></title>
            <link>https://icodex.me/2022/01/03/webpackä»£ç†é…ç½®</link>
            <guid>/2022/01/03/webpackä»£ç†é…ç½®</guid>
            <pubDate>Mon, 03 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[devServer]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="devserver">devServer<a class="hash-link" href="#devserver" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://webpack.docschina.org/configuration/dev-server/#devserver" target="_blank" rel="noopener noreferrer"><code>webpack-devServer</code></a>ï¼Œä¸€èˆ¬ç®€ç§°<code>WDS</code>ï¼Œæ˜¯ webpack å†…ç½®çš„ç”¨äºå¼€å‘ç¯å¢ƒçš„æœåŠ¡å™¨é…ç½®ã€‚<code>webpack</code>æœ¬èº«æä¾›ä¸‰ç§æ–¹å¼ç”¨äºå¼€å‘ç¯å¢ƒä¿®æ”¹ä»£ç ä»¥åè‡ªåŠ¨ç¼–è¯‘ï¼Œä»¥æé«˜å¼€å‘æ•ˆç‡ï¼š</p><ul><li><p><a href="https://webpack.docschina.org/guides/development/#using-watch-mode" target="_blank" rel="noopener noreferrer">è§‚å¯Ÿæ¨¡å¼</a></p></li><li><p><a href="https://webpack.docschina.org/configuration/dev-server/#devserver" target="_blank" rel="noopener noreferrer">WDS</a></p></li><li><p><a href="https://webpack.docschina.org/guides/development/#using-webpack-dev-middleware" target="_blank" rel="noopener noreferrer">webpack-dev-middleware</a></p></li></ul><p>æ€»ä½“æ¥è¯´ï¼ŒWDS é…ç½®æœ€å®¹æ˜“ï¼Œå¹¶ä¸”æä¾› HMR çš„åŠŸèƒ½ï¼Œåªéœ€è¦é…ç½®<code>devServer.hot: true</code>å°±ç›´æ¥å¯ç”¨ï¼Œæ–¹ä¾¿åˆ°äº†æè‡´ï¼ä¸‹é¢å°±é‡ç‚¹çœ‹ä¸€ä¸‹ WDS çš„<code>proxy</code>é…ç½®ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http-proxy-middleware">http-proxy-middleware<a class="hash-link" href="#http-proxy-middleware" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>webpack</code>çš„ WDS å†…ç½®çš„<code>proxy</code>åŠŸèƒ½æ¥è‡ªäº<a href="https://github.com/chimurai/http-proxy-middleware" target="_blank" rel="noopener noreferrer"><code>http-proxy-middleware</code></a>è¿™ä¸ªç¬¬ä¸‰æ–¹å·¥å…·ï¼Œæ­£å¦‚æˆ‘ä»¥å‰çœ‹åˆ°çš„ä¸€å¥è¯æ‰€è¯´ï¼Œ<strong>å¼€æºæœ€é‡è¦çš„ä¸æ˜¯è´¡çŒ®è‡ªå·±çš„ä»£ç ï¼Œè€Œæ˜¯æŠŠåˆ«äººçš„æ‹¿è¿‡æ¥ç”¨</strong>ï¼Œä»å¼€æºç¤¾åŒºçš„å‘å±•è§’åº¦æ¥çœ‹ï¼Œè¿™çš„ç¡®æ˜¯æ ¸å¿ƒï¼Œåªæœ‰å¼€æºå¸¦åŠ¨å¼€æºï¼Œæ‰èƒ½è®©ç¤¾åŒºæ°›å›´æ›´å¥½ã€‚</p><p>åºŸè¯ä¸å¤šè¯´äº†ï¼Œæ¥çœ‹ä¸€ä¸‹<code>http-proxy-middleware</code>éƒ½æœ‰å“ªäº›é…ç½®å§ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é…ç½®">é…ç½®<a class="hash-link" href="#é…ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="url">URL<a class="hash-link" href="#url" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨äº†è§£è¯¦ç»†é…ç½®ä¹‹å‰ï¼Œå…ˆæ¥å›é¡¾ä¸€ä¸‹ HTTP åè®®ä¸‹ URL çš„æ„æˆï¼š</p><p><img loading="lazy" alt="image-20201220170902676" src="/assets/images/image-20201220170902676-f6c233de87de8e8dd1d8cd84f4bd3c8c.png" width="1297" height="366" class="img_ev3q"></p><p><code>http-proxy-middleware</code>æœ¬èº«èåˆäº†<code>http-proxy</code>çš„ä¸€äº›é…ç½®ï¼Œä½†æ˜¯æ–‡æ¡£é…ç½®å†™çš„æ¯”è¾ƒæŠ½è±¡ï¼Œå¹¶ä¸”å¤šæ•°é…ç½®å®é™…å¼€å‘çš„æ—¶å€™æ ¹æœ¬ç”¨ä¸åˆ°ï¼Œè¿™é‡Œé‡ç‚¹å…³æ³¨å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„å±æ€§ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="target--string">target | string<a class="hash-link" href="#target--string" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>target</code>ç”¨äºæŒ‡å®šä»£ç†è½¬å‘çš„ç›®æ ‡åŸŸåï¼Œåœ¨ WDS ä¸­å¯ä»¥æŒ‰ç…§å¦‚ä¸‹è®¾ç½®ï¼Œè¿™æ ·å½“æœ¬åœ°è¯·æ±‚<code>localhost:3000/api</code>çš„æ—¶å€™ï¼Œå°±ä¼šè¢« WDS è½¬å‘è¯·æ±‚<code>https://xxx.com/api</code>å»</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string-property property">"/api"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">target</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"https://xxx.com"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="router--objectfunction">router | object/function<a class="hash-link" href="#router--objectfunction" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>router</code>å’Œ<code>target</code>æœ‰ç‚¹ç±»ä¼¼ï¼Œä¹Ÿæ˜¯é‡å®šå‘è½¬å‘åŸŸåçš„ï¼ŒåŒºåˆ«æ˜¯<code>target</code>åªèƒ½è®¾ç½®ä¸€ä¸ª<code>string</code>ç±»å‹çš„åŸŸåï¼Œ<code>router</code>å¯ä»¥æŒ‡å®šå¤šä¸ªåŸŸåè½¬å‘çš„æ˜ å°„å¯¹è±¡æˆ–è€…å‡½æ•°ï¼Œå¹¶ä¸”ä¼šè¦†ç›–<code>target</code></p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token literal-property property">router</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string-property property">'integration.localhost:3000'</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'http://localhost:8001'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// host only</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string-property property">'staging.localhost:3000'</span><span class="token plain">     </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'http://localhost:8002'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// host only</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string-property property">'localhost:3000/api'</span><span class="token plain">         </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'http://localhost:8003'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// host + path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string-property property">'/rest'</span><span class="token plain">                      </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'http://localhost:8004'</span><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)">// path only</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function-variable function" style="color:rgb(80, 250, 123)">router</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'http://localhost:8004'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pathrewrite--objectfunction">pathRewrite | object/function<a class="hash-link" href="#pathrewrite--objectfunction" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>é‡å†™æœ¬åœ°è¯·æ±‚çš„ URL ä¸­çš„<code>path</code>éƒ¨åˆ†ï¼Œè®¾ç½®çš„<code>key</code>å­—ç¬¦ä¸²ä¼šè¢«æ„é€ æˆä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…è¯·æ±‚çš„ URLï¼Œéœ€è¦æ³¨æ„çš„æ˜¯åªä¼šé‡å†™<code>path</code>éƒ¨åˆ†ï¼Œå‰é¢çš„<code>host</code>ä»¥åŠåé¢çš„<code>queryString</code>éƒ½ä¼šä¿ç•™ä¸‹æ¥å’Œé‡å†™åçš„åŸŸåè¿›è¡Œæ‹¼æ¥ã€‚</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string-property property">"/api"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token literal-property property">pathRewrite</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string-property property">"^/api"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"/newApi"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// rewrite path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function-variable function" style="color:rgb(80, 250, 123)">pathRewrite</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">path</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> req</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> should_add_something </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">httpRequestToDecideSomething</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">should_add_something</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> path </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"something"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="changeorigin--boolean">changeOrigin | boolean<a class="hash-link" href="#changeorigin--boolean" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å› ä¸º<code>http-proxy-middleware</code>ä¾èµ–äº<a href="https://github.com/http-party/node-http-proxy" target="_blank" rel="noopener noreferrer">node-http-proxy</a>å®ç°çš„ï¼Œ<code>changeOrigin</code>è¿™ä¸ªå‚æ•°æ˜¯ä»<code>http-proxy</code>ä¸­ç›´æ¥æ‹¿è¿‡æ¥çš„ï¼Œæ‰¾åˆ°<code>node-http-proxy</code>çš„æºç éƒ¨åˆ†ï¼Œå¯ä»¥å‘ç°å¦‚ä¸‹æœ‰å…³<code>changeOrigin</code>çš„å®ç° â€”â€” <a href="https://github.com/http-party/node-http-proxy/blob/9b96cd725127a024dabebec6c7ea8c807272223d/lib/http-proxy/common.js#L99" target="_blank" rel="noopener noreferrer">changeOrigin</a>ï¼Œç”¨åˆ°çš„åœ°æ–¹åœ¨è¿™é‡Œ â€”â€” <a href="https://github.com/http-party/node-http-proxy/blob/9b96cd725127a024dabebec6c7ea8c807272223d/lib/http-proxy/passes/web-incoming.js#L126" target="_blank" rel="noopener noreferrer">Request initalization</a></p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// requires-portæ˜¯åˆ¤æ–­æŒ‡å®šç«¯å£åœ¨å½“å‰åè®®ä¸‹æ˜¯å¦è¦æ±‚æ·»åŠ åœ¨ host åé¢ï¼Œå¦‚æœæ˜¯åè®®é»˜è®¤çš„ç«¯å£å°±ä¸ç”¨æ·»åŠ ï¼Œä¾‹å¦‚HTTPé»˜è®¤80ï¼Œä¼šè¿”å›false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> required </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'requires-port'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">changeOrigin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  outgoing</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">host</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">required</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">outgoing</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">forward </span><span class="token operator">||</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'target'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">!</span><span class="token function" style="color:rgb(80, 250, 123)">hasPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">outgoing</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">host</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token operator">?</span><span class="token plain"> outgoing</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">host</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">':'</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> outgoing</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">port</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token operator">:</span><span class="token plain"> outgoing</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">host</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è®¾ç½®<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Host" target="_blank" rel="noopener noreferrer"><code>request.header.host</code></a>åˆ°åº•æœ‰å•¥ç”¨å‘¢ï¼Ÿé¦–å…ˆåœ¨ HTTP 1.1 çš„æ—¶å€™è¦æ±‚å¿…é¡»è®¾ç½®è¿™ä¸ªè¯·æ±‚å¤´å‚æ•°ï¼Œå› ä¸ºéƒ¨åˆ†ç½‘ç«™çš„éƒ¨ç½²æ˜¯<a href="https://en.wikipedia.org/wiki/Virtual_hosting#Name-based" target="_blank" rel="noopener noreferrer">åŸºäºåŸŸå</a>çš„éƒ¨ç½²æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªåå°æœåŠ¡å™¨çš„ IP åœ°å€ç»‘å®šå¤šä¸ªåŸŸåï¼Œè¿™å¾ˆå®¹å™¨åšåˆ°ï¼Œåªéœ€è¦åœ¨åŸŸåç®¡ç†æœºæ„çš„ DNS è§£æå¤„æ·»åŠ åŸŸåè§£æè§„åˆ™å³å¯ã€‚</p><p>åŸºäºåŸŸåçš„éƒ¨ç½²æ–¹æ¡ˆå–å†³äºæ”¯æŒ HTTP 1.1 çš„æµè§ˆå™¨èƒ½å¤Ÿåœ¨è¯·æ±‚åŸŸåç»‘å®šçš„ IP åœ°å€çš„æ—¶å€™å‘é€<code>host</code>è¿™ä¸ªè¯·æ±‚å¤´å‚æ•°ï¼Œä»¥æ ‡è¯†å½“å‰è¯·æ±‚çš„æ˜¯ä»€ä¹ˆåŸŸåï¼Œä¸ç„¶å³ä½¿æ˜¯ä¸åŒåŸŸåï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°çš„éƒ½æ˜¯ç›¸åŒçš„ IP åœ°å€ï¼Œä»ç„¶æ— æ³•åŒºåˆ†ã€‚</p><p>ä½†æ˜¯åŸºäºåŸŸåéƒ¨ç½²çš„æ–¹æ¡ˆæœ€å¤§é—®é¢˜æ˜¯éš¾ä»¥æ‰˜ç®¡å¤šä¸ª HTTPS çš„ç½‘ç«™ï¼Œå› ä¸ºåœ¨å»ºç«‹æ­£å¼çš„ TCP è¿æ¥å‰ï¼Œéœ€è¦é€šè¿‡ TCP è¿›è¡Œä¸€æ®µ SSL/TLS çš„æ¡æ‰‹è¿‡ç¨‹ï¼Œæ¥éªŒè¯åŒæ–¹èº«ä»½ï¼Œè¿™è¾¹è¿˜æ²¡å‘é€<code>host</code>å‘¢ï¼ŒSSL/TLS å·²ç»å¼€å§‹äº†ã€‚TLS æä¾›äº†ä¸€ç§æ‹“å±•æ–¹æ³• <a href="https://en.wikipedia.org/wiki/Server_Name_Indication" target="_blank" rel="noopener noreferrer">SNI</a> æ¥ä¿è¯æ¡æ‰‹å¼€å§‹å‰å°†è¯·æ±‚åŸŸåå‘é€åˆ°æœåŠ¡å™¨ï¼Œè¿™æ ·å°±å¯ä»¥è®©æœåŠ¡å™¨æ˜ç¡®çŸ¥é“å¯¹æ–¹æ˜¯è°ï¼Œå‘é€ä»€ä¹ˆæ ·çš„è¯ä¹¦ç»™å®ƒã€‚</p><p>æ‰€ä»¥åœ¨è¯·æ±‚<code>https</code>åè®®çš„ç½‘ç«™æ—¶ï¼Œä¸€å®šè¦é…ç½®<code>changeOrigin</code>è¿™ä¸ªè¯·æ±‚å¤´ï¼Œä¸ç„¶å°±ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><p><img loading="lazy" alt="image-20201220183752961" src="/assets/images/image-20201220183752961-ac88f19c0ed885ee8f28336829e6e548.png" width="1528" height="130" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å®è·µ">å®è·µ<a class="hash-link" href="#å®è·µ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ¯”å¦‚ç°åœ¨æœ¬åœ°æˆ‘è¦æŠŠçŸ¥ä¹ä¸“æ ã€Šé˜¿é‡Œå¦ˆå¦ˆå‰ç«¯å¿«çˆ†ã€‹çš„å†…å®¹æŠ“å–ä¸‹æ¥ï¼Œé¦–å…ˆçœ‹ä¸€ä¸‹è¯·æ±‚æ˜¯å•¥ï¼Œå¤§è‡´æ˜¯è¿™ä¸ªåœ°å€ï¼š</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token maybe-class-name">Request</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">URL</span><span class="token operator">:</span><span class="token plain"> https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token plain">www</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">zhihu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">com</span><span class="token operator">/</span><span class="token plain">api</span><span class="token operator">/</span><span class="token plain">v4</span><span class="token operator">/</span><span class="token plain">columns</span><span class="token operator">/</span><span class="token plain">mm</span><span class="token operator">-</span><span class="token plain">fe</span><span class="token operator">/</span><span class="token plain">items</span><span class="token operator">?</span><span class="token plain">limit</span><span class="token operator">=</span><span class="token number">10</span><span class="token operator">&amp;</span><span class="token plain">offset</span><span class="token operator">=</span><span class="token number">10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image-20201220190635496" src="/assets/images/image-20201220190635496-ce518376dd77ce63b470736c0e7c21df.png" width="1762" height="628" class="img_ev3q"></p><p>é‚£ä¹ˆæˆ‘æœ¬åœ°<code>webpack</code>çš„ WDS å¯ä»¥è¿™æ ·é…ç½®ï¼š</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string-property property">"/api"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token literal-property property">target</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"https://www.zhihu.com"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token literal-property property">changeOrigin</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token literal-property property">pathRewrite</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token string-property property">"^/api"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"/api/v4/columns/mm-fe/items"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// rewrite path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¯·æ±‚çš„åœ°å€æ˜¯<code>/api?limit=10&amp;offset=20</code>ï¼š</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">fetch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'/api?limit=10&amp;offset=20'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">json</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">myJson</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">myJson</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™æ ·å°±å¯ä»¥æˆåŠŸè½¬å‘è¯·æ±‚è·å–æ•°æ®äº†ï¼Œå¯ä»¥çœ‹åˆ°è¿™æ ·ä¸€ç§é‡å†™ URL çš„æ–¹å¼é¦–å…ˆæ ¹æ®<code>/api</code>åŒ¹é…è¯·æ±‚ URLï¼Œå¦‚æœåŒ…å«åˆ™ä½¿ç”¨<code>target</code>å®šä¹‰çš„è·¯å¾„é‡å†™<code>host</code>ï¼Œæœ€åæ ¹æ®<code>pathRewrite</code>é‡å†™ URL ä¸­çš„<code>path</code>éƒ¨åˆ†ï¼Œå¾—åˆ°æœ€åçš„ URL ä¸ºï¼š</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token constant" style="color:rgb(189, 147, 249)">URL</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> target </span><span class="token operator">+</span><span class="token plain"> pathRewrite </span><span class="token operator">+</span><span class="token plain"> queryString </span><span class="token operator">+</span><span class="token plain"> hash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image-20201220191120749" src="/assets/images/image-20201220191120749-266030d23e5f99d7221b31cf2f2b24f4.png" width="1117" height="442" class="img_ev3q"></p><p><img loading="lazy" alt="image-20201220191129915" src="/assets/images/image-20201220191129915-bd95fefd135eb578ecc8cf13a4cfa359.png" width="1127" height="469" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é€šç”¨é…ç½®">é€šç”¨é…ç½®<a class="hash-link" href="#é€šç”¨é…ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œé’ˆå¯¹<code>pathRewrite</code>è¿™æ ·é…ç½®ï¼š</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string-property property">'/api'</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token literal-property property">target</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'http://localhost:3000'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token literal-property property">changeOrigin</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token literal-property property">pathRewrite</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token string-property property">'^/api'</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'/'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¿™æ ·åœ¨é¡¹ç›®ä¸­è¯·æ±‚çš„ URL éƒ½æ˜¯è¿™ç§å½¢å¼ï¼Œä»¥è¾¾åˆ°é€šç”¨æ€§ï¼š</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">fetch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'/api/xxx?name=xxx'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">res</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> res</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">json</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">res</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">res</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Promise A+è§„èŒƒçš„å®ç°]]></title>
            <link>https://icodex.me/2022/01/02/Promise A+è§„èŒƒçš„å®ç°</link>
            <guid>/2022/01/02/Promise A+è§„èŒƒçš„å®ç°</guid>
            <pubDate>Sun, 02 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Promise/A+]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="promisea">Promise/A+<a class="hash-link" href="#promisea" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p><a href="https://promisesaplus.com/#terminology" target="_blank" rel="noopener noreferrer">https://promisesaplus.com/#terminology</a></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="promise-å¯¹è±¡">Promise å¯¹è±¡<a class="hash-link" href="#promise-å¯¹è±¡" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°ï¼Œå¹¶ä¸”å¸¦æœ‰<code>then</code>æ–¹æ³•</li><li>ä¸€ä¸ªå½“å‰çŠ¶æ€<code>state</code>ï¼Œå¯ä»¥æ˜¯<code>pending</code>ã€<code>fulfilled</code>å’Œ<code>rejected</code>ï¼Œä¸”<code>fulfilled</code>å’Œ<code>rejected</code>ä¸å¯è¢«æ”¹å˜</li><li>ä¸€ä¸ª<code>resolve</code>å€¼<code>value</code>ï¼Œå¯ä»¥æ˜¯ä»»ä½• JS å€¼çš„å½¢å¼</li><li>ä¸€ä¸ªæ‰§è¡Œ<code>reject</code>çš„åŸå› <code>reason</code></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="then-æ–¹æ³•">then æ–¹æ³•<a class="hash-link" href="#then-æ–¹æ³•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p><code>newPromise = promise.then(onFulfilled, onRejected)</code></p></blockquote><p><code>then</code>æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸”å¿…é¡»éƒ½æ˜¯å‡½æ•°ï¼Œå¦åˆ™å¿½ç•¥è¯¥å‚æ•°</p><ul><li><code>onFulfilled</code>ï¼šå½“å‰ Promise å¯¹è±¡çš„çŠ¶æ€å˜æˆ<code>fulfilled</code>ä»¥åæ‰§è¡Œï¼Œå¹¶ä¸”å°†<code>value</code>ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶ä¸”åªå…è®¸æ‰§è¡Œä¸€æ¬¡</li><li><code>onRejected</code>ï¼šå½“å‰ Promise å¯¹è±¡çš„çŠ¶æ€å˜æˆ<code>rejected</code>ä»¥åæ‰§è¡Œï¼Œå¹¶ä¸”å°†<code>reason</code>ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶ä¸”åªå…è®¸æ‰§è¡Œä¸€æ¬¡</li><li><code>onFulfilled</code>å’Œ<code>onRejected</code>å¿…é¡»åœ¨å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œä»¥åæ‰èƒ½æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯å¼‚æ­¥çš„éœ€æ±‚</li><li><code>then</code>æ‰§è¡Œå®Œ<strong>è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡</strong><code>newPromise</code>ï¼š<ul><li>å¦‚æœ<code>onFulfilled</code>æˆ–è€…<code>onRejected</code>è¿”å›æ–°çš„å€¼<code>x</code>ï¼Œåˆ™æ‰§è¡Œä¸‹æ–‡çš„æ–¹æ³•<code>Resolve(newPromise, x)</code></li><li>å¦‚æœ<code>onFulfilled</code>æˆ–è€…<code>onRejected</code>æ‰§è¡ŒæŠ›å‡ºå¼‚å¸¸<code>e</code>ï¼Œ<code>promise2</code>ä¹Ÿå¿…é¡»<code>reject(e)</code></li><li>å¦‚æœ<code>onFulfilled</code>ä¸æ˜¯å‡½æ•°ï¼ˆæœªæä¾›ï¼‰ï¼Œåˆ™å½“<code>promise</code>çŠ¶æ€å˜æˆ<code>fulfilled</code>çš„æ—¶å€™ï¼Œ<code>newPromise</code>å†…éƒ¨çŠ¶æ€ä¹Ÿè¦å˜æˆ<code>fulfilled</code>å¹¶ä»¥<code>promise</code>å†…éƒ¨çš„<code>value</code>æ‰§è¡Œ<code>resolve</code>ï¼›åŒç†<code>onRejected</code>ä¹Ÿæ˜¯</li></ul></li><li>åŒä¸€ä¸ª Promise å¯¹è±¡çš„<code>then</code>æ–¹æ³•å¯èƒ½è°ƒç”¨å¤šæ¬¡<ul><li>å¹¶ä¸”å„è‡ª<code>onFulfilled</code>æˆ–è€…<code>onRejected</code>å›è°ƒå¿…é¡»æŒ‰ç…§è°ƒç”¨<code>then</code>çš„é¡ºåºä¾æ¬¡æ‰§è¡Œ</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resolvepromise-x">Resolve(promise, x)<a class="hash-link" href="#resolvepromise-x" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>Resolve(promise, x)</code>è¿™é‡Œæ˜¯æè¿°<code>then</code>æ‰§è¡Œä»¥åçš„ç®—æ³•åˆ¤æ–­ï¼Œä¹Ÿå°±æ˜¯<code>then</code>çš„åå¤æ‰§è¡Œè¿‡ç¨‹ï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å†…éƒ¨æ–¹æ³•ï¼Œæ˜¯å¤„ç†<code>then</code>é“¾å¼æ‰§è¡Œçš„ç®—æ³•ï¼›</p><ul><li>å¦‚æœ<code>promise === x</code>ï¼Œç›´æ¥<code>reject promise</code>å¹¶è¿”å›<code>TypeError</code>çš„é”™è¯¯ï¼›</li><li>å¦‚æœ<code>x</code>æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œåˆ™å½“å‰ Promise å¯¹è±¡<code>promise</code>çš„çŠ¶æ€å¿…é¡»å’Œ<code>x</code>åŒæ­¥ï¼›</li><li>å¦‚æœ<code>x</code>æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°ï¼š<ul><li>åˆ¤æ–­å…¶æ˜¯å¦å…·æœ‰<code>then</code>æ–¹æ³•ï¼›</li><li>å¦‚æœæ²¡æœ‰ï¼Œåˆ™<code>reject</code>ï¼›</li><li>å¦‚æœå…·æœ‰<code>then</code>ï¼Œåˆ™ä½¿ç”¨<code>x</code>ä½œä¸º<code>then</code>å†…éƒ¨çš„<code>this</code>æ‰§è¡Œ<code>then</code>ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’<code>resolvePromise</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ é€’<code>rejectPromise</code><ul><li>å½“<code>resolvePromise</code>è¢«ä¼ é€’å‚æ•°<code>y</code>è°ƒç”¨çš„æ—¶å€™ï¼Œæ‰§è¡Œ<code>Resolve(promise, y)</code></li><li>å½“<code>rejectPromise</code>è¢«ä¼ é€’å‚æ•°<code>r</code>è°ƒç”¨çš„æ—¶å€™ï¼Œåˆ™<code>promise</code>ä¹Ÿ<code>reject</code></li><li>å¦‚æœ<code>resolvePromise</code>å’Œ<code>rejectPromise</code>éƒ½è¢«è°ƒç”¨äº†ï¼Œæˆ–è€…è¢«å¤šæ¬¡è°ƒç”¨ï¼Œé¦–æ¬¡è°ƒç”¨ä¼˜å…ˆæ‰§è¡Œï¼Œåç»­è¢«å¿½ç•¥ï¼›</li><li>å¦‚æœæ‰§è¡Œ<code>then</code>æŠ›å‡ºå¼‚å¸¸ï¼Œå½“<code>resolvePromise</code>æˆ–è€…<code>rejectPromise</code>è¢«è°ƒç”¨äº†ï¼Œåˆ™å¿½ç•¥ï¼›å¦åˆ™<code>reject</code>é¡¶å±‚çš„<code>promise</code></li></ul></li></ul></li><li>å¦‚æœ<code>x</code>ä¸æ»¡è¶³ä¸Šè¿°æ¡ä»¶ï¼Œ<code>promise</code>ç›´æ¥<code>fulfilled</code></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å®ç°">å®ç°<a class="hash-link" href="#å®ç°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¦‚æœæŒ‰ç…§ promise-aplus çš„ç®—æ³•æ…¢æ…¢æ‘¸ç´¢å°±å¯ä»¥ç›´æ¥å®ç°ä¸€ä¸ªå®Œæ•´çš„ Promise</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åˆå§‹åŒ–">åˆå§‹åŒ–<a class="hash-link" href="#åˆå§‹åŒ–" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>Promise å¯¹è±¡åœ¨åˆå§‹åŒ–ä»¥åï¼Œå…·æœ‰ä»¥ä¸Šæåˆ°çš„<code>value</code>ï¼Œ<code>state</code>ä»¥åŠ<code>reason</code>ç­‰çŠ¶æ€å€¼</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">APromise</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">constructor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typeof</span><span class="token plain"> fn </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'function'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">TypeError</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">'init parameter must be a function'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'pending'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">reason</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token function" style="color:rgb(80, 250, 123)">fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'pending'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'fulfilled'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">reason</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'pending'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'rejected'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">reason</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> reason</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="then">then<a class="hash-link" href="#then" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ä¸Šè¿°ä»£ç çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ <code>then</code>æ–¹æ³•ï¼Œå› ä¸º<code>then</code>æ–¹æ³•å¯èƒ½è¢«è°ƒç”¨å¤šæ¬¡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é¢å¤–å®šä¹‰ä¸¤ä¸ªé˜Ÿåˆ—ä¿å­˜åœ¨ Promise çŠ¶æ€å‘ç”Ÿå˜åŒ–ä»¥åçš„å›è°ƒå‡½æ•°<code>onFulfilled</code>æˆ–<code>onRejected</code>ï¼Œè¿™é‡Œåšä¸€ä¸ªå‚æ•°éå‡½æ•°ç±»å‹çš„ç®€å•åŒ–å¤„ç†ï¼Œè¿™æ ·åªéœ€è¦è€ƒè™‘å‡½æ•°çš„å›è°ƒå½¢å¼ï¼Œæ¯•ç«Ÿæ—¥å¸¸å¼€å‘ä¹Ÿä¸ä¼šä¼ é€’å…¶ä»–ç±»å‹çš„å‚æ•°</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">APromise</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">constructor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'pending'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">reason</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">fulfilledQue</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">rejectedQue</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">fn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">then</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">onFulfilled</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> onRejected</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">fulfilledQue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typeof</span><span class="token plain"> onFulfilled </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'function'</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">onFulfilled</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">rejectedQue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typeof</span><span class="token plain"> onRejected </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'function'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token operator">?</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">onRejected</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token operator">:</span><span class="token plain"> </span><span class="token parameter">reason</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> reason</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶å<code>then</code>æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡<code>newPromise</code>ï¼Œå¹¶ä¸”è¿™ä¸ªæ–°çš„ Promise å¯¹è±¡å’Œå½“å‰ Promise çš„çŠ¶æ€ä¿æŒåŒæ­¥ï¼Œæ‰€ä»¥åœ¨<code>then</code>å†…éƒ¨éœ€è¦åˆ¤æ–­å½“å‰ Promise çš„çŠ¶æ€æ¥è¿›è¡Œä¸åŒçš„å¤„ç†ï¼š</p><ul><li>å¦‚æœæ˜¯<code>fulfilled</code>çŠ¶æ€ï¼Œåˆ™è¡¨æ˜å½“å‰ Promise å·²ç»æ‰§è¡Œäº†<code>resolve</code>ï¼Œæ‰€ä»¥åº”è¯¥ä»¥å½“å‰ Promise çš„<code>value</code>å¼‚æ­¥æ‰§è¡Œ<code>onFulfilled</code>ï¼Œå¹¶æŠŠå½“å‰ Promise çš„<code>value</code>ä¼ é€’ä¸‹å»ï¼›<code>rejected</code>çŠ¶æ€åŒç†</li><li>è€Œå¦‚æœå½“å‰ Promise çŠ¶æ€æ˜¯<code>pending</code>ï¼Œé‚£ä¹ˆåº”è¯¥å°†<code>onFulfilled</code>æˆ–<code>onRejected</code>æ¨åˆ°å›è°ƒå‡½æ•°ä¸­å»ï¼Œç­‰å¾…çŠ¶æ€æ”¹å˜çš„æ—¶å€™è‡ªåŠ¨è°ƒç”¨</li></ul><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function-variable function" style="color:rgb(80, 250, 123)">then</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">onFulfilled</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> onRejected</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  onFulfilled </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typeof</span><span class="token plain"> onFulfilled </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'function'</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">onFulfilled</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  onRejected </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typeof</span><span class="token plain"> onRejected </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'function'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token operator">?</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">onRejected</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token operator">:</span><span class="token plain"> </span><span class="token parameter">reason</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> reason</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> newPromise </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">APromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'fulfilled'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://promisesaplus.com/#point-43</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// è¿™é‡Œç›´æ¥å¼‚æ­¥æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œä¿è¯è¿”å›çš„ Promise çŠ¶æ€å’Œå½“å‰ Promise çŠ¶æ€ä¸€è‡´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">onFulfilled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">resolvePromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">newPromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token function" style="color:rgb(80, 250, 123)">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'rejected'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">onRejected</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">reason</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">resolvePromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">newPromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token function" style="color:rgb(80, 250, 123)">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¦‚æœå½“å‰ Promise çŠ¶æ€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'pending'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">fulfilledQue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">onFulfilled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">resolvePromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">newPromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token function" style="color:rgb(80, 250, 123)">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">rejectedQue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">reason</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">onRejected</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">reason</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">resolvePromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">newPromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token function" style="color:rgb(80, 250, 123)">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> newPromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç„¶åæˆ‘ä»¬éœ€è¦åœ¨ Promise çŠ¶æ€å‘ç”Ÿæ”¹å˜çš„æ—¶å€™è°ƒç”¨<code>onFulfilled</code>æˆ–<code>onRejected</code>ï¼Œå¯ä»¥åœ¨åŸæ¥çš„<code>resolve</code>å’Œ<code>reject</code>åŸºç¡€ä¸Šè¿›è¡Œè¡¥å……ï¼Œè¿™é‡Œ<a href="https://promisesaplus.com/#point-67" target="_blank" rel="noopener noreferrer">ä½¿ç”¨<code>setTimeout</code>æ¨¡æ‹Ÿå¼‚æ­¥å®ç°</a>çš„æ–¹å¼</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function-variable function" style="color:rgb(80, 250, 123)">resolve</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'pending'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'fulfilled'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">fulfilledQue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">forEach</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">cb</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">cb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function-variable function" style="color:rgb(80, 250, 123)">reject</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token parameter">reason</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">setTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'pending'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'rejected'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">reason</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> reason</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">rejectedQue</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">forEach</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">cb</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">cb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">reason</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="resolvepromise">resolvePromise<a class="hash-link" href="#resolvepromise" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>resolvePromise</code>çš„å®ç°ç›¸å¯¹ç®€å•ä¸€ç‚¹ï¼Œç›´æ¥æŒ‰ç…§è§„èŒƒå®šä¹‰ä¸€æ­¥ä¸€æ­¥æ¥å³å¯</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function-variable function" style="color:rgb(80, 250, 123)">resolvePromise</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">promise</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> x</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> resolve</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://promisesaplus.com/#point-48</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¦‚æœthenæä¾›çš„onFulfilledæˆ–è€…onRejectedå‡½æ•°æ‰§è¡Œè¿”å›çš„å€¼å’Œthenè¿”å›çš„æ˜¯åŒä¸€ä¸ªpromiseï¼Œä¼šå¯¼è‡´ä¸‹æ–‡this.resolvePromiseé‡å¤è°ƒç”¨ï¼Œå½¢æˆæ­»å¾ªç¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">promise </span><span class="token operator">===</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">TypeError</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">'then must return a different promise with fulfilled callback'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://promisesaplus.com/#point-49</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// å¦‚æœæ˜¯ä¸€ä¸ª Promiseï¼Œéœ€è¦åˆ¤æ–­å…¶çŠ¶æ€ï¼Œå¹¶åŒæ­¥åˆ°åç»­çš„ Promise</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">x </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">instanceof</span><span class="token plain"> </span><span class="token class-name">APromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://promisesaplus.com/#point-50</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">state</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'pending'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token parameter">value</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">resolvePromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token parameter">reason</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token function" style="color:rgb(80, 250, 123)">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">reason</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://promisesaplus.com/#point-51</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typeof</span><span class="token plain"> x </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'function'</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typeof</span><span class="token plain"> x </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'object'</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> x </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token keyword null nil" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://promisesaplus.com/#point-53</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// thenable å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://promisesaplus.com/#point-59</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// ä¿è¯x.thenæä¾›çš„å›è°ƒå‡½æ•°åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> hasBeenResolved </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      then </span><span class="token operator">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://promisesaplus.com/#point-56</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">typeof</span><span class="token plain"> then </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">'function'</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        then</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token parameter">y</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">!</span><span class="token plain">hasBeenResolved</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              hasBeenResolved </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://promisesaplus.com/#point-57</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">resolvePromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">promise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token parameter">r</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">!</span><span class="token plain">hasBeenResolved</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              hasBeenResolved </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token function" style="color:rgb(80, 250, 123)">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">r</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://promisesaplus.com/#point-63</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://promisesaplus.com/#point-60</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">!</span><span class="token plain">hasBeenResolved</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// https://promisesaplus.com/#point-64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æµ‹è¯•">æµ‹è¯•<a class="hash-link" href="#æµ‹è¯•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä½¿ç”¨ promise-aplus è§„èŒƒæä¾›çš„<a href="https://github.com/promises-aplus/promises-tests" target="_blank" rel="noopener noreferrer">promises-tests</a>è¿›è¡Œæµ‹è¯•ï¼Œåœ¨åŸæœ‰ä»£ç ä¸Šæš´éœ²ä»¥ä¸‹å…¥å£æ–¹æ³•ï¼Œç„¶åä½¿ç”¨ cjs è¯­æ³•å¯¼å‡ºå³å¯</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> * æµ‹è¯•å…¥å£</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token maybe-class-name">APromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">defer</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">APromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(80, 250, 123)">deferred</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> dfd </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  dfd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">promise</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">APromise</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    dfd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">resolve</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> resolve</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    dfd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">reject</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> reject</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> dfd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ‰§è¡Œ<code>promises-aplus-tests</code>ï¼Œå¯ä»¥çœ‹åˆ°å®Œç¾é€šè¿‡ 872 ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[metaæ ‡ç­¾]]></title>
            <link>https://icodex.me/2022/01/02/metaæ ‡ç­¾</link>
            <guid>/2022/01/02/metaæ ‡ç­¾</guid>
            <pubDate>Sun, 02 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[head]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="head">head<a class="hash-link" href="#head" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>head</code>æ ‡ç­¾æ˜¯åœ¨ HTML çš„æ ¹å…ƒç´ <code>html</code>é‡Œçš„ç¬¬ä¸€ä¸ªæ ‡ç­¾ï¼Œå®ƒçš„å†…å®¹å¦‚ä¸‹ï¼š</p><ul><li>å…è®¸åŒ…å«ä¸€ä¸ª<code>title</code>æ ‡ç­¾ï¼Œè¡¨ç¤ºæ–‡æ¡£çš„æ ‡é¢˜ï¼Œæ˜¾ç¤ºåœ¨æµè§ˆå™¨çš„æ ‡ç­¾æ ä¸Šï¼›å¦‚æœæ—¶<code>iframe</code>åˆ™å¯ä»¥å…è®¸ä¸åŒ…å«<code>title</code>æ ‡ç­¾</li></ul><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">head</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">title</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">My test page</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">title</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">head</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>æœ€å¤šåªèƒ½åŒ…å«ä¸€ä¸ª<code>base</code>æ ‡ç­¾ï¼Œç»™é¡µé¢ä¸Šæ‰€æœ‰çš„ URL ç›¸å¯¹åœ°å€æä¾›ä¸€ä¸ªåŸºç¡€è·¯å¾„ï¼Œå› æ­¤å®ƒä¼šå½±å“å…¨å±€çš„é“¾æ¥åœ°å€ã€‚<code>base</code>æ˜¯ä¸€ä¸ªéå¸¸å±é™©çš„æ ‡ç­¾ï¼Œå®¹æ˜“é€ æˆè·Ÿ JavaScript çš„é…åˆé—®é¢˜</li><li><code>meta</code>æ ‡ç­¾</li></ul><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">base</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">target</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">_top</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">href</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">http://www.example.com/</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>link</code>æ ‡ç­¾ï¼Œè§„å®šäº†å½“å‰æ–‡æ¡£ä¸å¤–éƒ¨èµ„æºçš„å…³ç³»ï¼Œä¾‹å¦‚æ ‡è¯†<code>favicon</code>ï¼Œ<code>css</code>ç­‰é™æ€èµ„æº</li></ul><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">link</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">icon</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">href</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">favicon.ico</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">link</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">stylesheet</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">href</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">my-css-file.css</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>style</code>ï¼Œå³ç›´æ¥æŒ‡å®šçš„<code>CSS</code>æ ·å¼è¡¨</li></ul><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">head</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">style</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token style language-css">    </span><span class="token style language-css selector" style="color:rgb(255, 121, 198)">h1</span><span class="token style language-css"> </span><span class="token style language-css punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token style language-css property">color</span><span class="token style language-css punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token style language-css color">red</span><span class="token style language-css punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token style language-css punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token style language-css">    </span><span class="token style language-css selector" style="color:rgb(255, 121, 198)">p</span><span class="token style language-css"> </span><span class="token style language-css punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token style language-css property">color</span><span class="token style language-css punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token style language-css color">blue</span><span class="token style language-css punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token style language-css punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token style language-css">  </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">style</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">head</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>script</code>æ ‡ç­¾ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸ä¼šè‡³äº<code>head</code>ä¸­ï¼Œå¦‚æœè¦æ”¾åœ¨<code>head</code>ä¸­ä¸€èˆ¬éœ€è¦ä½¿ç”¨<code>async</code>æ¥å¼‚æ­¥åŠ è½½èµ„æº</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="link-æ ‡ç­¾">link æ ‡ç­¾<a class="hash-link" href="#link-æ ‡ç­¾" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>link</code>ä¸€èˆ¬ç”¨äºæŒ‡å®šç½‘é¡µçš„<code>favicon</code>å’Œ<code>css</code>èµ„æºï¼Œå…¶å…·æœ‰ä»¥ä¸‹å±æ€§ï¼š</p><ul><li><p><code>crossorigin</code>ï¼šæŒ‡å®šåœ¨åŠ è½½ç›¸å…³èµ„æºæ—¶æ˜¯å¦å¿…é¡»ä½¿ç”¨ CORSï¼Œä¾‹å¦‚å›¾ç‰‡åŠ è½½ï¼Œå®ƒçš„å€¼å¯ä»¥æ˜¯ä»¥ä¸‹ä¸¤ç§:</p><ul><li><code>"anonymous"</code>ï¼šä¼šå‘èµ·ä¸€ä¸ªè·¨åŸŸè¯·æ±‚(å³åŒ…å« <code>Origin:</code> HTTP å¤´)ï¼Œä½†æ˜¯ä¸ä¼šå‘é€ä»»ä½•å®¢æˆ·ç«¯ä¿¡æ¯ï¼ˆ<code>cookie</code>ï¼Œ<code>HTTP Authorization</code>è¯·æ±‚å¤´ï¼‰ï¼Œå¦‚æœæœåŠ¡ç«¯æ²¡æœ‰è®¾ç½®<code>Access-Control-Allow-Origin</code>å“åº”å¤´ï¼Œåˆ™èµ„æºä¼šè¢«é™åˆ¶è®¿é—®</li><li><code>"use-credentials"</code>ï¼šå‘èµ·è·¨åŸŸè¯·æ±‚çš„åŒæ—¶å‘é€è®¤è¯ä¿¡æ¯ï¼Œå¦‚æœæœåŠ¡ç«¯æ²¡æœ‰è®¾ç½®<code>Access-Control-Allow-Origin</code>å“åº”å¤´ï¼Œåˆ™èµ„æºä¼šè¢«é™åˆ¶è®¿é—®</li><li>å¦‚æœæœªè®¾ç½®<code>crossorigin</code>ï¼Œé‚£ä¹ˆå›¾ç‰‡ä¼šè¢«ç¦æ­¢åœ¨<code>canvas</code>ç­‰å…ƒç´ ä¸­ä½¿ç”¨</li></ul></li><li><p><code>rel</code>ï¼šè¡¨ç¤ºå¤–éƒ¨èµ„æºå’Œå½“å‰ HTML æ–‡æ¡£çš„å…³ç³»ï¼Œå®ƒçš„å€¼å¯ä»¥æ˜¯<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Link_types" target="_blank" rel="noopener noreferrer">é“¾æ¥ç±»å‹</a>ä¸­æŒ‡å®šçš„å€¼ï¼Œä¾‹å¦‚å¸¸è§çš„æœ‰ï¼š</p><ul><li><code>stylesheet</code>ï¼š<code>CSS</code>æ ·å¼è¡¨æ–‡ä»¶</li><li><code>alternate</code>å¤‡ç”¨èµ„æºï¼Œå¯ä»¥æ˜¯<code>CSS</code>ï¼Œæˆ–è€…ä¸€ä»½<code>HTML</code>ï¼Œä¾‹å¦‚æ›´æ¢ä¸»é¢˜çš„ç½‘é¡µå¯ä»¥ä½¿ç”¨<code>alternate</code>å¤‡ç”¨ä¸€ä»½<code>CSS</code></li><li><code>icon</code>ï¼ŒHTML æ–‡æ¡£çš„<code>favicon</code></li><li><code>preload</code>ï¼šæŒ‡å®šé¢„åŠ è½½èµ„æºï¼Œå¯ä»¥é…åˆä½¿ç”¨ <code>as</code> æ¥æŒ‡å®šå°†è¦é¢„åŠ è½½çš„å†…å®¹çš„ç±»å‹ï¼Œå…·ä½“è§<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Preloading_content#%E5%93%AA%E4%BA%9B%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%86%85%E5%AE%B9%E5%8F%AF%E4%BB%A5%E8%A2%AB%E9%A2%84%E5%8A%A0%E8%BD%BD%EF%BC%9F" target="_blank" rel="noopener noreferrer">å“ªäº›ç±»å‹çš„å†…å®¹å¯ä»¥è¢«é¢„åŠ è½½ï¼Ÿ</a></li><li><code>prefetch</code>ï¼šå»ºè®®æµè§ˆå™¨æå‰è·å–é“¾æ¥çš„èµ„æºï¼Œå› ä¸ºå®ƒå¾ˆå¯èƒ½ä¼šè¢«ç”¨æˆ·è¯·æ±‚</li></ul></li><li><p><code>href</code>ï¼šå¤–éƒ¨èµ„æºçš„é“¾æ¥åœ°å€ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„</p></li><li><p><code>type</code>ï¼šæŒ‡å®šé“¾æ¥å†…å®¹çš„ MIME ç±»å‹ï¼Œæœ€å¸¸ç”¨çš„å°±æ˜¯<code>text/html</code>ï¼Œ<code>text/css</code></p></li></ul><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">link</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">preload</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">as</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">font</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">font/woff2</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">crossorigin</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">href</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">/static/media/ZillaSlab-Bold.subset.0beac26b.woff2</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">link</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">alternate</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">title</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">&lt;head&gt;æ ‡ç­¾é‡Œæœ‰ä»€ä¹ˆ? Metadata-HTMLä¸­çš„å…ƒæ•°æ®</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">href</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">https://developer.mozilla.org/zh-CN/docs/learn/HTML/Introduction_to_HTML/The_head_metadata_in_HTML</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">hreflang</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">zh</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">link</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">alternate</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">title</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">Whatâ€™s in the head? Metadata in HTML</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">href</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">https://developer.mozilla.org/en-US/docs/Learn/HTML/Introduction_to_HTML/The_head_metadata_in_HTML</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">hreflang</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">en</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">link</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">href</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">/static/css/main.d00647ab.chunk.css</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">stylesheet</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">"</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="meta-æ ‡ç­¾">meta æ ‡ç­¾<a class="hash-link" href="#meta-æ ‡ç­¾" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>meta</code>æ ‡ç­¾æ˜¯ä¸€ç»„é”®å€¼å¯¹ï¼Œæ˜¯ä¸€ç§é€šç”¨çš„å…ƒä¿¡æ¯è¡¨ç¤ºæ ‡ç­¾ï¼Œä¹Ÿå°±æ˜¯æè¿°å½“å‰ HTML æ–‡æ¡£çš„é™¤äº†<code>link</code>ï¼Œ<code>title</code>ç­‰æ— æ³•è¡¨ç¤ºçš„ä¿¡æ¯ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="name-å’Œ-content">name å’Œ content<a class="hash-link" href="#name-å’Œ-content" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>meta</code>å¯ä»¥ç”±<code>name</code>å’Œ<code>content</code>ä¸¤ä¸ªé”®å€¼å¯¹ç»„æˆï¼Œ<code>name</code>å’Œ<code>content</code>å±æ€§å¯ä»¥ä¸€èµ·ä½¿ç”¨ï¼Œä»¥é”®å€¼å¯¹çš„æ–¹å¼ç»™æ–‡æ¡£æä¾›å…ƒæ•°æ®ï¼Œå…¶ä¸­<code>name</code>çš„å€¼ä½œä¸ºå…ƒæ•°æ®çš„åç§°ï¼Œ<code>content</code> çš„å€¼ä½œä¸ºå…ƒæ•°æ®çš„å€¼ã€‚</p><p>HTML è§„èŒƒä¸­å®šä¹‰äº†ä»¥ä¸‹æ ‡å‡†çš„å…ƒæ•°æ®åç§°ï¼Œå¯ä»¥æŒ‡å®šç»™<code>name</code>ï¼š</p><ul><li><p><code>application-name</code>ï¼šç½‘é¡µä¸­æ‰€è¿è¡Œçš„åº”ç”¨ç¨‹åºçš„åç§°</p></li><li><p><code>author</code>ï¼šæ–‡æ¡£ä½œè€…çš„åå­—ã€‚</p></li><li><p><code>description</code>ï¼šä¸€æ®µç®€çŸ­è€Œç²¾ç¡®çš„ã€å¯¹é¡µé¢å†…å®¹çš„æè¿°ã€‚ä¸€äº›æµè§ˆå™¨ï¼Œæ¯”å¦‚ Firefox å’Œ Operaï¼Œå°†å…¶ç”¨ä½œä¹¦ç­¾çš„é»˜è®¤æè¿°ã€‚</p></li><li><p><code>generator</code>ï¼šç”Ÿæˆæ­¤é¡µé¢çš„è½¯ä»¶çš„æ ‡è¯†ç¬¦ï¼ˆidentifierï¼‰ã€‚</p></li><li><p><code>keywords</code>ï¼šä¸é¡µé¢å†…å®¹ç›¸å…³çš„å…³é”®è¯ï¼Œä½¿ç”¨é€—å·åˆ†éš”ã€‚</p></li><li><p><code>referrer</code>ï¼šæ§åˆ¶ç”±å½“å‰æ–‡æ¡£å‘å‡ºçš„è¯·æ±‚çš„ HTTP <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Referer" target="_blank" rel="noopener noreferrer"><code>Referer</code></a> è¯·æ±‚å¤´ã€‚</p></li><li><p><code>theme-color</code>ï¼šé¡µé¢é£æ ¼é¢œè‰²ï¼Œå®é™…å¹¶ä¸ä¼šå½±å“é¡µé¢ï¼Œä½†æ˜¯æµè§ˆå™¨å¯èƒ½æ®æ­¤è°ƒæ•´é¡µé¢ä¹‹å¤–çš„ UIï¼ˆå¦‚çª—å£è¾¹æ¡†æˆ–è€… tab çš„é¢œè‰²ï¼‰ã€‚<code>content</code> å±æ€§åº”å½“åŒ…å«ä¸€ä¸ªæœ‰æ•ˆçš„ CSS é¢œè‰²å€¼ï¼ˆåå…­è¿›åˆ¶ï¼Œæ¸å˜è‰²ï¼Œæˆ–è€…é¢œè‰²å…³é”®å­—ç­‰ï¼‰</p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="charset">charset<a class="hash-link" href="#charset" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä» HTML5 å¼€å§‹ï¼Œä¸ºäº†ç®€åŒ–å†™æ³•ï¼Œ<code>meta</code>æ ‡ç­¾æ–°å¢äº†<code>charset</code>å±æ€§ï¼Œç”¨æ¥æè¿° HTML æ–‡æ¡£è‡ªèº«çš„ç¼–ç æ ¼å¼ã€‚æ·»åŠ äº† <code>charset</code> å±æ€§çš„ <code>meta</code> æ ‡ç­¾æ— éœ€å†æœ‰ <code>name</code>å’Œ<code>content</code>ã€‚æŒ‡å®š<code>charset</code>çš„<code>meta</code>é€šå¸¸æ”¾åœ¨<code>head</code>çš„ç¬¬ä¸€ä¸ªã€‚</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token operator">&lt;</span><span class="token plain">meta charset</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"UTF-8"</span><span class="token plain"> </span><span class="token operator">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http-equiv">http-equiv<a class="hash-link" href="#http-equiv" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å…·æœ‰ <code>http-equiv</code> å±æ€§çš„ <code>meta</code> æ ‡ç­¾ï¼Œè¡¨ç¤ºæ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œè¿™æ ·çš„ <code>meta</code> æ ‡ç­¾å¯ä»¥ä¸éœ€è¦ <code>name</code> å±æ€§ã€‚ä¾‹å¦‚ä¸‹é¢ä¸€æ®µä»£ç ç›¸å½“äºæŒ‡å®š<code>content-type</code>è¿™ä¸ª HTTP é¦–éƒ¨ï¼Œå¹¶ä¸”æŒ‡å®šäº† HTTP ç¼–ç æ–¹å¼</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token operator">&lt;</span><span class="token plain">meta http</span><span class="token operator">-</span><span class="token plain">equiv</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"content-type"</span><span class="token plain"> content</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"text/html; charset=UTF-8"</span><span class="token operator">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>é™¤äº†<code>content-type</code>ï¼Œè¿˜æœ‰ä»¥ä¸‹å‡ ç§å‘½ä»¤ï¼š</p><ul><li><p><code>content-language</code>æŒ‡å®šå†…å®¹çš„è¯­è¨€ï¼›</p></li><li><p><code>default-style</code>æŒ‡å®šé»˜è®¤æ ·å¼è¡¨ï¼›</p></li><li><p><code>refresh</code>åˆ·æ–°ï¼›</p></li><li><p><code>set-cookie</code>æ¨¡æ‹Ÿ HTTP å“åº”å¤´ <code>set-cookie</code>ï¼Œè®¾ç½® cookieï¼›</p></li><li><p><code>x-ua-compatible</code> æ¨¡æ‹Ÿ HTTP å¤´ <code>x-ua-compatible</code>ï¼Œå£°æ˜æµè§ˆå™¨å…¼å®¹æ€§ï¼›</p></li><li><p><code>content-security-policy</code> æ¨¡æ‹Ÿ HTTP å¤´ <code>content-security-policy</code>ï¼Œå£°æ˜å†…å®¹å®‰å…¨ç­–ç•¥</p></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="x-ua-compatible">x-ua-compatible<a class="hash-link" href="#x-ua-compatible" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>å…³äº<code>http-equiv</code>ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯<code>X-UA-Compatible</code>ï¼Œè¿™ä¸ªæ ‡è¯†ä¸»è¦ä¸ºäº†åœ¨è€ç‰ˆæœ¬çš„ IE8 ä¸Šæ ‡è¯†åº”è¯¥ä»¥ IE7ï¼ˆå…¼å®¹æ€§è§†å›¾ï¼‰è¿˜æ˜¯ IE8ï¼ˆæ ‡å‡†è§†å›¾ï¼‰æ¥æ¸²æŸ“é¡µé¢ï¼Œè€Œåœ¨ IE11ï¼ˆ2013å¹´å‘å¸ƒï¼‰ ä»¥åï¼Œè¿™ä¸ªæ ‡è¯†å°±åºŸå¼ƒä¸ç”¨äº†ã€‚å¦‚æœ web é¡µé¢éœ€è¦å…¼å®¹ IE9æˆ–è€…IE8ï¼Œé‚£ä¹ˆåº”è¯¥æŒ‡å®šè¿™ä¸ªæ ‡è¯†ï¼Œè€Œ IE11 ä»¥åŠ edge ç‰ˆæœ¬ï¼Œé‚£å®Œå…¨ä¸éœ€è¦è¿™ä¸ªæ ‡è¯†ã€‚</p><p>è¿™ä¸ªæ ‡è¯†çš„å€¼ä»¥ IE å¼€å¤´ï¼ŒæŒ‡å®š IE çš„ç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼š</p><ul><li><code>"IE=edge"</code>ï¼šæŒ‡å®š IE ä½¿ç”¨ edge çš„æ¸²æŸ“å¼•æ“æ¥æ˜¾ç¤ºé¡µé¢</li><li><code>"IE=11"</code>ï¼šæŒ‡å®š IE ä½¿ç”¨ IE11 çš„æ¨¡å¼æ¸²æŸ“é¡µé¢</li><li><code>chrome=1</code>ï¼šå¦‚æœé¢å¤–æŒ‡ chromeï¼Œåˆ™æŒ‡å®š IE åœ¨å®‰è£…äº†<a href="https://en.wikipedia.org/wiki/Google_Chrome_Frame" target="_blank" rel="noopener noreferrer">Google Chrome Frame - Wikipedia</a>çš„æƒ…å†µä¸‹ä½¿ç”¨è¿™ä¸ª chrome çš„æ¸²æŸ“å¼•æ“</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="viewport">viewport<a class="hash-link" href="#viewport" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>viewport</code>å¹¶æœªç”±æ ‡å‡†å®šä¹‰ï¼Œä½†æ˜¯ç§»åŠ¨ç«¯å¼€å‘å¿…é¡»ä½¿ç”¨ï¼Œå…¶è¡¨ç¤ºç§»åŠ¨ç«¯ç½‘é¡µç‰©ç†åƒç´ å’Œé€»è¾‘åƒç´ çš„ç¼©æ”¾é€»è¾‘ã€‚å…¶å±æ€§å€¼æ˜¯ä¸€ä¸ªå¾ˆå¤æ‚çš„ç»“æ„ï¼Œç”¨é€—å·åˆ†éš”çš„é”®å€¼å¯¹ï¼Œé”®å€¼å¯¹å¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li><p><code>width</code>ï¼šé¡µé¢å®½åº¦ï¼Œå¯ä»¥å–å€¼å…·ä½“çš„æ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯ device-widthï¼Œè¡¨ç¤ºè·Ÿè®¾å¤‡å®½åº¦ç›¸ç­‰ã€‚</p></li><li><p><code>height</code>ï¼šé¡µé¢é«˜åº¦ï¼Œå¯ä»¥å–å€¼å…·ä½“çš„æ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯ device-heightï¼Œè¡¨ç¤ºè·Ÿè®¾å¤‡é«˜åº¦ç›¸ç­‰ã€‚</p></li><li><p><code>initial-scale</code>ï¼šåˆå§‹ç¼©æ”¾æ¯”ä¾‹ã€‚</p></li><li><p><code>minimum-scale</code>ï¼šæœ€å°ç¼©æ”¾æ¯”ä¾‹ã€‚</p></li><li><p><code>maximum-scale</code>ï¼šæœ€å¤§ç¼©æ”¾æ¯”ä¾‹ã€‚</p></li><li><p><code>user-scalable</code>ï¼šæ˜¯å¦å…è®¸ç”¨æˆ·ç¼©æ”¾ã€‚</p></li></ul><p>å¯¹äºå·²ç»åšå¥½äº†ç§»åŠ¨ç«¯é€‚é…çš„ç½‘é¡µï¼Œåº”è¯¥æŠŠç”¨æˆ·ç¼©æ”¾åŠŸèƒ½ç¦æ­¢æ‰ï¼Œå®½åº¦è®¾ä¸ºè®¾å¤‡å®½åº¦ï¼Œä¸€ä¸ªæ ‡å‡†çš„æŒ‡å®š<code>viewport</code>çš„<code>meta</code>å¦‚ä¸‹ï¼š</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token operator">&lt;</span><span class="token plain">meta name</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"viewport"</span><span class="token plain"> content</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"</span><span class="token operator">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="seo">SEO<a class="hash-link" href="#seo" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>meta</code>æ ‡ç­¾å¦å¤–ä¸€ä¸ªæœ€å¤§çš„ç”¨å¤„å°±æ˜¯è¿›è¡Œç½‘ç«™çš„<code>SEO</code>ï¼ˆSearch engine optimizationï¼Œæœç´¢å¼•æ“ä¼˜åŒ–ï¼‰ã€‚è¿™å…¶ä¸­å¸¸ç”¨çš„å±æ€§ä¸ºï¼š</p><ul><li><code>author</code>ï¼šæ–‡æ¡£ä½œè€…çš„åå­—ã€‚</li><li><code>description</code>ï¼šä¸€æ®µç®€çŸ­è€Œç²¾ç¡®çš„ã€å¯¹é¡µé¢å†…å®¹çš„æè¿°ã€‚ä¸€äº›æµè§ˆå™¨ï¼Œæ¯”å¦‚ Firefox å’Œ Operaï¼Œå°†å…¶ç”¨ä½œä¹¦ç­¾çš„é»˜è®¤æè¿°ã€‚</li><li><code>generator</code>ï¼šç”Ÿæˆæ­¤é¡µé¢çš„è½¯ä»¶çš„æ ‡è¯†ç¬¦ï¼ˆidentifierï¼‰ã€‚</li><li><code>keywords</code>ï¼šä¸é¡µé¢å†…å®¹ç›¸å…³çš„å…³é”®è¯ï¼Œä½¿ç”¨é€—å·åˆ†éš”ã€‚</li></ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[monorepo]]></title>
            <link>https://icodex.me/2022/01/02/monorepo</link>
            <guid>/2022/01/02/monorepo</guid>
            <pubDate>Sun, 02 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[monorepo]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="monorepo">monorepo<a class="hash-link" href="#monorepo" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä»€ä¹ˆæ˜¯-monorepo">ä»€ä¹ˆæ˜¯ monorepo<a class="hash-link" href="#ä»€ä¹ˆæ˜¯-monorepo" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>monorepo</code>è¿™ä¸ªè¯æ˜¯<code>meno</code>å’Œ<code>repo</code>ä¸¤ä¸ªç¼©å†™è¯çš„ç»„åˆï¼Œ<code>meno</code>æ˜¯æ›´å°‘çš„æ„æ€ï¼Œ<code>repo</code>æ˜¯<code>repository</code>çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯ä»“åº“ï¼Œåˆèµ·æ¥å°±æ˜¯ä½¿ç”¨æ›´å°‘çš„ä»“åº“æ¥è¿›è¡Œç‰ˆæœ¬ç®¡ç†æ§åˆ¶ï¼Œå°†æ‰€æœ‰é¡¹ç›®éƒ½æ”¾åœ¨ä¸€ä¸ªä»£ç ä»“åº“è¿›è¡Œç®¡ç†ã€‚</p><p>æˆªæ­¢åˆ°ç›®å‰ï¼Œä¸»æµçš„å‰ç«¯å¼€æºé¡¹ç›®åŸºæœ¬å…¨éƒ¨ä½¿ç”¨<code>monorepo</code>ï¼Œä¾‹å¦‚<code>react</code>ï¼Œ<code>vue</code>ï¼Œ<code>babel</code>ç­‰ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-monorepo">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ monorepo<a class="hash-link" href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-monorepo" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä½¿ç”¨<code>monorepo</code>æœ‰ä»¥ä¸‹å¥½å¤„ï¼š</p><ul><li>ä»£ç å¤ç”¨æ›´ç®€å•ï¼Œ<strong>ç±»ä¼¼çš„åŠŸèƒ½æˆ–é€šä¿¡åè®®å¯ä»¥æŠ½è±¡åˆ°å…±äº«åº“ä¸­</strong>ï¼Œè€Œä¸éœ€è¦ä¾èµ–åŒ…ç®¡ç†å™¨ï¼›</li><li>åŸå­çº§åˆ«çš„æäº¤ä½¿å¾—ä¸åŒé¡¹ç›®ç‰ˆæœ¬ç®¡ç†æ›´åŠ æ–¹ä¾¿ï¼Œä¾‹å¦‚<code>babel</code>å†…éƒ¨åŒ…å«<code>@babel/parser</code>ï¼Œ<code>@babel/traverse</code>ç­‰è®¸å¤šå­é¡¹ç›®ï¼Œè¿™äº›æ¨¡å—åŒæ—¶ä¿®æ”¹éƒ½åœ¨ä¸€ä¸ªä»“åº“ä»£ç å†…ï¼Œä¿®æ”¹å®Œä¸€æ¬¡æäº¤å°±è¡Œäº†ï¼›</li><li>é¿å…é‡å¤å®‰è£…ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­è‚¯å®šä¼šä½¿ç”¨å¤§é‡ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ï¼Œè¿™äº›åŒ…çš„ç‰ˆæœ¬ç®¡ç†å’Œå®‰è£…éœ€è¦ä¸æ–­é‡å¤è¿›è¡Œï¼Œè€Œ<code>monorepo</code>å†…éƒ¨åªéœ€è¦ç®¡ç†å’Œå®‰è£…ä¸€æ¬¡ï¼Œå…¶ä»–<code>package</code>éƒ½å¯ä»¥å…±äº«ï¼›</li><li>è·¨å›¢é˜Ÿåä½œæ›´åŠ æ–¹ä¾¿ï¼Œç”±äºä»£ç éƒ½åœ¨ä¸€ä¸ªä»“åº“å†…éƒ¨ï¼Œæ‰€ä»¥åŸºæœ¬æ²¡æœ‰æƒé™é™åˆ¶ï¼Œå¤§å®¶éƒ½å¯ä»¥å‚ä¸å’Œç»´æŠ¤</li></ul><p>ä¸è¿‡ï¼Œä½¿ç”¨<code>monorepo</code>ä¹Ÿæœ‰ä¸€äº›ä¸ä¾¿ï¼š</p><ul><li><code>package</code>åˆ’åˆ†çš„ç²’åº¦ä¸å¥½æ§åˆ¶ï¼Œè¿™ä¸€èˆ¬å–å†³äºæ¶æ„çš„æ°´å¹³</li><li>éšç€ä¸åŒé¡¹ç›®çš„è¿›è¡Œï¼Œæ•´ä¸ª<code>monorepo</code>ä¼šè¶Šæ¥è¶Šå¤§</li><li>æƒé™æ§åˆ¶æ²¡æœ‰<code>multirepo</code>é‚£æ ·ç²¾ç»†åˆ°é¡¹ç›®</li><li>å›¢é˜Ÿåä½œå¯¼è‡´çš„ä¿®æ”¹å¯èƒ½å› ä¸ºæ²Ÿé€šä¸åŠæ—¶çš„é—®é¢˜è€Œå½±å“å¾ˆå¤šé¢ï¼Œä¸è¿‡è¿™éƒ½æ˜¯å¼€å‘è€…ä¸è§„èŒƒä½¿ç”¨çš„é—®é¢˜</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lerna">lerna<a class="hash-link" href="#lerna" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>lerna æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå®ƒä¼˜åŒ–äº†ä½¿ç”¨ git å’Œ npm ç®¡ç†å¤šåŒ…å­˜å‚¨åº“çš„å·¥ä½œæµã€‚</p></blockquote><p>åœ¨<code>lerna</code>æ¶æ„ä¸­ï¼Œæ¯ä¸ªå•ç‹¬çš„é¡¹ç›®éƒ½æ˜¯æ”¾åœ¨<code>package</code>ç›®å½•çš„å­æ–‡ä»¶å¤¹ä¸‹è¿›è¡Œç®¡ç†ï¼Œæ¯ä¸ª<code>package</code>å†…éƒ¨éƒ½æœ‰ç®¡ç†è‡ªèº«é…ç½®é¡¹çš„<code>package.json</code>æ–‡ä»¶ï¼Œä¾èµ–ä¹Ÿéƒ½ä¼šå®‰è£…åœ¨å„ä¸ª<code>package</code>æ–‡ä»¶å¤¹å†…çš„<code>node_modules</code>å†…éƒ¨ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä½¿ç”¨">ä½¿ç”¨<a class="hash-link" href="#ä½¿ç”¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ä½¿ç”¨<code>lerna</code>éœ€è¦å…¨å±€å®‰è£… CLI å·¥å…·</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">yarn</span><span class="token plain"> global </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> lerna</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">lerna init</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">lerna bootstrap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">lerna publish</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image-20211212143303117" src="/assets/images/image-20211212143303117-dde4957d3df2ead233f215ce98998bf8.png" width="433" height="528" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç‰ˆæœ¬æ§åˆ¶">ç‰ˆæœ¬æ§åˆ¶<a class="hash-link" href="#ç‰ˆæœ¬æ§åˆ¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>lerna</code>æä¾›ä¸¤ç§ç‰ˆæœ¬æ§åˆ¶çš„æ–¹å¼ï¼š</p><ol><li>ä¸€ç§æ˜¯æ‰€æœ‰é¡¹ç›®å›ºå®šä½¿ç”¨ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œä½äº<code>monorepo</code>å†…éƒ¨çš„<code>lerna.json</code>å†…éƒ¨æŒ‡å®šçš„<code>version</code>ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´æ‰§è¡Œ<code>lerna publish</code>ä¼šæ›´æ–°æ‰€æœ‰<code>package</code>çš„ç‰ˆæœ¬å·ï¼›</li><li>å¦ä¸€ç§æ˜¯ä½¿ç”¨<code>lerna init --independent</code>åˆ›å»ºçš„é¡¹ç›®ï¼Œå¯ä»¥ç‹¬ç«‹ç®¡ç†æ¯ä¸ª<code>package.json</code>å†…éƒ¨çš„ç‰ˆæœ¬å·ï¼Œæ¯æ¬¡æ‰§è¡Œ<code>lerna publish</code>çš„æ—¶å€™ï¼Œå¯ä»¥å•ç‹¬é€‰æ‹©æ¯ä¸ªä¿®æ”¹è¿‡çš„<code>package</code>å†…éƒ¨çš„ç‰ˆæœ¬å·ã€‚</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="é…ç½®é¡¹">é…ç½®é¡¹<a class="hash-link" href="#é…ç½®é¡¹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨<code>lerna.json</code>ä¸­å¯ä»¥æŒ‡å®šä»¥ä¸‹é…ç½®é¡¹ï¼š</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"version"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"1.1.3"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"npmClient"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"npm"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"command"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"publish"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">"ignoreChanges"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"ignored-file"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"*.md"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">"message"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"chore(release): publish"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">"registry"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"https://npm.pkg.github.com"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">"bootstrap"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">"ignore"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"component-*"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token property">"npmClientArgs"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"--no-package-lock"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"packages"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"packages/*"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>version</code>ï¼šç‰ˆæœ¬å·ï¼ŒæŒ‡å®šä¸º<code>independent</code>è¡¨ç¤ºæ¯ä¸ª<code>package</code>å•ç‹¬ç®¡ç†</li><li><code>npmClient</code>ï¼šä½¿ç”¨<code>npm</code>è¿˜æ˜¯<code>yarn</code>å®‰è£…ä¾èµ–</li><li><code>command.publish.ignoreChanges</code>ï¼šå¿½ç•¥ä»¥æŸäº›æ–‡ä»¶ä¿®æ”¹å¯¼è‡´çš„å‘å¸ƒæ›´æ–°ï¼Œä½¿ç”¨<code>glob</code>æ¨¡å¼</li><li><code>command.publish.message</code>ï¼šæ‰§è¡Œå‘å¸ƒçš„æäº¤ä¿¡æ¯</li><li><code>command.publish.registry</code>ï¼šå‘å¸ƒæº</li><li><code>command.bootstrap.ignore</code>ï¼šå–æ¶ˆå¼•å¯¼å®‰è£…ä¾èµ–çš„æ–‡ä»¶</li><li><code>command.bootstrap.npmClientArgs</code>ï¼šæ‰§è¡Œ<code>lerna bootstrap</code>æ—¶ä¼ é€’ç»™<code>npm install</code>æˆ–è€…<code>yarn install</code>å‘½ä»¤çš„å‚æ•°</li><li><code>command.bootstrap.scope</code>ï¼šé™åˆ¶<code>lerna bootstrap</code>å¼•å¯¼çš„<code>package</code></li><li><code>packages</code>ï¼šæŒ‡å®š<code>lerna package</code>ç›®å½•ï¼Œé»˜è®¤å°±æ˜¯<code>packages</code>æ–‡ä»¶å¤¹</li><li><code>useWorkspaces</code>ï¼šæ˜¯å¦ä½¿ç”¨<code>yarn workspace</code>ï¼Œå¦‚æœå¼€å¯éœ€è¦åœ¨ä»“åº“æ ¹ç›®å½•ä¸‹çš„<code>package.json</code>æŒ‡å®š<code>workspaces</code></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å‘½ä»¤è¡Œ">å‘½ä»¤è¡Œ<a class="hash-link" href="#å‘½ä»¤è¡Œ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lerna-init">lerna init<a class="hash-link" href="#lerna-init" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>åˆ›å»ºåŸºäº<code>lerna</code>çš„<code>monorepo</code>ä»“åº“ï¼Œæˆ–è€…æ›´æ–°å½“å‰ä»“åº“çš„<code>lerna</code>ç‰ˆæœ¬ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lerna-bootstrap">lerna bootstrap<a class="hash-link" href="#lerna-bootstrap" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>å®‰è£…æ‰€æœ‰<code>package</code>çš„ä¾èµ–é¡¹ã€‚<code>lerna</code>ä¸ºé¡¹ç›®å†…çš„æ¯ä¸ª<code>package</code>æ‰§è¡Œ<code>npm install</code>æˆ–è€…<code>yarn install</code>ï¼Œç„¶ååœ¨è¿™äº›åŒ…ä¹‹é—´åˆ›å»º<a href="https://zh.wikipedia.org/wiki/%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5" target="_blank" rel="noopener noreferrer"><code>symlink</code></a>ï¼Œä»¥ç›¸äº’å¼•ç”¨ã€‚</p><p>ä¾‹å¦‚<code>babel</code>é¡¹ç›®ä¸­<code>babel-core</code>ä¾èµ–<code>@babel/generator</code>ï¼Œè€Œä¸”å®ƒä»¬éƒ½åœ¨åŒä¸€ä¸ª<code>monorepo</code>ä¸­ï¼Œé‚£ä¹ˆåœ¨<code>packages/babel-core</code>ä¸‹å®‰è£…çš„<code>@babel/generator</code>ä¼šé€šè¿‡<code>symlink</code>é“¾æ¥åˆ°åŒçº§çš„<code>@babel/generator</code>ç›®å½•ã€‚</p><p><code>symlink</code>æ˜¯ä¸€ç±»ç‰¹æ®Šçš„æ–‡ä»¶ï¼ŒåŒ…å«ä¸€æ¡ä»¥ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„å½¢å¼æŒ‡å‘å…¶ä»–æ–‡ä»¶æˆ–è€…ç›®å½•çš„å¼•ç”¨ã€‚ç›®å‰ Unixï¼ŒWindows éƒ½æ”¯æŒ<code>symlink</code>ï¼Œä¸€ä¸ªç¬¦å·é“¾æ¥æ–‡ä»¶ä»…åŒ…å«æœ‰ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²ï¼Œå…¶è¢«æ“ä½œç³»ç»Ÿè§£é‡Šä¸ºä¸€æ¡æŒ‡å‘å¦ä¸€ä¸ªæ–‡ä»¶æˆ–è€…ç›®å½•çš„è·¯å¾„ã€‚</p><p><code>lerna bootstrap --use-workspaces</code>ä½¿ç”¨<code>yarn workspace</code>çš„å½¢å¼ç®¡ç†<code>packages</code>çš„ä¾èµ–ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lerna-add">lerna add<a class="hash-link" href="#lerna-add" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">lerna </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">package</span><span class="token operator">&gt;</span><span class="token plain"> --scope</span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">package</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> --dev</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>lerna add</code>ç”¨äºå®‰è£…ä¾èµ–åˆ°æŒ‡å®š<code>package</code>å†…éƒ¨ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®š<code>scope</code>ï¼Œé‚£ä¹ˆé»˜è®¤å®‰è£…åˆ°æ‰€æœ‰<code>package</code>å†…éƒ¨ã€‚</p><p>æ³¨æ„ä¸åŒ<code>package</code>ä¹‹é—´å¦‚æœç›¸äº’ä¾èµ–ï¼Œä¹Ÿéœ€è¦é€šè¿‡<code>lerna add</code>å®‰è£…ï¼Œè¿™æ ·<code>lerna</code>æ‰èƒ½åˆ›å»º<code>symlink</code>å…³è”åˆ°ä¾èµ–çš„<code>package</code>å†…éƒ¨ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lerna-publish">lerna publish<a class="hash-link" href="#lerna-publish" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>å‘å¸ƒæ‰€æœ‰æ›´æ–°è¿‡å†…å®¹çš„<code>package</code>ä»“åº“åˆ°<code>npm</code>ï¼Œä¼šæç¤º<code>version</code>çš„æ›´æ–°ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lerna-run-script">lerna run <!-- -->[script]<a class="hash-link" href="#lerna-run-script" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><p>åœ¨åŒ…å«æŒ‡å®š<code>script</code>çš„<code>package</code>å†…éƒ¨æ‰§è¡Œè¯¥å‘½ä»¤ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lerna-çš„å±€é™æ€§">lerna çš„å±€é™æ€§<a class="hash-link" href="#lerna-çš„å±€é™æ€§" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><code>lerna</code>ä½œä¸º<code>package</code>ç®¡ç†çš„å®¹å™¨ï¼Œ<code>lerna</code>æ— æ³•åšåˆ°é«˜æ•ˆåœ°ç®¡ç†<code>node_modules</code>ï¼š</p><ul><li><code>lerna</code>ä¸ºæ¯ä¸ª<code>package</code>å•ç‹¬æ‰§è¡Œ<code>xxx install</code>çš„æ“ä½œï¼Œå¹¶ä¸”ä¾èµ–ä¹‹é—´æ— æ³•å…±äº«ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´ä¾èµ–çš„é‡å¤å®‰è£…ï¼Œå¯ä»¥å‚è€ƒä¸Šæ–‡ä½¿ç”¨<code>lerna</code>åˆ›å»ºçš„é¡¹ç›®å†…éƒ¨ç®¡ç†<code>react</code>çš„å®‰è£…é¡¹ã€‚</li><li><code>lerna</code>å¿…é¡»é€šè¿‡æ‰§è¡Œ<code>lerna bootstrap</code>æ‰èƒ½ä¸ºä¸åŒ<code>package</code>åˆ›å»º<code>symlink</code>ï¼Œè€Œå¦‚æœå•ç‹¬åœ¨<code>package</code>å†…éƒ¨æ‰§è¡Œ<code>yarn install</code>ç­‰å‘½ä»¤å°±ä¼šå¯¼è‡´<code>symlink</code>è¢«ç ´åï¼Œå› æ­¤<code>package</code>ç®¡ç†éå¸¸å—é™åˆ¶ã€‚</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="yarn-workspace">yarn workspace<a class="hash-link" href="#yarn-workspace" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸ºäº†è§£å†³<code>lerna</code>çš„å±€é™æ€§ï¼Œ<code>yarn</code>ä»<code>0.28</code>ç‰ˆæœ¬ï¼ˆç›®å‰ 1.22ï¼‰ä»¥åæ”¯æŒ<code>monorepo</code>ç®¡ç†<code>package</code>ä¹‹é—´çš„ä¾èµ–ã€‚</p><p>å¹¶ä¸”ä»<code>yarn-1.0</code>ç‰ˆæœ¬ä»¥åï¼Œ<code>yarn</code>é»˜è®¤æ”¯æŒï¼Œè¿™ç§æ–¹å¼åœ¨<code>yarn</code>å†…éƒ¨ç§°ä¸º<code>workspace</code>ã€‚ä½¿ç”¨ä¸Šæ¥è¯´ï¼Œåªéœ€è¦åœ¨</p><p><code>monorepo</code>æ ¹ç›®å½•ä¸‹çš„<code>package.json</code>ä¸­æ³¨å†Œ<code>workspace</code>çš„æ–‡ä»¶å¤¹å³å¯ã€‚</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"private"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">"workspaces"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"packages/*"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>yarn workspace</code>ä¸èƒ½å–ä»£<code>lerna</code>ï¼Œä¸»è¦æ˜¯ä¸ºäº†è§£å†³<code>lerna</code>çš„é—®é¢˜ï¼Œå› æ­¤<code>lerna</code>ä»<code>2.0.0</code>ç‰ˆæœ¬ä»¥åï¼Œæ”¯æŒä½¿ç”¨<code>lerna bootstrap --use-workspace</code>æ¥ä½¿ç”¨<code>yarn</code>å¼•å¯¼<code>monorepo</code>ä¾èµ–çš„ç®¡ç†å’Œåˆ›å»ºï¼Œè¿™æ ·<code>monorepo</code>å†…éƒ¨æ‰€æœ‰<code>package</code>çš„ä¾èµ–éƒ½åªä¼šå®‰è£…åœ¨ä»“åº“æ ¹ç›®å½•çš„<code>node_modules</code>ä¸‹ã€‚</p><p><img loading="lazy" alt="image-20211212164417532" src="/assets/images/image-20211212164417532-94506936f7c3e7cebfb7c89618da7978.png" width="437" height="359" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å‘½ä»¤è¡Œ-1">å‘½ä»¤è¡Œ<a class="hash-link" href="#å‘½ä»¤è¡Œ-1" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="yarn-install">yarn install<a class="hash-link" href="#yarn-install" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>å®‰è£…ä¾èµ–</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="yarn-workspace-1">yarn workspace<a class="hash-link" href="#yarn-workspace-1" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">yarn</span><span class="token plain"> workspace </span><span class="token operator">&lt;</span><span class="token plain">workspace_name</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">command</span><span class="token operator">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>yarn workspace</code>å‘½ä»¤ç”¨äºåœ¨æŒ‡å®š<code>package</code>å†…éƒ¨æ‰§è¡Œå‘½ä»¤ï¼Œç±»ä¼¼äº<code>lerna add</code>ã€‚</p><p>ä¾‹å¦‚å®‰è£…ä¾èµ–åˆ°æŒ‡å®š<code>package</code>å†…éƒ¨ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">yarn</span><span class="token plain"> workspace package1 </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> react react-dom --D</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="yarn-workspaces">yarn workspaces<a class="hash-link" href="#yarn-workspaces" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">yarn</span><span class="token plain"> workspaces run </span><span class="token operator">&lt;</span><span class="token plain">command</span><span class="token operator">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åœ¨æ¯ä¸ª<code>packages</code>å†…éƒ¨æ‰§è¡Œå‘½ä»¤ï¼Œç±»ä¼¼äº<code>lerna run</code>ã€‚</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[GitHubä¸å†æ”¯æŒå¯†ç ç™»å½•éªŒè¯]]></title>
            <link>https://icodex.me/2021/10/30/GitHubä¸å†æ”¯æŒå¯†ç ç™»å½•éªŒè¯</link>
            <guid>/2021/10/30/GitHubä¸å†æ”¯æŒå¯†ç ç™»å½•éªŒè¯</guid>
            <pubDate>Sat, 30 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[GitHub å–æ¶ˆå¯†ç ç™»å½•éªŒè¯çš„æ–¹å¼]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="github-å–æ¶ˆå¯†ç ç™»å½•éªŒè¯çš„æ–¹å¼">GitHub å–æ¶ˆå¯†ç ç™»å½•éªŒè¯çš„æ–¹å¼<a class="hash-link" href="#github-å–æ¶ˆå¯†ç ç™»å½•éªŒè¯çš„æ–¹å¼" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>2021 å¹´ 8 æœˆ 13 æ—¥ä»¥åï¼Œ<a href="https://github.blog/changelog/2021-08-12-git-password-authentication-is-shutting-down/" target="_blank" rel="noopener noreferrer">GitHub å®£å¸ƒä¸å†æ”¯æŒå¯†ç ç™»å½•çš„å®¢æˆ·ç«¯æˆæƒæ–¹å¼</a>ã€‚</p><p><img loading="lazy" alt="image-20210922195230530" src="/assets/images/image-20210922195230530-61845da324c0ff530755d544c8514631.png" width="987" height="167" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è§£å†³æ–¹å¼">è§£å†³æ–¹å¼<a class="hash-link" href="#è§£å†³æ–¹å¼" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p><a href="https://stackoverflow.com/questions/68775869/support-for-password-authentication-was-removed-please-use-a-personal-access-to" target="_blank" rel="noopener noreferrer">git - Support for password authentication was removed. Please use a personal access token instead - Stack Overflow</a></p></blockquote><p>å‚è€ƒ StackOverflow ä¸Šçš„è§£é‡Šï¼Œç°åœ¨åªèƒ½é€šè¿‡åœ¨ GitHub ç½‘ç«™ç”Ÿæˆ PAT (Personal Access Token)çš„æ–¹å¼ä¿å­˜åœ¨å®¢æˆ·ç«¯æ¥è¿›è¡Œæ ¡éªŒå’Œæˆæƒã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç”Ÿæˆ-pat">ç”Ÿæˆ PAT<a class="hash-link" href="#ç”Ÿæˆ-pat" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>åœ¨ GitHub å®˜ç½‘ç”Ÿæˆ PAT æŒ‰ç…§ä»¥ä¸‹æ–¹å¼ï¼š</p><ol><li>å³ä¸Šè§’ç‚¹å‡»ä¸ªäººå¤´åƒï¼Œæ‰¾åˆ° <strong>Settings</strong> å¹¶æ‰“å¼€ï¼›</li><li>ç„¶ååœ¨ <strong>Settings</strong> é¢æ¿å·¦ä¾§ç›®å½•æ‰¾åˆ° <strong>Developer Settings</strong>ï¼Œç‚¹å‡»è¿›å»å°±å¯ä»¥çœ‹åˆ° <strong>Personal access tokens</strong> äº†</li></ol><p><img loading="lazy" alt="image-20210922200800547" src="/assets/images/image-20210922200800547-f0636d752e0b36c1313e24c7df383596.png" width="1206" height="535" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è®¾ç½®-pat">è®¾ç½® PAT<a class="hash-link" href="#è®¾ç½®-pat" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>ç”Ÿæˆ PAT ä»¥åå‘¢ï¼Œä»¥ windows10 ç³»ç»Ÿä¸ºä¾‹ï¼Œåœ¨<strong>æ§åˆ¶é¢æ¿ =&gt; ä¸ªäººè´¦æˆ·</strong>ä¸‹æ‰¾åˆ°<strong>å‡­æ®ç®¡ç†å™¨</strong></p><p><img loading="lazy" alt="image-20210922201159423" src="/assets/images/image-20210922201159423-906460f9b489d356e7538ca20d066a0b.png" width="1122" height="556" class="img_ev3q"></p><p>ç„¶åç‚¹å‡»å³ä¾§ Windows å‡­æ®ï¼Œæ‰¾åˆ°<code>git:https://github.com</code>ï¼Œå¦‚æœæ²¡æœ‰å°±ç‚¹å‡»æ·»åŠ ï¼Œç”¨æˆ·åå°±æ˜¯é‚®ç®±åœ°å€ï¼Œå¯†ç æ˜¯åˆšæ‰ç”Ÿæˆçš„ tokenï¼Œä¿å­˜å³å¯ã€‚</p><p><img loading="lazy" alt="image-20210922201533179" src="/assets/images/image-20210922201533179-fc077fd442cf68a46c78cb0b3fabe754.png" width="849" height="588" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ³¨æ„">æ³¨æ„<a class="hash-link" href="#æ³¨æ„" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¦‚æœæœ¬åœ°è®¾ç½®äº† Git ä»£ç†åœ°å€ï¼Œåˆ™éœ€è¦é‡ç½®ä»£ç†</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> config --global https.proxy http://127.0.0.1:1080</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> config --global https.proxy https://127.0.0.1:1080</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> config --global --unset http.proxy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> config --global --unset https.proxy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
        </item>
    </channel>
</rss>