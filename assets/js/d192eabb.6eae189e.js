"use strict";(self.webpackChunkicodex_next=self.webpackChunkicodex_next||[]).push([[5005],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return c}});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var k=a.createContext({}),m=function(e){var t=a.useContext(k),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=m(e.components);return a.createElement(k.Provider,{value:t},e.children)},o={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,k=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),d=m(n),c=i,s=d["".concat(k,".").concat(c)]||d[c]||o[c]||l;return n?a.createElement(s,r(r({ref:t},u),{},{components:n})):a.createElement(s,r({ref:t},u))}));function c(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,r=new Array(l);r[0]=d;var p={};for(var k in t)hasOwnProperty.call(t,k)&&(p[k]=t[k]);p.originalType=e,p.mdxType="string"==typeof e?e:i,r[1]=p;for(var m=2;m<l;m++)r[m]=n[m];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2617:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return k},default:function(){return c},frontMatter:function(){return p},metadata:function(){return m},toc:function(){return o}});var a=n(83117),i=n(80102),l=(n(67294),n(3905)),r=["components"],p={},k=void 0,m={unversionedId:"network/\u8fd0\u8f93\u5c42/\u4f7f\u7528wireshark\u5206\u6790TCP",id:"network/\u8fd0\u8f93\u5c42/\u4f7f\u7528wireshark\u5206\u6790TCP",title:"\u4f7f\u7528wireshark\u5206\u6790TCP",description:"Wireshark \u662f\u4e00\u4e2a\u514d\u8d39\u5f00\u6e90\u7684\u7f51\u7edc\u6570\u636e\u5305\u5206\u6790\u8f6f\u4ef6\uff0c\u4ed6\u80fd\u6e05\u695a\u5730\u663e\u793a\u5206\u5c42\u534f\u8bae\u7684\u72b6\u6001\uff0c\u4ece\u7269\u7406\u5c42\u5230\u5e94\u7528\u5c42\u7684\u6570\u636e\u4f20\u9012\u4ee5\u53ca\u76f8\u5173\u534f\u8bae\u7684\u4f7f\u7528\u90fd\u80fd\u5c55\u793a\u51fa\u6765\uff0c\u5341\u5206\u5f3a\u5927\uff01",source:"@site/docs/network/\u8fd0\u8f93\u5c42/\u4f7f\u7528wireshark\u5206\u6790TCP.md",sourceDirName:"network/\u8fd0\u8f93\u5c42",slug:"/network/\u8fd0\u8f93\u5c42/\u4f7f\u7528wireshark\u5206\u6790TCP",permalink:"/docs/network/\u8fd0\u8f93\u5c42/\u4f7f\u7528wireshark\u5206\u6790TCP",draft:!1,editUrl:"https://github.com/wood3n/icodex-next/tree/master/docs/network/\u8fd0\u8f93\u5c42/\u4f7f\u7528wireshark\u5206\u6790TCP.md",tags:[],version:"current",frontMatter:{},sidebar:"network",previous:{title:"TCP\u62a5\u6587",permalink:"/docs/network/\u8fd0\u8f93\u5c42/TCP\u62a5\u6587"},next:{title:"\u7f51\u901f\u4e0e\u5e26\u5bbd",permalink:"/docs/network/\u7f51\u901f\u4e0e\u5e26\u5bbd"}},u={},o=[{value:"\u63e1\u624b",id:"\u63e1\u624b",level:3},{value:"\u5ba2\u6237\u7aef\u53d1\u8d77\u8fde\u63a5\u8bf7\u6c42",id:"\u5ba2\u6237\u7aef\u53d1\u8d77\u8fde\u63a5\u8bf7\u6c42",level:4},{value:"\u670d\u52a1\u7aef\u540c\u610f\u5efa\u7acb\u8fde\u63a5",id:"\u670d\u52a1\u7aef\u540c\u610f\u5efa\u7acb\u8fde\u63a5",level:4},{value:"\u5ba2\u6237\u7aef\u56de\u5e94\u51c6\u5907\u5efa\u7acb\u8fde\u63a5",id:"\u5ba2\u6237\u7aef\u56de\u5e94\u51c6\u5907\u5efa\u7acb\u8fde\u63a5",level:4},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879",level:4},{value:"\u6570\u636e\u4f20\u8f93",id:"\u6570\u636e\u4f20\u8f93",level:3},{value:"\u65ad\u5f00\u8fde\u63a5",id:"\u65ad\u5f00\u8fde\u63a5",level:3},{value:"\u5ba2\u6237\u7aef\u53d1\u8d77\u91ca\u653e\u8fde\u63a5\u8bf7\u6c42",id:"\u5ba2\u6237\u7aef\u53d1\u8d77\u91ca\u653e\u8fde\u63a5\u8bf7\u6c42",level:4},{value:"\u670d\u52a1\u7aef\u786e\u8ba4\u91ca\u653e\u8fde\u63a5",id:"\u670d\u52a1\u7aef\u786e\u8ba4\u91ca\u653e\u8fde\u63a5",level:4},{value:"\u5ba2\u6237\u7aef\u786e\u8ba4\u91ca\u653e\u8fde\u63a5",id:"\u5ba2\u6237\u7aef\u786e\u8ba4\u91ca\u653e\u8fde\u63a5",level:4},{value:"TIME-WAIT",id:"time-wait",level:4}],d={toc:o};function c(e){var t=e.components,p=(0,i.Z)(e,r);return(0,l.kt)("wrapper",(0,a.Z)({},d,p,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Wireshark \u662f\u4e00\u4e2a\u514d\u8d39\u5f00\u6e90\u7684\u7f51\u7edc\u6570\u636e\u5305\u5206\u6790\u8f6f\u4ef6\uff0c\u4ed6\u80fd\u6e05\u695a\u5730\u663e\u793a\u5206\u5c42\u534f\u8bae\u7684\u72b6\u6001\uff0c\u4ece\u7269\u7406\u5c42\u5230\u5e94\u7528\u5c42\u7684\u6570\u636e\u4f20\u9012\u4ee5\u53ca\u76f8\u5173\u534f\u8bae\u7684\u4f7f\u7528\u90fd\u80fd\u5c55\u793a\u51fa\u6765\uff0c\u5341\u5206\u5f3a\u5927\uff01"),(0,l.kt)("p",null,"\u7528 Wireshark \u5206\u6790 TCP \u4f20\u8f93\u6709\u5f88\u91cd\u8981\u7684\u4e24\u70b9\u4f7f\u7528\u65b9\u9762\u7684\u9700\u8981\u6ce8\u610f\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5de6\u4fa7\u7684\u72b6\u6001\u6761\u548c\u5c0f\u5bf9\u52fe\u80fd\u5c06 TCP \u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u4e24\u6761\u62a5\u6587\u5bf9\u5e94\u8d77\u6765\uff0c\u5f53\u9f20\u6807\u70b9\u51fb\u67d0\u4e00\u6761\u540e\uff0c\u4f5c\u4e3a\u8be5\u6761\u7684\u54cd\u5e94 TCP \u524d\u9762\u5c31\u4f1a\u6709\u4e00\u4e2a\u5c0f\u5bf9\u52fe\uff1b\u800c\u72b6\u6001\u6761\u8fd9\u4e2a\u865a\u7ebf\u6846\u5c31\u8868\u793a\u4e00\u6761 TCP \u8fde\u63a5\uff1b\u5982\u679c\u70b9\u4e86\u4e0b\u4e00\u6761\u53d1\u73b0\u865a\u7ebf\u6846\u6ca1\u628a\u5b83\u5305\u542b\u5728\u521a\u624d\u7684\u865a\u7ebf\u6846\u5185\uff0c\u5c31\u8868\u793a\u8fd9\u4e00\u6761\u548c\u4e0a\u4e00\u6761\u9009\u7684\u4e0d\u5c5e\u4e8e\u540c\u4e00\u4e2a TCP \u8fde\u63a5\u3002")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20200805110025903",src:n(48646).Z,width:"1714",height:"534"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e0b\u9762\u7684 TCP \u9996\u90e8\u5206\u6790\u4e5f\u4f1a\u5305\u542b\u8be5\u6761 TCP \u662f\u54cd\u5e94\u8c01")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20200805110414111",src:n(39949).Z,width:"1255",height:"884"})),(0,l.kt)("h3",{id:"\u63e1\u624b"},"\u63e1\u624b"),(0,l.kt)("p",null,"TCP \u8fde\u63a5\u5efa\u7acb\u7684\u8fc7\u7a0b\u53eb\u505a\u63e1\u624b\uff08handshake\uff09\uff0c\u63e1\u624b\u9700\u8981\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u4ea4\u6362\u4e09\u4e2a TCP \u62a5\u6587\uff0c\u5176\u5b9e\u51c6\u786e\u6765\u8bb2\u8fd9\u662f\u4e00\u6b21\u63e1\u624b\u4e09\u62a5\u6587\u4ea4\u6362\u7684\u8fc7\u7a0b\uff0c\u4f46\u662f\u6d41\u884c\u4e0a\u7528\u8bed\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"\u4e09\u6b21\u63e1\u624b"),"\u3002"),(0,l.kt)("p",null,"\u8fd9\u4e2a\u8fc7\u7a0b\u901a\u8fc7 wireshake \u53ef\u4ee5\u6e05\u695a\u7684\u89c2\u5bdf\u5230\uff0c\u4ee5\u6d4f\u89c8\u5668\u8bf7\u6c42 HTTP \u534f\u8bae\u7684\u67d0\u4e2a\u7f51\u7ad9\u5730\u5740 106.3.45.11 \u4e3a\u4f8b\uff0c\u4f7f\u7528 wireshark \u8fc7\u6ee4\u8bf7\u6c42",(0,l.kt)("inlineCode",{parentName:"p"},"ip.addr == 106.3.45.11"),"\u7ecf\u8fc7\u4e0b\u56fe\u7684\u6d41\u7a0b\uff0c\u5728\u8fd9\u4e2a\u6d41\u7a0b\u4e2d\u6709\u4ee5\u4e0b\u89c4\u5b9a\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u540c\u6b65\u4f4d",(0,l.kt)("inlineCode",{parentName:"li"},"SYN"),"\u7f6e",(0,l.kt)("inlineCode",{parentName:"li"},"1"),"\u7684\u62a5\u6587\u4e0d\u80fd\u643a\u5e26\u6570\u636e\uff0c\u4f46\u662f\u8981\u6d88\u8017\u4e00\u4e2a\u5e8f\u53f7\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u7aef\u8fd4\u56de\u7684",(0,l.kt)("inlineCode",{parentName:"li"},"SYN"),"\u548c",(0,l.kt)("inlineCode",{parentName:"li"},"ACK"),"\u62a5\u6587\u9700\u8981\u6d88\u8017\u6389\u4e00\u4e2a\u5e8f\u53f7\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u53ea\u6709",(0,l.kt)("inlineCode",{parentName:"li"},"ACK"),"\u7f6e",(0,l.kt)("inlineCode",{parentName:"li"},"1"),"\u7684\u62a5\u6587\u624d\u80fd\u643a\u5e26\u6570\u636e\uff0c\u6b64\u65f6\u7684\u786e\u8ba4\u53f7\u624d\u6709\u6548\uff1b",(0,l.kt)("inlineCode",{parentName:"li"},"ACK"),"\u62a5\u6587\u4e0d\u643a\u5e26\u6570\u636e\u5219\u4e0d\u6d88\u8017\u5e8f\u53f7")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20200809162242700",src:n(90344).Z,width:"644",height:"728"})),(0,l.kt)("h4",{id:"\u5ba2\u6237\u7aef\u53d1\u8d77\u8fde\u63a5\u8bf7\u6c42"},"\u5ba2\u6237\u7aef\u53d1\u8d77\u8fde\u63a5\u8bf7\u6c42"),(0,l.kt)("p",null,"\u9996\u5148\uff0c\u5ba2\u6237\u7aef\u60f3\u670d\u52a1\u5668\u53d1\u8d77\u8fde\u63a5\u8bf7\u6c42\uff0c\u901a\u8fc7 wireshark \u6293\u5305\u5de5\u5177\uff0c\u53ef\u4ee5\u6e05\u695a\u7684\u89e3\u6790\u51fa TCP \u62a5\u6587\u9996\u90e8\u7684\u6240\u6709\u5b57\u6bb5\u503c\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Source Port\uff1a\u6765\u6e90\u7aef\u53e3\uff0c\u4e5f\u5c31\u662f\u6d4f\u89c8\u5668\u53d1\u51fa\u8bf7\u6c42\u8fde\u63a5\u7684\u7aef\u53e3",(0,l.kt)("inlineCode",{parentName:"li"},"11374")),(0,l.kt)("li",{parentName:"ul"},"Destination Port\uff1a80\uff0c\u4e5f\u5c31\u662f\u9ed8\u8ba4 HTTP \u534f\u8bae\u7684\u54cd\u5e94\u7aef\u53e3",(0,l.kt)("inlineCode",{parentName:"li"},"80")),(0,l.kt)("li",{parentName:"ul"},"Sequence number\uff1a0\uff0c\u8fd9\u4e2a\u5e8f\u53f7\u662f wireshark \u505a\u7684\u76f8\u5bf9\u5f53\u524d TCP \u5efa\u7acb\u8fde\u63a5\u7684\u5e8f\u53f7\uff0c\u4e0d\u662f\u771f\u5b9e\u7684\u5e8f\u53f7"),(0,l.kt)("li",{parentName:"ul"},"Sequence number (raw)\uff1a 3835654651\uff0c\u8fd9\u4e2a\u5e8f\u53f7\u624d\u662f\u771f\u5b9e\u7684 TCP \u62a5\u6587\u9996\u90e8\u7684\u5e8f\u53f7\uff0c\u4e5f\u5c31\u662f",(0,l.kt)("inlineCode",{parentName:"li"},"seq = 3835654651"),"\uff0c\u63a5\u4e0b\u6765\u7684\u8bf7\u6c42\u53ea\u770b\u8fd9\u4e2a\u7684\u53d8\u5316"),(0,l.kt)("li",{parentName:"ul"},"Acknowledgment number\uff1a0\uff0c\u786e\u8ba4\u53f7"),(0,l.kt)("li",{parentName:"ul"},"Flags\uff1a\u4e5f\u5c31\u662f\u63a7\u5236\u4f4d\u90e8\u5206\uff0c\u53ef\u4ee5\u770b\u5230\u6b64\u65f6\u7684\u6807\u5fd7\u4f4d\u662f",(0,l.kt)("inlineCode",{parentName:"li"},"SYN"),"\u662f",(0,l.kt)("inlineCode",{parentName:"li"},"1"),"\uff1b\u800c\u786e\u8ba4\u8fde\u63a5\u63a7\u5236\u4f4d",(0,l.kt)("inlineCode",{parentName:"li"},"ACK"),"\u662f",(0,l.kt)("inlineCode",{parentName:"li"},"0"))),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20200804221646631",src:n(88097).Z,width:"1325",height:"917"})),(0,l.kt)("h4",{id:"\u670d\u52a1\u7aef\u540c\u610f\u5efa\u7acb\u8fde\u63a5"},"\u670d\u52a1\u7aef\u540c\u610f\u5efa\u7acb\u8fde\u63a5"),(0,l.kt)("p",null,"\u63a5\u4e0b\u6765\u670d\u52a1\u7aef\u6536\u5230\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\uff0c\u540c\u610f\u5efa\u7acb\u8fde\u63a5\uff0c\u53d1\u9001\u81ea\u5df1\u7684\u786e\u8ba4\u8fde\u63a5 TCDP \u62a5\u6587\uff0c\u53ef\u4ee5\u770b\u5230\u6b64\u65f6\u7684 TCP \u9996\u90e8\u5b57\u6bb5\u53d8\u6210\u4e86\u4ee5\u4e0b\u8fd9\u4e9b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Source Port\uff1a\u6765\u6e90\u7aef\u53e3\uff0c\u4ece\u670d\u52a1\u5668\u5f80\u5ba2\u6237\u7aef\u53d1\uff0c\u6240\u4ee5\u7aef\u53e3\u5c31\u662f\u670d\u52a1\u5668\u7684\u7aef\u53e3",(0,l.kt)("inlineCode",{parentName:"li"},"80"),"\u5566"),(0,l.kt)("li",{parentName:"ul"},"Destination Port: 11374\uff0c\u4e5f\u5c31\u662f\u5ba2\u6237\u7aef\u7684\u63a5\u6536\u7aef\u53e3"),(0,l.kt)("li",{parentName:"ul"},"Sequence number (raw): 1610539220\uff0c\u6b64\u65f6\u7684\u670d\u52a1\u7aef\u7684",(0,l.kt)("inlineCode",{parentName:"li"},"seq = 1610539220")),(0,l.kt)("li",{parentName:"ul"},"Acknowledgment number (raw): 3835654652\uff0c\u670d\u52a1\u7aef\u7684\u786e\u8ba4\u53f7",(0,l.kt)("inlineCode",{parentName:"li"},"ack = 3835654652"),"\uff0c\u662f\u4e0a\u6b21\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u5e8f\u53f7 + 1"),(0,l.kt)("li",{parentName:"ul"},"Flags\uff1a\u4e5f\u5c31\u662f\u63a7\u5236\u4f4d\u90e8\u5206\uff0c\u53ef\u4ee5\u770b\u5230\u6b64\u65f6\u7684\u6807\u5fd7\u4f4d\u662f",(0,l.kt)("inlineCode",{parentName:"li"},"SYN"),"\u662f",(0,l.kt)("inlineCode",{parentName:"li"},"1"),"\uff1b\u800c\u786e\u8ba4\u8fde\u63a5\u63a7\u5236\u4f4d",(0,l.kt)("inlineCode",{parentName:"li"},"ACK"),"\u4e5f\u7f6e",(0,l.kt)("inlineCode",{parentName:"li"},"1"),"\u4e86")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20200804222154838",src:n(46650).Z,width:"1426",height:"914"})),(0,l.kt)("h4",{id:"\u5ba2\u6237\u7aef\u56de\u5e94\u51c6\u5907\u5efa\u7acb\u8fde\u63a5"},"\u5ba2\u6237\u7aef\u56de\u5e94\u51c6\u5907\u5efa\u7acb\u8fde\u63a5"),(0,l.kt)("p",null,"\u5ba2\u6237\u7aef\u6536\u5230\u670d\u52a1\u7aef\u5efa\u7acb\u8fde\u63a5\u7684\u54cd\u5e94\uff0c\u8fd8\u9700\u8981\u518d\u6b21\u53d1\u9001\u786e\u8ba4\u81ea\u5df1\u4e5f\u80fd\u5efa\u7acb\u8fde\u63a5\u7684\u56de\u5e94\uff0c\u6b64\u65f6\u7684 TCP \u9996\u90e8\u4fe1\u606f\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Sequence number (raw): 3835654652\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"seq = 3835654652"),"\uff0c\u662f\u4e0a\u6b21\u670d\u52a1\u7aef\u54cd\u5e94 TCP \u62a5\u6587\u9996\u90e8\u7684\u786e\u8ba4\u53f7 + 1"),(0,l.kt)("li",{parentName:"ul"},"Acknowledgment number (raw): 1610539221\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"ack = 1610539221"),"\uff0c\u6307\u793a\u670d\u52a1\u7aef\u4e0b\u6b21\u53d1\u9001\u62a5\u6587\u7684\u5e8f\u53f7\uff0c\u4e5f\u5c31\u662f\u4e0a\u6b21\u670d\u52a1\u7aef TCP \u62a5\u6587\u9996\u90e8\u7684\u5e8f\u53f7 + 1"),(0,l.kt)("li",{parentName:"ul"},"Flags\uff1a\u6b64\u65f6\u5ba2\u6237\u7aef\u7684\u786e\u8ba4\u8fde\u63a5\u63a7\u5236\u4f4d",(0,l.kt)("inlineCode",{parentName:"li"},"ACK"),"\u4e5f\u7f6e\u4e3a",(0,l.kt)("inlineCode",{parentName:"li"},"1"),"\u4e86\uff0c\u800c",(0,l.kt)("inlineCode",{parentName:"li"},"SYN"),"\u53c8\u7f6e\u4e3a",(0,l.kt)("inlineCode",{parentName:"li"},"0"),"\u4e86")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20200804222745939",src:n(95955).Z,width:"1183",height:"833"})),(0,l.kt)("h4",{id:"\u6ce8\u610f\u4e8b\u9879"},"\u6ce8\u610f\u4e8b\u9879"),(0,l.kt)("p",null,"\u4ece TCP \u5efa\u7acb\u8fde\u63a5\u7684\u8fc7\u7a0b\u4e2d\u4e0d\u96be\u5f97\u51fa\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5728 TCP \u4ece\u5efa\u7acb\u8fde\u63a5\u5230\u6700\u540e\u91ca\u653e\u8fde\u63a5\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53ea\u6709\u7b2c\u4e00\u6b21\u4f20\u9012 TCP \u62a5\u6587\u65f6",(0,l.kt)("inlineCode",{parentName:"li"},"ACK = 0"),"\uff0c\u4e5f\u5c31\u662f\u53ea\u8981\u770b\u5230\u5355\u72ec\u7684",(0,l.kt)("inlineCode",{parentName:"li"},"SYN"),"\u800c\u6ca1\u6709\u5176\u4ed6\u63a7\u5236\u4f4d\uff0c\u90a3\u4e48\u5c31\u8868\u793a\u8fd9\u4e2a TCP \u4f20\u8f93\u662f\u5efa\u7acb\u8fde\u63a5\u7684\u7b2c\u4e00\u4e2a\u8bf7\u6c42\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u5728\u4f20\u8f93\u6570\u636e\u7684\u8fc7\u7a0b\u4e2d\uff0c\u59cb\u7ec8\u6709\u4ee5\u4e0b\u7b49\u5f0f\u6210\u7acb\uff1a")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("inlineCode",{parentName:"p"},"ack")," = \u63a5\u6536\u7684\u6700\u540e\u4e00\u4e2a TCP \u62a5\u6587\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"seq")," + \u6570\u636e\u957f\u5ea6"),(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("inlineCode",{parentName:"p"},"seq")," = \u63a5\u6536\u7684\u6700\u540e\u4e00\u4e2a TCP \u62a5\u6587\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"ack"))),(0,l.kt)("h3",{id:"\u6570\u636e\u4f20\u8f93"},"\u6570\u636e\u4f20\u8f93"),(0,l.kt)("p",null,"\u5728 wireshark \u4e2d\u89c2\u5bdf\u5230\uff0c\u5ba2\u6237\u7aef\u53d1\u8d77 HTTP GET \u8bf7\u6c42\uff0c\u8fd9\u65f6\u5e95\u4e0b\u7684\u5206\u6790\u6846\u5c31\u4f1a\u591a\u51fa\u6765\u4e00\u4e2a HTTP \u534f\u8bae\u7684\u8bf7\u6c42\u5934\u5206\u6790\uff0c\u4e0d\u770b\u8fd9\u4e2a\u8fd8\u662f\u770b\u8fd0\u8f93\u5c42\u7684 TCP \u534f\u8bae\uff0c\u6b64\u65f6\u7684 TCP \u62a5\u6587\u9996\u90e8\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Sequence number (raw): 1354298230\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"seq = 1354298230")),(0,l.kt)("li",{parentName:"ul"},"Acknowledgment number (raw): 3832919684\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"ack = 3832919684")),(0,l.kt)("li",{parentName:"ul"},"Flags\uff1a\u63a7\u5236\u4f4d",(0,l.kt)("inlineCode",{parentName:"li"},"ACK = 1")),(0,l.kt)("li",{parentName:"ul"},"TCP payload (458 bytes)\uff1a\u6700\u540e\u8fd8\u6709\u4e00\u4e2a TCP payload\uff0c\u8fd9\u4e5f\u5c31\u662f TCP \u62a5\u6587\u643a\u5e26\u7684\u6570\u636e\u90e8\u5206\u7684\u5b57\u8282\u957f\u5ea6\uff0c\u4e5f\u5c31\u662f HTTP \u534f\u8bae\u7684\u62a5\u6587\u957f\u5ea6")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20200804231623936",src:n(45452).Z,width:"1225",height:"863"})),(0,l.kt)("p",null,"\u63a5\u4e0b\u6765\u5f00\u59cb\u627e wireshark \u4e2d HTTP OK \u7684\u54cd\u5e94\uff0c\u53ef\u4ee5\u770b\u5230 TCP \u62a5\u6587\u7684\u9996\u90e8\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Sequence number: 3832919684\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"seq = 3832919684")),(0,l.kt)("li",{parentName:"ul"},"Acknowledgment number: 1354298688\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"ack = 1354298688"),"\uff0c\u5bf9\u5e94 HTTP \u8bf7\u6c42\u65f6 TCP \u9996\u90e8\u7684\u5e8f\u53f7\u52a0\u4e0a\u6570\u636e\u957f\u5ea6\uff0c\u5373",(0,l.kt)("inlineCode",{parentName:"li"},"1354298230+458 = 1354298688")),(0,l.kt)("li",{parentName:"ul"},"Flags\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"ACK = 1"))),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20200804233155214",src:n(96477).Z,width:"1268",height:"899"})),(0,l.kt)("h3",{id:"\u65ad\u5f00\u8fde\u63a5"},"\u65ad\u5f00\u8fde\u63a5"),(0,l.kt)("p",null,"TCP \u8fde\u63a5\u91ca\u653e\u7684\u8fc7\u7a0b\u76f8\u6bd4\u63e1\u624b\u8981\u590d\u6742\u4e00\u70b9\uff0c\u91ca\u653e\u8fde\u63a5\u7684\u8fc7\u7a0b\u53cc\u65b9\u90fd\u53ef\u4ee5\u53d1\u8d77\uff0c\u91ca\u653e\u8fde\u63a5\u7684\u4fe1\u53f7\u5c31\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"FIN"),"\u63a7\u5236\u4f4d\u7684\u5207\u6362\uff0c\u5f53\u9047\u5230 TCP \u62a5\u6587\u9996\u90e8",(0,l.kt)("inlineCode",{parentName:"p"},"FIN = 1"),"\u65f6\u5c31\u8868\u793a\u53d1\u9001\u65b9\u8981\u8fdb\u884c\u91ca\u653e\u8fde\u63a5\u7684\u64cd\u4f5c\u4e86\u3002"),(0,l.kt)("p",null,"\u73b0\u5728\u4f7f\u7528 wireshark \u89c2\u5bdf\u91ca\u653e\u8fde\u63a5\u7684\u8fc7\u7a0b\uff0c\u8fde\u63a5\u91ca\u653e\u7684\u8fc7\u7a0b\u4e00\u5b9a\u8981\u770b Wireshark \u5de6\u4fa7\u865a\u7ebf\u6846\u5305\u88f9\u7684\u5b8c\u6574\u7684 TCP \u8fde\u63a5\u8fc7\u7a0b\uff0c\u4e0d\u5728\u865a\u7ebf\u6846\u5185\u7684\u8bf7\u6c42\u90fd\u4e0d\u5c5e\u4e8e\u8be5\u6761 TCP \u8fde\u63a5\u7684\uff0c\u6240\u4ee5\u4e00\u822c\u90fd\u662f\u627e\u6700\u540e\u4e00\u6761",(0,l.kt)("inlineCode",{parentName:"p"},"ACK"),"\u3002"),(0,l.kt)("h4",{id:"\u5ba2\u6237\u7aef\u53d1\u8d77\u91ca\u653e\u8fde\u63a5\u8bf7\u6c42"},"\u5ba2\u6237\u7aef\u53d1\u8d77\u91ca\u653e\u8fde\u63a5\u8bf7\u6c42"),(0,l.kt)("p",null,"\u4ee5\u5ba2\u6237\u7aef\u53d1\u8d77\u91ca\u653e\u8fde\u63a5\u8bf7\u6c42\u4e3a\u4f8b\uff0c\u4e00\u822c\u4e5f\u5c31\u662f\u4e3b\u52a8\u5173\u95ed\u6d4f\u89c8\u5668\u9875\u9762\u5c31\u4f1a\u7531\u5ba2\u6237\u7aef\u53d1\u8d77\u65ad\u5f00\u8fde\u63a5\u8bf7\u6c42\uff0c\u89c2\u5bdf\u5230 TCP \u9996\u90e8\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Sequence number: 1280378407\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"seq = 1280378407")),(0,l.kt)("li",{parentName:"ul"},"Acknowledgment number: 4092453323\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"ack = 4092453323")),(0,l.kt)("li",{parentName:"ul"},"Flags\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"ACK = 1"),"\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"FIN = 1"))),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20200805110741358",src:n(47833).Z,width:"1469",height:"842"})),(0,l.kt)("p",null,"####\u670d\u52a1\u7aef\u540c\u610f\u91ca\u653e"),(0,l.kt)("p",null,"\u5728 Wireshark \u4e2d\u627e\u5230 138 \u7684\u54cd\u5e94\u62a5\u6587\u65f6 152\uff0c\u6b64\u65f6\u670d\u52a1\u7aef\u7684 TCP \u9996\u90e8\u662f\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Sequence number: 4092453323\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"seq = 4092453323")),(0,l.kt)("li",{parentName:"ul"},"Acknowledgment number: 1280378408\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"ack = 1280378408")),(0,l.kt)("li",{parentName:"ul"},"Flags\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"ACK = 1"))),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20200805111104178",src:n(11680).Z,width:"1460",height:"895"})),(0,l.kt)("h4",{id:"\u670d\u52a1\u7aef\u786e\u8ba4\u91ca\u653e\u8fde\u63a5"},"\u670d\u52a1\u7aef\u786e\u8ba4\u91ca\u653e\u8fde\u63a5"),(0,l.kt)("p",null,"\u7d27\u63a5\u7740 ACK\uff0c\u670d\u52a1\u7aef\u4f1a\u518d\u6b21\u53d1\u9001\u4e00\u6761\u786e\u8ba4\u81ea\u5df1\u4e5f\u8981\u91ca\u653e\u8fde\u63a5\u7684\u8bf7\u6c42\uff0c\u8ba9\u5ba2\u6237\u7aef\u540c\u610f\uff0c",(0,l.kt)("strong",{parentName:"p"},"\u53ef\u4ee5\u770b\u5230\u6b64\u65f6\u7684\u5e8f\u53f7\u8fd8\u6709\u786e\u8ba4\u53f7\u90fd\u548c\u4e0a\u4e00\u6761\u5b8c\u5168\u4e00\u6837"),"\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Sequence number: 4092453323\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"seq = 4092453323")),(0,l.kt)("li",{parentName:"ul"},"Acknowledgment number: 1280378408\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"ack = 1280378408")),(0,l.kt)("li",{parentName:"ul"},"Flags\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"ACK = 1"),"\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"FIN = 1"))),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20200805111400346",src:n(24024).Z,width:"1468",height:"862"})),(0,l.kt)("h4",{id:"\u5ba2\u6237\u7aef\u786e\u8ba4\u91ca\u653e\u8fde\u63a5"},"\u5ba2\u6237\u7aef\u786e\u8ba4\u91ca\u653e\u8fde\u63a5"),(0,l.kt)("p",null,"\u5ba2\u6237\u7aef\u8981\u5bf9\u670d\u52a1\u7aef\u786e\u8ba4\u91ca\u653e\u8fde\u63a5\u7684\u8bf7\u6c42\u505a\u51fa\u54cd\u5e94\uff0c\u8fd9\u6837\u53cc\u65b9\u90fd\u786e\u8ba4\u91ca\u653e\u8fde\u63a5\uff0c\u5c31\u8fdb\u5165",(0,l.kt)("inlineCode",{parentName:"p"},"TIME-WAIT"),"(\u65f6\u95f4\u7b49\u5f85)\u72b6\u6001"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Sequence number: 1280378408\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"seq = 1280378408")),(0,l.kt)("li",{parentName:"ul"},"Acknowledgment number: 4092453323\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"ack = 4092453323"),"\uff0c\u548c\u4e0a\u4e00\u6761\u670d\u52a1\u7aef\u8fd4\u56de\u7684\u5e8f\u53f7\u4e00\u81f4"),(0,l.kt)("li",{parentName:"ul"},"Flags\uff1a",(0,l.kt)("inlineCode",{parentName:"li"},"ACK = 1"))),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"image-20200805111928369",src:n(25868).Z,width:"1462",height:"897"})),(0,l.kt)("h4",{id:"time-wait"},"TIME-WAIT"),(0,l.kt)("p",null,"\u68b3\u7406\u4e00\u4e0b\u4e0a\u8ff0\u5173\u95ed\u8fde\u63a5\u7684\u8bf7\u6c42\u6d41\u7a0b\uff0c\u53cc\u65b9\u4e00\u5171\u6536\u53d1\u4e86 4 \u4e2a\u62a5\u6587\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5ba2\u6237\u7aef\u8bf7\u6c42\u5173\u95ed\u8fde\u63a5\uff0c\u53d1\u9001",(0,l.kt)("inlineCode",{parentName:"li"},"FIN = 1"),"\u7684 TCP \u62a5\u6587\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u670d\u52a1\u7aef\u6536\u5230\u5173\u95ed\u8fde\u63a5\u8bf7\u6c42\u8868\u793a\u540c\u610f\uff0c\u8ba9\u4e3b\u52a8\u65b9\u4e0d\u4f1a\u56e0\u4e3a\u6ca1\u6709\u6536\u5230\u5e94\u7b54\u800c\u7ee7\u7eed\u53d1\u9001\u65ad\u5f00\u8fde\u63a5\u7684\u8bf7\u6c42\uff1b\u4e8e\u662f\u670d\u52a1\u7aef\u53d1\u9001\u540c\u610f\u5173\u95ed\u8fde\u63a5\u7684\u54cd\u5e94",(0,l.kt)("inlineCode",{parentName:"li"},"ACK = 1"),"\uff1b\u5ba2\u6237\u7aef\u5728\u6536\u5230\u8fd9\u4e2a\u54cd\u5e94\u62a5\u6587\u4ee5\u540e\uff0c\u56e0\u4e3a\u662f\u5ba2\u6237\u7aef\u4e3b\u52a8\u53d1\u8d77\u7684\u5173\u95ed\u8bf7\u6c42\u4e5f\u5c31\u8868\u793a\u5ba2\u6237\u7aef\u6ca1\u6709\u6570\u636e\u8981\u4f20\u8f93\u4e86\uff0c\u4f46\u662f\u5b83\u4e0d\u77e5\u9053\u670d\u52a1\u7aef\u8fd8\u6709\u6ca1\u6709\u6570\u636e\u8981\u4f20\uff0c\u6240\u4ee5\u5ba2\u6237\u7aef\u8981\u8fdb\u5165\u4e00\u4e2a\u7b49\u5f85\u7684\u72b6\u6001",(0,l.kt)("inlineCode",{parentName:"li"},"FIN-WAIT-1"),"\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u5f53\u670d\u52a1\u7aef\u6ca1\u6709\u6570\u636e\u8981\u4f20\u8f93\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u5411\u5ba2\u6237\u7aef\u4e5f\u53d1\u9001\u4e00\u4e2a\u8bf7\u6c42\u5173\u95ed\u8fde\u63a5\u7684\u62a5\u6587",(0,l.kt)("inlineCode",{parentName:"li"},"FIN = 1"),"\uff0c\u8ba9\u5ba2\u6237\u7aef\u77e5\u9053\u670d\u52a1\u7aef\u6ca1\u6709\u6570\u636e\u8981\u4f20\u4e86\uff0c\u653e\u5fc3\u5173\u95ed\u8fde\u63a5\u5427\uff0c\u540c\u65f6\u4e5f\u8868\u793a\u81ea\u5df1\u4e5f\u8981\u5173\u95ed\u8fde\u63a5\u4e86\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u5ba2\u6237\u7aef\u5728\u6536\u5230\u670d\u52a1\u7aef\u5173\u95ed\u8fde\u63a5\u7684\u8bf7\u6c42\u540e\u4e5f\u4f1a\u8868\u793a\u540c\u610f",(0,l.kt)("inlineCode",{parentName:"li"},"ACK = 1"),"\uff0c\u7136\u540e\u5ba2\u6237\u7aef\u4f1a\u8fdb\u5165\u4e00\u4e2a\u5b9a\u65f6\u7b49\u5f85",(0,l.kt)("inlineCode",{parentName:"li"},"TIME-WAIT"),"\u7684\u72b6\u6001\uff0c\u7b49\u5f85\u5565\u5462\uff1f\u8bbe\u60f3\u5982\u679c\u5ba2\u6237\u7aef\u540c\u610f\u670d\u52a1\u7aef\u5173\u95ed TCP \u8fde\u63a5\u7684\u8bf7\u6c42\u6ca1\u9001\u5230\u5462\uff1f\u90a3\u670d\u52a1\u7aef\u4f1a\u4e00\u76f4\u5904\u4e8e\u7b49\u5f85\u72b6\u6001\uff0c\u5b83\u4e0d\u77e5\u9053\u5ba2\u6237\u7aef\u540c\u4e0d\u540c\u610f\u5b83\u5173\u554a\uff0c\u6240\u4ee5\u5728\u8fd9\u4e2a\u7b49\u5f85\u65f6\u95f4\u5185\uff0c\u5982\u679c\u670d\u52a1\u7aef\u6ca1\u6709\u6536\u5230\u5ba2\u6237\u7aef\u7684\u786e\u8ba4\uff0c\u90a3\u4e48\u4f1a\u91cd\u4f20\u4e0a\u4e00\u6761\u5173\u95ed\u8fde\u63a5\u7684\u8bf7\u6c42\u62a5\u6587\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u6700\u540e\u5f53\u670d\u52a1\u7aef\u6536\u5230\u5ba2\u6237\u7aef\u7684\u786e\u8ba4\u5173\u95ed\u8fde\u63a5",(0,l.kt)("inlineCode",{parentName:"li"},"ACK"),"\u540e\uff0c\u5c31\u771f\u7684\u5173\u95ed\u8fde\u63a5\u4e86\uff1b\u800c\u5ba2\u6237\u7aef\u5219\u5728\u7b49\u5f85",(0,l.kt)("inlineCode",{parentName:"li"},"TIME-WAIT"),"\u7684\u65f6\u95f4\u540e\u4e5f\u5173\u95ed\u8fde\u63a5\uff0c\u53cc\u65b9\u90fd\u8fdb\u5165",(0,l.kt)("inlineCode",{parentName:"li"},"CLOSED"),"\u72b6\u6001\u3002")))}c.isMDXComponent=!0},88097:function(e,t,n){t.Z=n.p+"assets/images/image-20200804221646631-2113309334e0aac69550f3663601a401.png"},46650:function(e,t,n){t.Z=n.p+"assets/images/image-20200804222154838-0a69541677a09bc29905a78c6dbd50a3.png"},95955:function(e,t,n){t.Z=n.p+"assets/images/image-20200804222745939-d442fc15d2d9c56a92fe752e602c241f.png"},45452:function(e,t,n){t.Z=n.p+"assets/images/image-20200804231623936-048d94d67030a2e4cac91b7d0639a65c.png"},96477:function(e,t,n){t.Z=n.p+"assets/images/image-20200804233155214-5ba5d284f2640f7aef3bcfa2346d25e1.png"},48646:function(e,t,n){t.Z=n.p+"assets/images/image-20200805110025903-b3d5429d31d066cb0b529a5b6f8b2729.png"},39949:function(e,t,n){t.Z=n.p+"assets/images/image-20200805110414111-d15b5c7bd8fa5cf219aab5d3968b59e4.png"},47833:function(e,t,n){t.Z=n.p+"assets/images/image-20200805110741358-4ee0c1f14420022c0d1c8e5224b283fd.png"},11680:function(e,t,n){t.Z=n.p+"assets/images/image-20200805111104178-7f79d4285f44a90d2211e6fe615998dc.png"},24024:function(e,t,n){t.Z=n.p+"assets/images/image-20200805111400346-08f54539e0649be07f52e71e9a0f9f06.png"},25868:function(e,t,n){t.Z=n.p+"assets/images/image-20200805111928369-126ac517605874ad8b85e5d0b09d9ee4.png"},90344:function(e,t,n){t.Z=n.p+"assets/images/image-20200809162242700-6d567b5da7789137aad0c47ec18c4f25.png"}}]);