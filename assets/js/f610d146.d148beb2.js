"use strict";(self.webpackChunkicodex_next=self.webpackChunkicodex_next||[]).push([[9848],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return k}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},A=Object.keys(e);for(a=0;a<A.length;a++)n=A[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(e);for(a=0;a<A.length;a++)n=A[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},s=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,A=e.originalType,o=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),s=p(n),k=r,u=s["".concat(o,".").concat(k)]||s[k]||d[k]||A;return n?a.createElement(u,i(i({ref:t},c),{},{components:n})):a.createElement(u,i({ref:t},c))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var A=n.length,i=new Array(A);i[0]=s;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<A;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}s.displayName="MDXCreateElement"},50916:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return o},default:function(){return k},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return d}});var a=n(83117),r=n(80102),A=(n(67294),n(3905)),i=["components"],l={tltle:"webpack\u76d1\u542c\u4ee3\u7406\u5730\u5740\u4fee\u6539\u81ea\u52a8\u91cd\u542fdevServer",authors:"oxygen"},o=void 0,p={permalink:"/2022/01/05/webpack\u76d1\u542c\u4ee3\u7406\u5730\u5740\u4fee\u6539\u81ea\u52a8\u91cd\u542fdevServer",source:"@site/blog/2022-01-05-webpack\u76d1\u542c\u4ee3\u7406\u5730\u5740\u4fee\u6539\u81ea\u52a8\u91cd\u542fdevServer.md",title:"webpack\u76d1\u542c\u4ee3\u7406\u5730\u5740\u4fee\u6539\u81ea\u52a8\u91cd\u542fdevServer",description:"image-20220105213328676",date:"2022-01-05T00:00:00.000Z",formattedDate:"2022\u5e741\u67085\u65e5",tags:[],readingTime:12.61,hasTruncateMarker:!0,authors:[{name:"Oxygen",title:"Front End Engineer",url:"https://github.com/wood3n",imageURL:"https://raw.githubusercontent.com/wood3n/wood3n/master/31716713.jpg",key:"oxygen"}],frontMatter:{tltle:"webpack\u76d1\u542c\u4ee3\u7406\u5730\u5740\u4fee\u6539\u81ea\u52a8\u91cd\u542fdevServer",authors:"oxygen"},prevItem:{title:"vuecli\u6e90\u7801\u89e3\u6790(4)",permalink:"/2022/01/23/vuecli\u6e90\u7801\u89e3\u67904"},nextItem:{title:"\u4e2a\u4eba\u7f51\u7ad9\u8fc1\u79fb",permalink:"/2022/01/04/\u4e2a\u4eba\u7f51\u7ad9\u8fc1\u79fb"}},c={authorsImageUrls:[void 0]},d=[{value:"\u80cc\u666f",id:"\u80cc\u666f",level:2},{value:"\u4ec0\u4e48\u662fchokidar",id:"\u4ec0\u4e48\u662fchokidar",level:2},{value:"fs.watchFile",id:"fswatchfile",level:3},{value:"fs.watch",id:"fswatch",level:3},{value:"chokidar.watch(paths, options)",id:"chokidarwatchpaths-options",level:3},{value:"API",id:"api",level:2},{value:"\u914d\u7f6e\u9879",id:"\u914d\u7f6e\u9879",level:3},{value:"\u76d1\u542c\u4e8b\u4ef6",id:"\u76d1\u542c\u4e8b\u4ef6",level:3},{value:"WDS \u7684 Nodejs API",id:"wds-\u7684-nodejs-api",level:2},{value:"\u5b9e\u73b0\u601d\u8def",id:"\u5b9e\u73b0\u601d\u8def",level:3}],s={toc:d};function k(e){var t=e.components,l=(0,r.Z)(e,i);return(0,A.kt)("wrapper",(0,a.Z)({},s,l,{components:t,mdxType:"MDXLayout"}),(0,A.kt)("p",null,(0,A.kt)("img",{alt:"image-20220105213328676",src:n(27619).Z,width:"562",height:"178"})),(0,A.kt)("p",null,"\u672c\u6587\u4ecb\u7ecd\u89e3\u51b3\u76d1\u542c\u5f00\u53d1\u73af\u5883\u4ee3\u7406\u5730\u5740\u66f4\u6539\u540e\u81ea\u52a8\u91cd\u542f",(0,A.kt)("inlineCode",{parentName:"p"},"webpack-dev-server"),"\u7684\u95ee\u9898\u3002"),(0,A.kt)("h2",{id:"\u80cc\u666f"},"\u80cc\u666f"),(0,A.kt)("p",null,"\u65e5\u5e38\u5f00\u53d1\u7ecf\u5e38\u9047\u5230\u7684\u4e00\u4e2a\u95ee\u9898\u662f\u5207\u6362 webpack \u7684",(0,A.kt)("inlineCode",{parentName:"p"},"proxy"),"\u5730\u5740\uff0c\u9700\u8981\u91cd\u542f",(0,A.kt)("inlineCode",{parentName:"p"},"webpack-dev-server"),"\u6216\u8005\u53e6\u5f00\u4e00\u4e2a\u7ec8\u7aef\u53bb\u521b\u5efa\u4e00\u4e2a\u65b0\u7684",(0,A.kt)("inlineCode",{parentName:"p"},"webpack-dev-server"),"\u5b9e\u4f8b\u3002"),(0,A.kt)("p",null,"\u4e3a\u4e86\u7b80\u5316\u8fd9\u4e2a\u53d8\u6001\u7684\u8fc7\u7a0b\uff0c\u4e8e\u662f\u63a2\u7d22\u501f\u52a9",(0,A.kt)("inlineCode",{parentName:"p"},"chokidar"),"\u76d1\u542c\u7cfb\u7edf\u6587\u4ef6\u7684\u80fd\u529b\uff0c\u6765\u76d1\u542c",(0,A.kt)("inlineCode",{parentName:"p"},"proxy"),"\u914d\u7f6e\u6587\u4ef6\u7684\u4fee\u6539\u5e76\u914d\u5408",(0,A.kt)("inlineCode",{parentName:"p"},"webpack-dev-server"),"\u7684 Nodejs  API\u8fbe\u5230\u81ea\u52a8\u91cd\u542f\u7684\u76ee\u7684\u3002"),(0,A.kt)("h2",{id:"\u4ec0\u4e48\u662fchokidar"},"\u4ec0\u4e48\u662fchokidar"),(0,A.kt)("p",null,(0,A.kt)("a",{parentName:"p",href:"https://github.com/paulmillr/chokidar"},"chokidar")," \u662f\u4e00\u4e2a\u57fa\u4e8e Nodejs \u7684",(0,A.kt)("inlineCode",{parentName:"p"},"fs"),"\u6a21\u5757\u5f00\u53d1\u7684\u76d1\u542c\u6587\u4ef6\u7684\u5de5\u5177\uff0c\u8de8\u5e73\u53f0\uff0c\u540c\u65f6\u89e3\u51b3\u4e86",(0,A.kt)("inlineCode",{parentName:"p"},"fs"),"\u6a21\u5757\u63d0\u4f9b\u7684\u539f\u751f\u65b9\u6cd5",(0,A.kt)("inlineCode",{parentName:"p"},"fs.watch"),"\u548c",(0,A.kt)("inlineCode",{parentName:"p"},"fs.watchFile"),"\u7684\u4e0d\u8db3\u3002"),(0,A.kt)("h3",{id:"fswatchfile"},"fs.watchFile"),(0,A.kt)("p",null,(0,A.kt)("inlineCode",{parentName:"p"},"fs.watchFile(filename[, options], listener)"),"\u7528\u6765\u76d1\u542c\u5355\u4e2a\u6587\u4ef6\u7684\u53d8\u5316\uff0c\u5176\u91c7\u7528\u8f6e\u8be2\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u6307\u5b9a",(0,A.kt)("inlineCode",{parentName:"p"},"interval"),"\u8bbe\u7f6e\u8f6e\u8be2\u65f6\u95f4\u95f4\u9694\uff0c\u9ed8\u8ba4\u662f",(0,A.kt)("inlineCode",{parentName:"p"},"5007ms"),"\uff0c\u5e76\u4e14\u5f53\u6587\u4ef6\u88ab\u8bbf\u95ee\u5c31\u4f1a\u89e6\u53d1\u56de\u8c03\u51fd\u6570",(0,A.kt)("inlineCode",{parentName:"p"},"listener"),"\u3002"),(0,A.kt)("p",null,(0,A.kt)("inlineCode",{parentName:"p"},"fs.watchFile"),"\u7684\u4e3b\u8981\u95ee\u9898\u5728\u4e8e\u91c7\u7528\u8f6e\u8be2\u7684\u65b9\u5f0f\u5bfc\u81f4\u76d1\u542c\u4e0d\u7cbe\u786e\uff0c\u5e76\u4e14 CPU \u5360\u7528\u9ad8\u3002"),(0,A.kt)("h3",{id:"fswatch"},"fs.watch"),(0,A.kt)("p",null,(0,A.kt)("inlineCode",{parentName:"p"},"fs.watch(filename[, options][, listener])"),"\u53ef\u4ee5\u76d1\u542c\u5355\u4e2a\u6587\u4ef6\u6216\u8005\u6587\u4ef6\u5939\uff0c\u53ef\u4ee5\u901a\u8fc7",(0,A.kt)("inlineCode",{parentName:"p"},"eventType"),"\u6307\u5b9a\u76d1\u542c\u6587\u4ef6\u547d\u540d\u6216\u8005\u4fee\u6539\u6587\u4ef6\u5185\u5bb9\u5bfc\u81f4\u7684\u53d8\u5316\uff0c\u4f46\u662f",(0,A.kt)("inlineCode",{parentName:"p"},"fs.watch")," API \u8de8\u5e73\u53f0\u5e76\u975e 100% \u4e00\u81f4\uff0c\u5e76\u4e14\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u4e0d\u53ef\u7528\uff0c\u81f3\u4e8e\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4e0d\u53ef\u7528\uff0c\u5b98\u65b9\u6587\u6863\u4e5f\u6ca1\u89e3\u91ca\u3002\u5728 Windows \u4e0a\uff0c\u5982\u679c\u76d1\u89c6\u76ee\u5f55\u88ab\u79fb\u52a8\u6216\u91cd\u547d\u540d\uff0c\u5219\u4e0d\u4f1a\u89e6\u53d1\u4efb\u4f55\u4e8b\u4ef6\u3002"),(0,A.kt)("h3",{id:"chokidarwatchpaths-options"},"chokidar.watch(paths, ","[options]",")"),(0,A.kt)("p",null,"chokidar \u89e3\u51b3\u4e86",(0,A.kt)("inlineCode",{parentName:"p"},"fs.watch"),"\u548c",(0,A.kt)("inlineCode",{parentName:"p"},"fs.watchFile"),"\u7684\u4e0d\u8db3\uff0c\u5e76\u4e14 API \u7b80\u5355\u6613\u7528\u4e14\u76d1\u542c\u6548\u7387\u66f4\u52a0\u9ad8\u6548\uff0c\u4f7f\u5f97 vscode \u5185\u90e8\u7684\u76d1\u542c\u6587\u4ef6\u4e5f\u4f7f\u7528\u4e86\u8fd9\u4e2a\u5de5\u5177\u3002"),(0,A.kt)("h2",{id:"api"},"API"),(0,A.kt)("h3",{id:"\u914d\u7f6e\u9879"},"\u914d\u7f6e\u9879"),(0,A.kt)("pre",null,(0,A.kt)("code",{parentName:"pre",className:"language-js"},"chokidar.watch('file', {\n  // \u662f\u5426\u6301\u4e45\u5316\u89e6\u53d1\u76d1\u542c\u4e8b\u4ef6\n  persistent: true,\n  // \u5ffd\u7565\u76d1\u542c\u7684\u6587\u4ef6\n  ignored: '*.txt',\n  // \u5f53\u8bbe\u7f6e\u4e3afalse\u65f6\u5019\uff0c\u5728 chokidar \u521d\u59cb\u5316\u5b8c\u6210\u4e4b\u524d\u65b0\u589e\u6587\u4ef6\u6216\u8005\u6587\u4ef6\u5939\u4e5f\u4f1a\u89e6\u53d1 add \u548c addDir\u4e8b\u4ef6\n  ignoreInitial: false,\n  // \u5f53\u8bbe\u7f6e\u6210 false \u65f6\uff0c\u53ea\u6709 symlink \u672c\u8eab\u4f1a\u88ab\u89c2\u5bdf\u5230\u53d8\u5316\uff0c\u800c\u4e0d\u662f\u8ddf\u968f\u94fe\u63a5\u5f15\u7528\u548c\u5192\u6ce1\u4e8b\u4ef6\u901a\u8fc7\u94fe\u63a5\u7684\u8def\u5f84\n  followSymlinks: true,\n  // \u76d1\u542c\u6587\u4ef6\u6216\u8005\u6587\u4ef6\u5939\u7684\u76f8\u5bf9\u6839\u76ee\u5f55\n  cwd: '.',\n  // \u5f53\u8bbe\u7f6e\u6210 true \u7684\u65f6\u5019\uff0c\u4f1a\u5ffd\u7565 glob \u6a21\u5f0f\u7684path\u8bbe\u7f6e\uff0c\u628a\u5b83\u4eec\u5f53\u6210\u6587\u4ef6\u540d\u7684\u4e00\u90e8\u5206\n  disableGlobbing: false,\n    // \u5f53\u8bbe\u7f6e\u6210 false\uff0c\u4f7f\u7528 fs.watchFile \u6216\u8005 fs.watch \u76d1\u542c\u6587\u4ef6\n  usePolling: false,\n    // \u9488\u5bf9 fs.watchFile \u8bbe\u7f6e\u7684\u8f6e\u8be2\u95f4\u9694\n    interval: 100,\n    binaryInterval: 300,\n  alwaysStat: false,\n  // \u8bbe\u7f6e\u591a\u5c11\u5c42\u7684\u5b50\u6587\u4ef6\u76ee\u5f55\u4f1a\u88ab\u9012\u5f52\u76d1\u542c\n  depth: 99,\n  // \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cadd\u4e8b\u4ef6\u5c06\u5728\u6587\u4ef6\u9996\u6b21\u51fa\u73b0\u5728\u78c1\u76d8\u4e0a\u65f6\u89e6\u53d1\uff0c\u6b64\u65f6\u8fd8\u6ca1\u6709\u5199\u5165\u6574\u4e2a\u6587\u4ef6\u3002\u6b64\u5916\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u5728\u5199\u5165\u6587\u4ef6\u65f6\u5c06\u89e6\u53d1\u4e00\u4e9b\u66f4\u6539\u4e8b\u4ef6\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u7279\u522b\u662f\u5728\u76d1\u89c6\u5927\u6587\u4ef6\u65f6\uff0c\u5c06\u9700\u8981\u7b49\u5f85\u5199\u64cd\u4f5c\u5b8c\u6210\uff0c\u7136\u540e\u624d\u80fd\u54cd\u5e94\u6587\u4ef6\u7684\u521b\u5efa\u6216\u4fee\u6539\u3002\u5c06awaitWriteFinish\u8bbe\u7f6e\u4e3atrue(\u6216true\u503c)\u5c06\u8f6e\u8be2\u6587\u4ef6\u5927\u5c0f\uff0c\u4fdd\u6301\u5176\u6dfb\u52a0\u548c\u66f4\u6539\u4e8b\u4ef6\uff0c\u76f4\u5230\u5927\u5c0f\u5728\u53ef\u914d\u7f6e\u7684\u65f6\u95f4\u5185\u4e0d\u53d8\u3002\u9002\u5f53\u7684\u6301\u7eed\u65f6\u95f4\u8bbe\u7f6e\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4f9d\u8d56\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u548c\u786c\u4ef6\u3002\u4e3a\u4e86\u51c6\u786e\u7684\u68c0\u6d4b\uff0c\u8fd9\u4e2a\u53c2\u6570\u5e94\u8be5\u76f8\u5bf9\u8f83\u9ad8\uff0c\u4f7f\u5f97\u6587\u4ef6\u76d1\u89c6\u7684\u54cd\u5e94\u66f4\u5c11\u3002\u8c28\u614e\u4f7f\u7528\u3002\n  awaitWriteFinish: {\n    stabilityThreshold: 2000,\n    pollInterval: 100\n  },\n    // \u6307\u793a\u662f\u5426\u76d1\u89c6\u6ca1\u6709\u8bfb\u6743\u9650\u7684\u6587\u4ef6\n  ignorePermissionErrors: false,\n  // \u76d1\u542c\u66f4\u4e3a\u7ec6\u8282\u7684\u63a7\u5236\uff0c\u5982\u679c\u4e00\u4e2a\u6587\u4ef6\u5728\u88ab\u5220\u9664\u540e\u7684100\u6beb\u79d2\u5185\u88ab\u91cd\u65b0\u6dfb\u52a0\uff0cChokidar\u4f1a\u53d1\u51fa\u4e00\u4e2achange\u4e8b\u4ef6\uff0c\u800c\u4e0d\u662funlink\u7136\u540e\u6dfb\u52a0\u3002\u5982\u679c\u9ed8\u8ba4\u7684100\u6beb\u79d2\u4e0d\u9002\u5408\u4f60\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u4e00\u4e2a\u81ea\u5b9a\u4e49\u503c\u6765\u8986\u76d6\u5b83\uff0c\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\u3002\n  atomic: true\n});\n")),(0,A.kt)("h3",{id:"\u76d1\u542c\u4e8b\u4ef6"},"\u76d1\u542c\u4e8b\u4ef6"),(0,A.kt)("p",null,(0,A.kt)("inlineCode",{parentName:"p"},"chokidar.watch"),"\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u53ef\u4ee5\u4f7f\u7528\u8be5\u5bf9\u8c61\u7684",(0,A.kt)("inlineCode",{parentName:"p"},".on(event, callback)"),"\u65b9\u6cd5\u8bbe\u7f6e\u76d1\u542c\u4e8b\u4ef6",(0,A.kt)("inlineCode",{parentName:"p"},"event"),"\u548c\u56de\u8c03\u51fd\u6570",(0,A.kt)("inlineCode",{parentName:"p"},"callback"),"\uff0c",(0,A.kt)("inlineCode",{parentName:"p"},"event"),"\u7c7b\u578b\u5982\u4e0b\uff1a"),(0,A.kt)("ul",null,(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("inlineCode",{parentName:"li"},"add"),"\uff1a\u65b0\u589e\u6587\u4ef6"),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("inlineCode",{parentName:"li"},"addDir"),"\uff1a\u65b0\u589e\u6587\u4ef6\u5939"),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("inlineCode",{parentName:"li"},"change"),"\uff1a\u6587\u4ef6\u5185\u5bb9\u53d8\u5316"),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("inlineCode",{parentName:"li"},"unlink"),"\uff1a\u5220\u9664\u6587\u4ef6"),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("inlineCode",{parentName:"li"},"unlink"),"\uff1a\u5220\u9664\u6587\u4ef6\u5939"),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("inlineCode",{parentName:"li"},"ready"),"\uff1a\u626b\u63cf\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u7ed3\u675f\uff0c\u5f00\u59cb\u76d1\u542c"),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("inlineCode",{parentName:"li"},"error"),"\uff1a\u76d1\u542c\u7a0b\u5e8f\u62a5\u9519")),(0,A.kt)("h2",{id:"wds-\u7684-nodejs-api"},"WDS \u7684 Nodejs API"),(0,A.kt)("p",null,(0,A.kt)("inlineCode",{parentName:"p"},"webpack-dev-server"),"\u63d0\u4f9b ",(0,A.kt)("a",{parentName:"p",href:"https://webpack.js.org/api/webpack-dev-server/"},"Nodejs \u7684 API"),"\uff0c\u4e5f\u5c31\u51e0\u4e2a\uff1a"),(0,A.kt)("ul",null,(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("inlineCode",{parentName:"li"},"start"),"\uff1a\u542f\u52a8 WDS\uff1b"),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("inlineCode",{parentName:"li"},"startCallback"),"\uff1a\u542f\u52a8\u5e76\u6307\u5b9a\u542f\u52a8\u5b8c\u7684\u56de\u8c03\uff1b"),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("inlineCode",{parentName:"li"},"stop"),"\uff1a\u505c\u6b62 WDS\uff1b"),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("inlineCode",{parentName:"li"},"stopCallback"),"\uff1a\u505c\u6b62\u5e76\u6307\u5b9a\u505c\u6b62\u540e\u7684\u56de\u8c03\u3011")),(0,A.kt)("h3",{id:"\u5b9e\u73b0\u601d\u8def"},"\u5b9e\u73b0\u601d\u8def"),(0,A.kt)("p",null,"\u5728 WDS \u63d0\u4f9b\u7684 Nodejs API \u7684\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u5229\u7528",(0,A.kt)("inlineCode",{parentName:"p"},"startCallback"),"\u56de\u8c03\u6ce8\u518c",(0,A.kt)("inlineCode",{parentName:"p"},"chokidar"),"\u76d1\u542c\u6587\u4ef6\u7684\u7a0b\u5e8f\uff0c\u5f53\u68c0\u6d4b\u5230",(0,A.kt)("inlineCode",{parentName:"p"},"proxy"),"\u914d\u7f6e\u7684\u6587\u4ef6\u53d8\u5316\u540e\uff0c",(0,A.kt)("inlineCode",{parentName:"p"},"stop")," WDS \u5e76\u91cd\u542f\u4e00\u4e2a\u65b0\u7684 WDS \u5b9e\u4f8b\u3002"),(0,A.kt)("pre",null,(0,A.kt)("code",{parentName:"pre",className:"language-js"},"// server.js\nconst Webpack = require('webpack');\nconst WebpackDevServer = require('webpack-dev-server');\nconst webpackConfig = require('./webpack.config.js');\nconst proxy = require('./proxyConfig');\nconst chokidar = require('chokidar');\n\nconst compiler = Webpack(webpackConfig);\nconst server = new WebpackDevServer({\n  ...webpackConfig.devServer,\n  proxy\n}, compiler);\n\nfunction createServer() {\n  const server = new WebpackDevServer({\n    ...webpackConfig.devServer,\n    proxy\n  }, compiler);\n\n  server.startCallback(() => {\n    const watcher = chokidar.watch('./proxyConfig.js').on('change', () => {\n      console.log(\"checked dev-server proxy changes, restarting server\");\n      server.stopCallback(() => {\n        watcher.close();\n        createServer();\n      });\n    });\n  });\n}\n\ncreateServer();\n")),(0,A.kt)("pre",null,(0,A.kt)("code",{parentName:"pre",className:"language-js"},'// proxyConfig.js\nmodule.exports = {\n  "/api": {\n    target: "http://127.0.0.2"\n  }\n}\n')),(0,A.kt)("p",null,"\u7136\u540e\u5f00\u53d1\u73af\u5883\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u6211\u4eec\u7684",(0,A.kt)("inlineCode",{parentName:"p"},"server.js"),"\u7a0b\u5e8f\u66ff\u4ee3 webpack \u7684 cli \u547d\u4ee4\uff0c\u5373",(0,A.kt)("inlineCode",{parentName:"p"},"node server.js"),"\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4e86\u3002"),(0,A.kt)("p",null,(0,A.kt)("img",{alt:"image-20220105224129440",src:n(13740).Z,width:"987",height:"334"})))}k.isMDXComponent=!0},27619:function(e,t){t.Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjIAAACyCAYAAABY4yWoAAAREklEQVR4nO3deXCc9X3H8c/z7OpYHZa0unzJhyzb2C4Yy0dsg69AnACxcachMIWk6QDNTEsIBMq0ZVqTENKmUEwnQybTAE1DKFPCtAwGUoiJBRjkA59gSLF8Scay7sM61pL2efrHmonxIe/zrA7/dt+vv/fZfcKMnrz9PL/n+7Nc13UFAABgIHu0TwAAAMAvQgYAABiLkAEAAMYiZAAAgLEIGQAAYCxCBgAAGIuQAQAAxiJkAACAsQgZAABgLEIGAAAYi5ABAADGImQAAICxCBkAAGAsQgYAABiLkAEAAMYiZAAAgLEIGQAAYCxCBgAAGIuQAQAAxiJkAACAsQgZAABgLEIGAAAYi5ABAADGImQAAICxCBkAAGAsQgYAABiLkAEAAMYiZAAAgLEIGQAAYCxCBgAAGIuQAQAAxiJkAACAsQgZAABgLEIGAAAYi5ABAADGImQAAICxCBkAAGAsQgYAABiLkAEAAMYiZAAAgLEIGQAAYCxCBgAAGIuQAQAAxiJkAACAsYKjfQIAktu+dkdHu1z1O1I4w9KCQls5XHkADBHLdV13tE8CQPI53uvq7QZH9b2fv8Sk21Jl2FZloa0M7gkDSBAhA2BItfdJW5ocHeh0Bv1cTtDSkmJLc/JtWSN0bgCSDyEDYEhEotKOFkd72xz1D94wn1OSaWl5ia2ybHIGgHeEDICERF1pb5ujHS2Oegb8f095jqVlJbbCGQQNgPgRMgB8O9Tl6p1GR62nhuYyErSkKwpsLSq0FWJBMIA4EDIAPGuMuHq70VFd9/BcPkIBaWGhrblhW0Fu0AAYBCEDIG5dA1J1k6P9HY5G4spRkB573DQtl5oBcH6EDICL6nOknS2Odrc5OhUd+d+fmGVpeWlApZkj/9sALm2EDIALciXtb3dV3RRVVwILeWeMsTU5W3qvyVX3gL9LjmVJs/NsLS1moB6APyBkAJxXXXdsHUxjxP8lYmzI0opSW+NDsUdD/U7sFe2dLY589owyAtK8sK3KMAP1ABAyAM7Sckra0hjVoS7/l4bctNjalpljzr+2pWsg9hsfd/j/jZygtKQ4oDn5FgP1gBRGyACQJPUM/GGgXTSBuyULC2N3SwJx1EVDxNVbDY4+7fF/GWKgHpDaCBkgxQ040p42R++3OOpNYCHv3AJbS4pthQLej605GduXqaPf/+WoPMfS8lJbBekEDZBKCBkghX3S6WpLk6OOPv+Xgak5llaWBpSfnti5OJJ2tzra3uwo4jOoglYsqBYU2spiQTCQEggZIAXVn96Z+niv/z//oozYQt5JQ/xIJxKVtjY72tPqyO/ZMVAPSB2EDJBCOvqldxsd/d9FdqYeTHbQ0tJiS3+UP7yvDHX0S1UnElt0zEA9IPkRMkAKiESl91sc7fG4M/WZ0mxpfjj22CbNR8O09Ayo0MfznroeV1UNjpoTeA08NlDPVmkmQQMkG0IGSGJRV/qw3dW25qi6ExhoNyfP0lUlAWX7WHdyoCmi9a/UaE9dp+69doruXDre1zl82O4kNlBPpwfqlTBQD0gmhAyQpI73utpU76glgZ2py7Jj62CKM7zfyWjtHdCjvz2q57Z+qjMvM1OKs/WDtRVaVZHv+Ts/G6i3q9X/naUMW6ostLW4iGl6QDIgZIAkVHPS1cZj/t+lzk+PBUx5jr9HMU9V12vDpsPq7Om/4Ge+OKtID321QlPDGZ6/v2tAercxqo8SGKg3Y4ylGyb4eFccwCWFkAGSjONK/1YTVa+PRzChgLS4KPa2j5+E+d2Bdj20sUaHm7rj+nwwYOtbV5Xp3i+WaUyG96hojEhVDVHfA/VuLAv4jjUAlwZCBkgyzRHp2cPeFsQErNj+RYuK/O1fdKg1ovUbD6rq983eD5YUzsnQA1+eqlsXlPo6/uDJ2IRgrwP15uTbWj2OR0yAyQgZIMnUdTt6sTb+BSQzcm0tK7U1Js37b7X1RrVhc61++d4xRaP+X+n+zKzxufr+mulaMiXX87GOK+1u8zZQb2KWdNNkVv4CJiNkgCQTb8icvTO1V89U12vDm0fU3t3n6/jBrJk7Vn/7lakq8zEuuDcqbYtzoB4hA5iPkAGSTDwhc8OEgGZcYGfqi6k62KGHNtboYEOXr+PjlZke0O3LyvSdFWXK9jG4pr1PeuXTqJoGmT9DyADm4+EwkIL8RMyh1oi++cv9+sZTe4Y9YiQp0hfVk28e0bLHduh/9nlfe5OfLpX4eG0cgFn4pwiAQbX1RvXE5lo9W31M/QOJr4Pxqqkzoruf36+n38vX9786TfMn5oz4OQC4dBEyAC7o37fW6/FNw7MOxqu9R9u17smd+tqC8br/S5M1YUyC220DSAqEDIBzNHb168+e/Ugf1raP9qmc48X3j+u1Dxq14ebZun5WwWifDoBRxhoZAOcoyUnTz265TF+5vGS0T+Uc4wtC2nDzLCIGgCTuyAC4gMkFGfr5n87S24fGa/3Gg6o5cXJUzyeUEdRfLC/Td5aXKSPIIl4AMYQMgEEtL8/T5u9W6qnqej3x5hF1jMJ6mXWV4/TA6ikqy2NdDIDPI2QAxOWOJeO0bm6x/uXNWj2/9ZiizvCPoJo5LlcPr/U36RdAamCNDIC4FWUF9Y9ryvXGPQu1pCI8bL+Tl52uR/54pjbdXZlQxERGILYAjC7uyADwbEZxSC/cfrl+83Gr1m+sUX1b75B8b8C2dOviibrv2kkKhxK/PJ2Kc88lAOYiZAD4dt2ssFZftkg/eeuYflp1VL2nvO26faal08N6eE2FZhSHhvAMASQ7QgZAQgKWdM/Kifp6Zal+/MZh/ffOek/HjysI6aE1Fbp+1vA9qgKQvFgjA+Acvf3etyIYPyZN//q1GXr5r+brirK8i34+Mz2o760uV/VfLyJiAPhGyAA4x8OvH9ULuxt9HTtvYo5e/csr9cQts1WYm3Hez6ybN1ZV9y3UvavKFPAxEuaTpl7d8swHvs4PQHLh0RKAc7Se7NN9L9TqF9XH9cO1Far0sVHjn8wt1vWzC/X45lo9/U6d+gcczZ4wRo/cOF0Lyvxt/Ngeieqf3jii56qP+ToeQPIhZABc0Ad1HbrxyZ1aN2+sHryuXGNz0zwdH0qz9eDqKbpt4ThtPdyhmyv9b3nwH9vq9c9vHFZnT7/v7wCQfAgZAOc663HPS7tP6H/3N+uuVZN01wrvj4MmF2RocoG/iHn7UIf+4eUaHWzo8nU8gOTGGhkAcYn0Deix1w9p6aPb9dpHrcP+e7Xtp3Tncx/r1p/vIWIAXBB3ZAB4crytV99+9gMtqQjrkbUVmj7Ec196+h1t2Fynp9+pVf+A97enAKQWQgaAL9U1rbrm8e26dclE3X/tZBVmJX45eXFPkx557aCaT54agjMEkAoIGQC+uZJ+VX1ML+9t1D3XTNadS8f7+p5dx7r09xtrtK+2Y2hPEEDSY40MgIR19vTpBxsPaPmGnaqqiT9Gjnf26bsvfqIbn9xJxADwhTsyAIbM4cYufePpPbpmVrF+8c3Zg372Vzsa9PCrNepJYH8mAOCODIAh9+bHTRf9zJaadiIGQMIIGQAAYCxCBgAAGIuQATA6fGwWCQBnI2QAAICxCBkA5/ibL0/Rl+YUj/ZpXNDY/Ez97LbLR/s0AFwCeP0awDmmFGTomdtmq+pgh9a/XKNDjZfGXkeh9KC+vXKS7l4xUWk2z6YAcEcGwCBWTsvTW/fO1/o105WblTaq57Ju3lj97nsLdd+qsrgjJi+N2AGSHXdkAFzUHUvHa93cEj266aie33ZMrjtyvz17whj9cO10LZyUM3I/CsAY3JEBUtD2ZkdRjzFSlB3Uj2+cpt/es0iLK8LDc2JnKMjJ0GM3zdLrd83zFTF1Pa7qIyNYXABGBXdkgBT0bpOjfe2ulhVbmpnn7d8zM0tC+vXtl+vV/S166JUanWiPDOm5BQO2vnVVme6/ZpKy073/W6u9T3qrIapDXUQMkAoIGSDJ2FZ860JO9rt67birXW2uVpTaGh/ytp7khjmFumFOoTZsrtNPq44q0hf1c7qfs3pOsR68vlzl4UzPx/ZGpW3Njva0Ooo3YeL9bwXg0kXIAEkmK+jt/5xP9Lr6ryNRTc+1tLw0oDEe1/Teu6pMtywYqx/95pBe2n3C28GnTSnO1sNrK7SyIt/zsY4r7W51tL3FUcRjSxVlEjKA6QgZIMkUpEv56Zba+7w9Wjlw0tXBrgFdWWDrC0W2MgPxHzsuN00/+fpM3XH1RP3dSwe0r64jruNyQml6YPVU/fnicZ7O9TM1J1291eCos9/fY6Rp2YQMYDrLdUfy/QMAI6Ex4uqlOkfdA/7+vEMBS18osnRl2Pa1k8Cvdzfqpnklg37mP3c26rrZhSoIeSim0xoisYD5tMf/5Wtxka0lxbzvAJiOkAGSVGe/tKk+qqPd/v/E89ItrSixNS330rhz0TUgbWl09HGH4/s7ctIsLS+xNXPMpfG/CUBiCBkgyR3pdvVOg6PmU/7/1CdmWVpeaqt0lNaU9DuxV8Z3tTka8NkwGQFpXtjW/LAtHy9DAbhEETJACnBc6YN2R9uaXd+PmyRpdp6tq0ps5Yzg6roP21291+T/MZklaXa+raXFI3veAEYGIQOkkEhU2tnqaHero36fdzaCtjS/wNbCIltpw3hno7Y7tg7G5DtJAIYfIQOkoM5+V+82Ovp9p/8//6ygtLQ4oMvzhzYS2vukqoaoDicw0K4g3dKyS2htD4DhQ8gAKay+19XbDY6O9/q/DIQzLK0stTU5wVeZe6PS1iZHe9viH2h3tlBAWlhoa27YlsdxOgAMRcgA0Cedjt5tcj3PnjnTlGxLK8baCqd7KwjHlXadHmh3yudw4KAlzS2wtaDQVhbrYICUQsgAkBR7M2hvm6P3W1z1et1R8gxXFMTms2TFMR7mwMnYHSG/A+0kqTwnNpG4IN33VwAwGCED4HN6BqQdLVHtbXM975D9mXQ79ohnfqGtwHlu0DREXFWdSOyRVklmbB5MGdN5gZRGyAA4r9ZTrt5pdBLaRTo3zdLVJbYuOz18bkgG2gWlJcW25uT7mzoMILkQMgAGVdcdC5qGiP9LRWmmpSk5lna2OPI7xibdlirDtioLbWUw0A7AaYQMgItyJe1vd1Td7KorgfUsfliSZuVZuqokwEA7AOcgZADErc+JvWG0q8XRKf9Ph+I2IcvSCgbaARgEIQPAs64Bqbopqv0drobjClKQbunqEksVuTxDAjA4QgaAb42R2OvTdT1DcxkJBa3YQLsCi4F2AOJCyABI2OGu2ILgFp/7IgWt2PyZRUW2QnHMnwGAzxAyAIZE1JX2tTna3uKqx8OrSeU5tpaVWApncAsGgHeEDIAhFYlKO1pieyYNtsM2A+0ADAVCBsCw6OhztaXJ0Sdn7bCdE7ROD7SzGGgHIGGEDIBh1RBxdaTLVc9A7HXqqTmW0ngZCcAQIWQAAICx+HcRAAAwFiEDAACMRcgAAABjETIAAMBYhAwAADAWIQMAAIxFyAAAAGMRMgAAwFiEDAAAMBYhAwAAjEXIAAAAYxEyAADAWIQMAAAwFiEDAACMRcgAAABjETIAAMBYhAwAADAWIQMAAIxFyAAAAGMRMgAAwFiEDAAAMBYhAwAAjEXIAAAAYxEyAADAWIQMAAAwFiEDAACMRcgAAABjETIAAMBYhAwAADAWIQMAAIxFyAAAAGMRMgAAwFiEDAAAMBYhAwAAjEXIAAAAYxEyAADAWIQMAAAwFiEDAACMRcgAAABjETIAAMBYhAwAADAWIQMAAIxFyAAAAGMRMgAAwFiEDAAAMBYhAwAAjEXIAAAAYxEyAADAWP8P4XaI/1926xUAAAAASUVORK5CYII="},13740:function(e,t,n){t.Z=n.p+"assets/images/image-20220105224129440-a325a3446ec18500d614f10086a749a3.png"}}]);